<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="description" content="ë¶€ì‚°í•­ í˜„ì¥ì§ í•„ìˆ˜ ì•±. ì„ê¸ˆê³„ì‚°ê¸°, ìŠ¤ë§ˆíŠ¸ ê·¼ë¬´ì¼ì§€, ì„ ë°•ìœ„ì¹˜ ì¡°íšŒ.">
    <title>BUSAN HAK PORT INFO</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6024353303588422" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />

    <style>
        :root { --primary: #1e3a8a; --primary-light: #3b82f6; --accent: #f59e0b; --bg-color: #f3f4f6; --card-bg: rgba(255, 255, 255, 0.95); --text-main: #1f2937; --text-sub: #6b7280; --border: rgba(229, 231, 235, 0.8); --danger: #ef4444; --success: #10b981; }
        body.dark-mode { --primary: #60a5fa; --primary-light: #93c5fd; --bg-color: #0f172a; --card-bg: rgba(30, 41, 59, 0.95); --text-main: #f3f4f6; --text-sub: #9ca3af; --border: rgba(55, 65, 81, 0.5); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Pretendard', sans-serif; }
        body { background-color: var(--bg-color); color: var(--text-main); margin: 0; padding-bottom: 100px; transition: background 0.3s; }
        .tap-effect:active { transform: scale(0.98); }
        header { background: linear-gradient(135deg, var(--primary), var(--primary-light)); color: white; padding: 14px 0; text-align: center; position: sticky; top: 0; z-index: 100; }
        .theme-toggle { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.2); border: none; width: 30px; height: 30px; border-radius: 50%; color: white; cursor: pointer; }
        .container { width: 96%; max-width: 600px; margin: 15px auto; }
        .dash-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .dash-card { background: var(--card-bg); border-radius: 16px; border: 1px solid var(--border); overflow: hidden; transition: 0.3s; display: flex; flex-direction: column; }
        .dash-card.expanded { grid-column: span 2; }
        .dash-header { padding: 15px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        .dash-title { font-size: 0.95rem; font-weight: 800; display: flex; align-items: center; gap: 6px; }
        .toggle-icon { font-size: 0.7rem; transition: 0.3s; }
        .toggle-icon.rotated { transform: rotate(180deg); }
        .dash-content { display: none; padding: 15px; animation: fadeIn 0.2s; }
        .card { background: var(--card-bg); border-radius: 16px; margin-bottom: 15px; border: 1px solid var(--border); overflow: hidden; }
        .section-header { display: flex; justify-content: space-between; align-items: center; padding: 15px; cursor: pointer; }
        .section-title { font-size: 1rem; font-weight: 800; }
        .collapsible-content.collapsed { display: none !important; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; } }
        .input-field { width: 100%; padding: 12px; margin-bottom: 8px; border: 1px solid var(--border); border-radius: 8px; font-size: 0.9rem; }
        .action-btn { width: 100%; padding: 12px; border: none; border-radius: 10px; font-weight: 700; color: white; cursor: pointer; background: var(--primary); margin-bottom: 5px; }
        .bg-submit { background: var(--success); } .bg-calc { background: linear-gradient(135deg, #ef4444, #b91c1c); }
        .terminal-block { background: rgba(0,0,0,0.03); border-radius: 10px; margin-bottom: 8px; padding: 10px; }
        .terminal-actions { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; margin-top: 8px; }
        .terminal-btn { background: white; border: 1px solid var(--border); padding: 8px; border-radius: 6px; font-size: 0.75rem; text-align: center; text-decoration: none; color: var(--text-main); font-weight: 700; }
        .wage-row { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; font-size: 0.9rem; }
        .wage-row label { flex: 1; font-weight: 600; }
        .post-item { padding: 12px 5px; border-bottom: 1px solid var(--border); }
        .post-title-text { font-weight: 700; font-size: 0.9rem; }
        .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; height: 65px; background: white; border-top: 1px solid var(--border); display: flex; justify-content: space-around; align-items: center; z-index: 1000; }
        .nav-item { flex: 1; text-align: center; color: var(--text-sub); font-size: 0.7rem; cursor: pointer; }
        .nav-item.active { color: var(--primary); font-weight: 800; }
        .ticker-container { background: var(--accent); color: black; font-weight: 700; height: 36px; display: flex; align-items: center; overflow: hidden; position: relative; font-size: 0.85rem; }
        .ticker-item { padding-left: 100%; animation: ticker 25s linear infinite; white-space: nowrap; }
        @keyframes ticker { 100% { transform: translate3d(-100%, 0, 0); } }
        #toast { position: fixed; bottom: 85px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); color: white; padding: 10px 20px; border-radius: 20px; z-index: 9999; display: none; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <header>
        <h1>BUSAN HAK PORT</h1>
        <button class="theme-toggle" onclick="toggleDarkMode()">ğŸŒ™</button>
    </header>

    <div class="ticker-container">
        <div id="tickerText" class="ticker-item">ğŸš¨ ì•ˆì „ ì œì¼! ì˜¤ëŠ˜ë„ ë¬´ì‚¬ê³ !</div>
    </div>

    <div class="container">
        <div class="dash-grid">
            <div id="wage-card" class="dash-card" style="border:1px solid var(--danger);">
                <div class="dash-header tap-effect" onclick="toggleDashItem('wage-card')">
                    <span class="dash-title" style="color:var(--danger);">ğŸ’° ì„ê¸ˆ ê³„ì‚°ê¸°</span><span class="toggle-icon">â–¼</span>
                </div>
                <div class="dash-content">
                    <div class="wage-row"><label>ì‹œê¸‰</label><input type="number" id="wageHourly" class="input-field" value="10030" style="text-align:right;"></div>
                    <div class="wage-row"><label>â˜€ï¸ ì£¼ê°„</label><input type="number" id="wageDayHours" class="input-field" placeholder="H"></div>
                    <div class="wage-row"><label>ğŸŒ™ ì•¼ê°„/íœ´ì¼</label><input type="number" id="wageNightHours" class="input-field" placeholder="H"></div>
                    <button class="action-btn bg-calc" onclick="calculateWage()">ê³„ì‚°í•˜ê¸°</button>
                    <div id="wageResult" class="hidden" style="text-align:center; font-weight:bold; color:var(--danger); margin-top:10px;"></div>
                </div>
            </div>

            <div id="log-card" class="dash-card" style="border:1px solid var(--primary);">
                <div class="dash-header tap-effect" onclick="checkAdminAndOpenLog('log-card')">
                    <span class="dash-title" style="color:var(--primary);">ğŸ“… ìŠ¤ë§ˆíŠ¸ ê·¼ë¬´ì¼ì§€</span><span class="toggle-icon">â–¼</span>
                </div>
                <div id="workLogArea" class="dash-content">
                    <div id="calendarGrid" class="calendar-grid"></div>
                    <div id="monthlyTotal" style="text-align:center; margin-top:10px; font-weight:bold;">ì›” í•©ê³„: 0ì›</div>
                </div>
            </div>
        </div>

        <div class="card" style="border-left: 5px solid #3b82f6;">
            <div class="section-header" onclick="toggleSection('t3-content', this)"><span class="section-title">â›´ï¸ 3í•­ì—… (ì‹ í•­ ë‚¨ì¸¡) <span class="toggle-icon">â–¼</span></span></div>
            <div id="t3-content" class="collapsible-content collapsed">
                <div class="terminal-block">
                    <h4>í•œì§„ì‹ í•­ë§Œ (HJNC)</h4>
                    <div class="terminal-actions">
                        <a href="https://www.hjnc.co.kr/esvc/vessel/berthScheduleT" target="_blank" class="terminal-btn">ìŠ¤ì¼€ì¤„</a>
                        <a href="http://bayplan.hjnc.co.kr" target="_blank" class="terminal-btn" style="background:#fffbeb;">ğŸ§© BAY</a>
                        <a href="https://www.hjnc.co.kr/esvc/vessel/vesselStatus" target="_blank" class="terminal-btn">í˜„í™©</a>
                    </div>
                </div>
                <div class="terminal-block">
                    <h4>ë¶€ì‚°ì‹ í•­ì»¨í…Œì´ë„ˆ (BNCT)</h4>
                    <div class="terminal-actions">
                        <a href="https://info.bnctkorea.com/esvc/vessel/berthScheduleT" target="_blank" class="terminal-btn">ìŠ¤ì¼€ì¤„</a>
                        <a href="https://info.bnctkorea.com/esvc/vessel/vesselStatus" target="_blank" class="terminal-btn">í˜„í™©</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="card" style="border-left: 5px solid #10b981;">
            <div class="section-header" onclick="toggleSection('t2-content', this)"><span class="section-title">ğŸ—ï¸ 2í•­ì—… (ì‹ í•­ ë¶ì¸¡) <span class="toggle-icon">â–¼</span></span></div>
            <div id="t2-content" class="collapsible-content collapsed">
                <div class="terminal-block">
                    <h4>ë¶€ì‚°ì‹ í•­ë§Œ (PNC)</h4>
                    <div class="terminal-actions">
                        <a href="https://svc.pncport.com/info/CMS/Ship/Info.pnc?mCode=MN014" target="_blank" class="terminal-btn">ìŠ¤ì¼€ì¤„</a>
                        <a href="https://svc.pncport.com/info/CMS/Ship/ShipVslStatus.pnc?mCode=MN020" target="_blank" class="terminal-btn">í˜„í™©</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="card" style="border-left: 5px solid #f97316;">
            <div class="section-header" onclick="toggleSection('t1-content', this)"><span class="section-title">âš“ 1í•­ì—… (ë¶í•­) <span class="toggle-icon">â–¼</span></span></div>
            <div id="t1-content" class="collapsible-content collapsed">
                <div class="terminal-block">
                    <h4>ë¶í•­ í†µí•© (BPTC)</h4>
                    <div class="terminal-actions">
                        <a href="http://info.bptc.co.kr:9084" target="_blank" class="terminal-btn">í„°ë¯¸ë„ í¬í„¸</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="section-header" onclick="toggleSection('ship-info-content', this)"><span class="section-title">ğŸš¢ ì„ ë°• ìœ„ì¹˜ ë° ì •ë³´ <span class="toggle-icon">â–¼</span></span></div>
            <div id="ship-info-content" class="collapsible-content collapsed">
                <a href="https://www.marinetraffic.com/" target="_blank" class="action-btn" style="background:#0284c7; display:block; text-align:center; text-decoration:none;">ğŸŒ ì‹¤ì‹œê°„ ì„ ë°• ìœ„ì¹˜ (MarineTraffic)</a>
                <div style="margin-top:10px;">
                    <input type="text" id="shipSearch" class="input-field" placeholder="ì„ ë°•ëª… ê²€ìƒ‰..." onkeyup="filterShips()">
                    <button class="action-btn" onclick="toggleHidden('shipForm')">ğŸ“ ì„ ë°• ì •ë³´ ë“±ë¡</button>
                    <div id="shipForm" class="hidden">
                        <input type="text" id="shipName" class="input-field" placeholder="ì„ ë°•ëª…">
                        <textarea id="shipOnboard" class="input-field" style="height:60px;" placeholder="ì‘ì—… ë‚´ìš©"></textarea>
                        <input type="file" id="shipFileInput" class="input-field">
                        <button class="action-btn bg-submit" onclick="addShipInfo()">ë“±ë¡í•˜ê¸°</button>
                    </div>
                    <ul id="shipList" class="post-list"></ul>
                </div>
            </div>
        </div>

        <div class="dash-grid">
            <div id="notice-card" class="dash-card">
                <div class="dash-header" onclick="toggleDashItem('notice-card')"><span>ğŸ“¢ ê³µì§€ì‚¬í•­</span><span>â–¼</span></div>
                <div class="dash-content"><ul id="noticeList" class="post-list"></ul></div>
            </div>
            <div id="board-card" class="dash-card">
                <div class="dash-header" onclick="toggleDashItem('board-card')"><span>ğŸ’¬ ìµëª…ê²Œì‹œíŒ</span><span>â–¼</span></div>
                <div class="dash-content">
                    <button class="action-btn" style="background:var(--text-sub);" onclick="toggleHidden('boardForm')">âœï¸ ê¸€ì“°ê¸°</button>
                    <div id="boardForm" class="hidden">
                        <input type="text" id="inputTitle" class="input-field" placeholder="ì œëª©">
                        <input type="password" id="inputPw" class="input-field" placeholder="ë¹„ë²ˆ">
                        <textarea id="inputContent" class="input-field" placeholder="ë‚´ìš©"></textarea>
                        <button class="action-btn bg-submit" onclick="addPost()">ë“±ë¡</button>
                    </div>
                    <ul id="boardList" class="post-list"></ul>
                </div>
            </div>
        </div>

        <div class="card" style="padding:15px; font-size:0.85rem; line-height:1.6;">
            <h4 style="margin-top:0; color:var(--primary);">âš“ ë¶€ì‚°í•­ ê·¼ë¬´ ê°€ì´ë“œ</h4>
            <p>ë¶€ì‚°í•­ì€ êµ­ê°€ ì¤‘ìš” ì‹œì„¤ë¡œ 24ì‹œê°„ ìš´ì˜ë©ë‹ˆë‹¤. í„°ë¯¸ë„ë³„ ì„ ì„ ìƒí™©ê³¼ ê¸°ìƒ ìƒíƒœì— ë”°ë¼ ì‘ì—… ëŒ€ê¸° ì‹œê°„ì´ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë‹ˆ ìƒë‹¨ì˜ ì‹¤ì‹œê°„ ìŠ¤ì¼€ì¤„ ì¡°íšŒë¥¼ í™œìš©í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤. ì•ˆì „ ì¥êµ¬ ë¯¸ì°©ìš© ì‹œ ì¶œì…ì´ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        </div>

        <footer>
            <p>Â© 2026 BUSAN HAK PORT INFO</p>
            <div style="font-size:0.75rem; color:var(--text-sub);" onclick="openPrivacy()">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</div>
        </footer>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="location.reload()">ğŸ  í™ˆ</div>
        <div class="nav-item" onclick="toggleDashItem('board-card')">ğŸ’¬ í†¡í†¡</div>
        <div class="nav-item" onclick="toggleSection('ship-info-content', document.querySelector('.section-header'))">ğŸš¢ ì„ ë°•</div>
    </nav>

    <div id="toast">ì•Œë¦¼</div>

    <script>
        const firebaseConfig = { apiKey: "AIzaSyBDXy5HcYW-IZQJ9ZDEivr_yi99AxhYme8", authDomain: "my-app-d8527.firebaseapp.com", projectId: "my-app-d8527", storageBucket: "my-app-d8527.firebasestorage.app", messagingSenderId: "667323279185", appId: "1:667323279185:web:cff6184aaa82e08d345570" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const storage = firebase.storage();

        function showToast(m){const t=document.getElementById("toast"); t.innerText=m; t.style.display="block"; setTimeout(()=>t.style.display="none",2500);}
        function toggleDashItem(id){const c=document.getElementById(id); const e=c.classList.contains('expanded'); document.querySelectorAll('.dash-card').forEach(x=>{x.classList.remove('expanded'); x.querySelector('.dash-content').style.display='none'}); if(!e){c.classList.add('expanded'); c.querySelector('.dash-content').style.display='block';}}
        function toggleSection(id,el){const c=document.getElementById(id); c.classList.toggle('collapsed'); el.querySelector('.toggle-icon')?.classList.toggle('rotated');}
        function toggleHidden(id){document.getElementById(id).classList.toggle('hidden');}
        function toggleDarkMode(){document.body.classList.toggle('dark-mode');}

        // [í•µì‹¬ ê¸°ëŠ¥ 1: ì„ê¸ˆ ê³„ì‚°ê¸°]
        function calculateWage(){
            const h=parseFloat(document.getElementById('wageHourly').value)||0, d=parseFloat(document.getElementById('wageDayHours').value)||0, n=parseFloat(document.getElementById('wageNightHours').value)||0;
            const total = (h*d) + (h*1.5*n);
            const r=document.getElementById('wageResult'); r.innerText=`ì˜ˆìƒ ì„¸ì „ ìˆ˜ë ¹ì•¡: ${Math.floor(total).toLocaleString()}ì›`; r.classList.remove('hidden');
        }

        // [í•µì‹¬ ê¸°ëŠ¥ 2: ê²Œì‹œíŒ & ì‚­ì œ]
        function addPost(){
            const t=document.getElementById('inputTitle').value, p=document.getElementById('inputPw').value, c=document.getElementById('inputContent').value;
            if(!t || !p || !c) { showToast("ë¹ˆì¹¸ì„ ì±„ì›Œì£¼ì„¸ìš”."); return; }
            db.collection("posts").add({ title:t, password:p, content:c, name:"ìµëª…", timestamp: firebase.firestore.FieldValue.serverTimestamp() })
            .then(()=>{ showToast("ë“±ë¡ ì™„ë£Œ"); document.getElementById('boardForm').classList.add('hidden'); });
        }

        async function deletePost(id, realPw){
            const pw = prompt("ë¹„ë°€ë²ˆí˜¸ ì…ë ¥:");
            if(pw === realPw || pw === "0346") {
                if(confirm("ì •ë§ ì‚­ì œí• ê¹Œìš”?")) db.collection("posts").doc(id).delete().then(()=>showToast("ì‚­ì œë¨"));
            } else { showToast("ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜"); }
        }

        // [í•µì‹¬ ê¸°ëŠ¥ 3: ì„ ë°• ì •ë³´ ë“±ë¡]
        function addShipInfo(){
            const n=document.getElementById('shipName').value, c=document.getElementById('shipOnboard').value, f=document.getElementById('shipFileInput').files[0];
            if(!n) { showToast("ì„ ë°•ëª…ì„ ì…ë ¥í•˜ì„¸ìš”."); return; }
            const save = (url) => {
                db.collection("ships").add({ shipName:n, content:c, imageUrl:url, timestamp: firebase.firestore.FieldValue.serverTimestamp() })
                .then(()=>{ showToast("ì„ ë°• ë“±ë¡ ì™„ë£Œ"); toggleHidden('shipForm'); });
            };
            if(f) storage.ref(`ships/${Date.now()}_${f.name}`).put(f).then(s=>s.ref.getDownloadURL()).then(u=>save(u));
            else save(null);
        }

        // [ë°ì´í„° ë¡œë“œ]
        function loadData(){
            db.collection("posts").orderBy("timestamp","desc").limit(10).onSnapshot(s=>{
                const l=document.getElementById("boardList"); l.innerHTML="";
                s.forEach(d=>{ const x=d.data(); l.innerHTML+=`<li class="post-item"><strong>${x.title}</strong><br><small>${x.content}</small><br><button onclick="deletePost('${d.id}','${x.password}')" style="background:none; border:none; color:var(--danger); font-size:0.7rem;">[ì‚­ì œ]</button></li>`; });
            });
            db.collection("ships").orderBy("timestamp","desc").limit(5).onSnapshot(s=>{
                const l=document.getElementById("shipList"); l.innerHTML="";
                s.forEach(d=>{ const x=d.data(); l.innerHTML+=`<li class="post-item">ğŸš¢ <strong>${x.shipName}</strong>: ${x.content || 'ì •ë³´ ì—†ìŒ'}</li>`; });
            });
        }
        
        window.onload = loadData;
    </script>
</body>
</html>
