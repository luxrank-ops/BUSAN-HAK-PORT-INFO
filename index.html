<!DOCTYPE html>
<html lang="ko">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
Â  Â  <meta name="description" content="ë¶€ì‚°í•­ í˜„ì¥ì§ í•„ìˆ˜ ì•±">
Â  Â  <title>BUSAN HAK PORT INFO</title>
Â  Â Â 
Â  Â  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
Â  Â  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
Â  Â  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
Â  Â  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6024353303588422" crossorigin="anonymous"></script>

Â  Â  <link rel="icon" type="image/png" sizes="32x32" href="icon.png">
Â  Â  <link rel="stylesheet" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />

Â  Â  <style>
Â  Â  Â  Â  :root { --primary: #1e3a8a; --primary-light: #3b82f6; --accent: #f59e0b; --bg-color: #f3f4f6; --card-bg: rgba(255, 255, 255, 0.98); --text-main: #1f2937; --text-sub: #6b7280; --border: rgba(229, 231, 235, 0.9); --danger: #ef4444; --success: #10b981; }
Â  Â  Â  Â  body.dark-mode { --primary: #60a5fa; --primary-light: #93c5fd; --accent: #fbbf24; --bg-color: #0f172a; --card-bg: rgba(30, 41, 59, 0.98); --text-main: #f3f4f6; --text-sub: #9ca3af; --border: rgba(55, 65, 81, 0.7); }
Â  Â  Â  Â  * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Pretendard', sans-serif; }
Â  Â  Â  Â  body { background-color: var(--bg-color); color: var(--text-main); margin: 0; padding: 0; padding-bottom: 90px; padding-top: env(safe-area-inset-top); font-size: 16px; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  header { background: linear-gradient(135deg, var(--primary), var(--primary-light)); color: white; padding: 14px 0; text-align: center; position: sticky; top: 0; z-index: 100; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
Â  Â  Â  Â  header h1 { margin: 0; font-size: 1.2rem; font-weight: 900; }
Â  Â  Â  Â  .theme-toggle { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.2); border: none; width: 34px; height: 34px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1.1rem; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .ticker-container { background: var(--accent); color: #000; font-weight: 800; height: 45px; display: flex; align-items: center; overflow: visible; position: relative; font-size: 0.9rem; border-bottom: 1px solid rgba(0,0,0,0.1); }
Â  Â  Â  Â  .ticker-wrap { flex: 1; overflow: hidden; height: 100%; position: relative; margin-right: 50px; }
Â  Â  Â  Â  .ticker-item { padding-left: 100%; animation: ticker 25s linear infinite; white-space: nowrap; line-height: 45px; }
Â  Â  Â  Â  @keyframes ticker { 100% { transform: translate3d(-100%, 0, 0); } }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .ticker-setting-area {
Â  Â  Â  Â  Â  Â  position: absolute; right: 0; top: 0; width: 50px; height: 100%;
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; justify-content: center;
Â  Â  Â  Â  Â  Â  background: rgba(255,255,255,0.15); border-left: 1px solid rgba(0,0,0,0.05);
Â  Â  Â  Â  Â  Â  z-index: 100; cursor: pointer;
Â  Â  Â  Â  }
Â  Â  Â  Â  .setting-icon { font-size: 1.4rem; transition: transform 0.3s; }
Â  Â  Â  Â  .ticker-setting-area:hover .setting-icon { transform: rotate(90deg); }

Â  Â  Â  Â  .hover-menu-box {
Â  Â  Â  Â  Â  Â  display: none; position: absolute; top: 100%; right: 5px;
Â  Â  Â  Â  Â  Â  background: var(--card-bg); border: 1px solid var(--border); border-radius: 8px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
Â  Â  Â  Â  Â  Â  flex-direction: column; overflow: hidden; z-index: 9999; width: 140px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .ticker-setting-area:hover .hover-menu-box, .hover-menu-box:hover { display: flex !important; }

Â  Â  Â  Â  .menu-btn {Â 
Â  Â  Â  Â  Â  Â  padding: 12px; border: none; background: transparent;Â 
Â  Â  Â  Â  Â  Â  color: var(--text-main); font-weight: bold; cursor: pointer;Â 
Â  Â  Â  Â  Â  Â  text-align: left; font-size: 0.85rem; border-bottom: 1px solid rgba(0,0,0,0.05);Â 
Â  Â  Â  Â  Â  Â  transition: background 0.2s; display: flex; align-items: center; gap: 8px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .menu-btn:last-child { border-bottom: none; }
Â  Â  Â  Â  .menu-btn:hover { background: var(--primary); color: white; }
Â  Â  Â  Â  .btn-del-menu { color: var(--danger); }
Â  Â  Â  Â  .btn-del-menu:hover { background: var(--danger); color: white; }

Â  Â  Â  Â  .container { width: 96%; max-width: 600px; margin: 0 auto; padding: 8px; }
Â  Â  Â  Â  .dash-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 12px; }
Â  Â  Â  Â  .dash-card { background: var(--card-bg); border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border: 1px solid var(--border); overflow: hidden; }
Â  Â  Â  Â  .dash-card.expanded { grid-column: span 2; }
Â  Â  Â  Â  .dash-header { padding: 14px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.05); min-height: 50px; }
Â  Â  Â  Â  .dash-content { display: none; padding: 12px; background: var(--card-bg); animation: fadeIn 0.2s; }
Â  Â  Â  Â  .card { background: var(--card-bg); border-radius: 12px; margin-bottom: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border: 1px solid var(--border); overflow: hidden; }
Â  Â  Â  Â  .section-header { display: flex; justify-content: space-between; align-items: center; padding: 12px 14px; cursor: pointer; border-bottom: 1px solid var(--border); }
Â  Â  Â  Â  .collapsible-content { display: block; padding: 12px; }
Â  Â  Â  Â  .collapsible-content.collapsed { display: none !important; }
Â  Â  Â  Â  .input-field { width: 100%; padding: 0 10px; margin-bottom: 0; border: 1px solid var(--border); border-radius: 8px; background: rgba(255,255,255,0.6); color: var(--text-main); font-size: 1rem; height: 40px; text-align: right; font-weight: bold; display: flex; align-items: center; }
Â  Â  Â  Â  .textarea-field { height: 80px; resize: none; text-align: left; font-weight: normal; padding: 10px; }
Â  Â  Â  Â  .action-btn { width: 100%; padding: 14px; border: none; border-radius: 10px; font-weight: 800; color: white; cursor: pointer; background: var(--primary); font-size: 1rem; margin-top: 5px; }
Â  Â  Â  Â  .bg-submit { background: var(--success); } .bg-calc { background: linear-gradient(135deg, #ef4444, #b91c1c); } .bg-cancel { background: var(--text-sub); }
Â  Â  Â  Â  .wage-row { display: flex; align-items: center; margin-bottom: 8px; width: 100%; justify-content: space-between; }
Â  Â  Â  Â  .wage-row label { width: auto; min-width: 60px; font-weight: 700; margin-right: 5px; }
Â  Â  Â  Â  .allowance-grid { display: grid; grid-template-columns: 1fr 1fr; column-gap: 8px; row-gap: 2px; }
Â  Â  Â  Â  .calc-layout { display: flex; gap: 10px; margin-bottom: 12px; }
Â  Â  Â  Â  .calc-left { flex: 1; display: flex; flex-direction: column; justify-content: center; }
Â  Â  Â  Â  .calc-right { flex: 1; display: flex; flex-direction: column; justify-content: center; }
Â  Â  Â  Â  .wage-result-box { background: linear-gradient(135deg, #ffffff, #f9fafb); border: 2px solid var(--primary); border-radius: 10px; padding: 15px; margin-top: 15px; }
Â  Â  Â  Â  .spec-table { width: 100%; border-collapse: collapse; margin: 8px 0; font-size: 0.85rem; }
Â  Â  Â  Â  .spec-table td { padding: 6px 0; color: var(--text-main); }
Â  Â  Â  Â  .wage-total { font-size: 1.5rem; color: #c2410c; font-weight: 900; text-align: center; border-top: 2px solid var(--primary); padding-top: 10px; margin-top: 10px; }
Â  Â  Â  Â  .role-selector { display: flex; gap: 4px; margin-bottom: 12px; background: rgba(0,0,0,0.05); padding: 4px; border-radius: 10px; }
Â  Â  Â  Â  .role-selector label { flex: 1; text-align: center; padding: 10px 0; border-radius: 8px; font-weight: 700; cursor: pointer; color: var(--text-sub); }
Â  Â  Â  Â  .role-selector input[type="radio"]:checked + label { background: var(--primary); color: white; }
Â  Â  Â  Â  .role-selector input[type="radio"] { display: none; }
Â  Â  Â  Â  .ref-table { width: 100%; border-collapse: collapse; font-size: 0.75rem; text-align: center; background: rgba(0,0,0,0.02); border-radius: 8px; overflow: hidden; height: 100%; border: 1px solid var(--border); }
Â  Â  Â  Â  .ref-table th { background: var(--primary); color: white; padding: 6px; }
Â  Â  Â  Â  .ref-table td { border: 1px solid var(--border); padding: 6px; color: var(--text-main); }
Â  Â  Â  Â  .ref-table .highlight { background: rgba(245, 158, 11, 0.2); font-weight: bold; color: #b45309; }
Â  Â  Â  Â  .terminal-block { background: rgba(0,0,0,0.03); border-radius: 8px; margin-bottom: 6px; border: 1px solid var(--border); overflow: hidden; }
Â  Â  Â  Â  .terminal-header { padding: 12px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; font-weight: 700; font-size: 0.9rem; }
Â  Â  Â  Â  .terminal-body { display: none; padding: 10px; border-top: 1px dashed var(--border); }
Â  Â  Â  Â  .terminal-actions { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; }
Â  Â  Â  Â  .terminal-btn { background: var(--card-bg); border: 1px solid var(--border); color: var(--text-main); padding: 10px 0; border-radius: 6px; text-decoration: none; font-size: 0.8rem; text-align: center; font-weight: 700; display:flex; align-items:center; justify-content:center; }
Â  Â  Â  Â  .btn-premium { grid-column: span 3; background: linear-gradient(135deg, #fffbeb, #fef3c7); border: 1px solid #fcd34d; color: #92400e; margin-top: 4px; }
Â  Â  Â  Â  .control-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
Â  Â  Â  Â  .control-btn { background: var(--card-bg); border: 1px solid var(--border); color: var(--text-main); padding: 14px; border-radius: 10px; text-decoration: none; font-size: 0.9rem; font-weight: 700; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 4px; }
Â  Â  Â  Â  .post-list { list-style: none; padding: 0; margin: 0; }
Â  Â  Â  Â  .post-item { border-bottom: 1px solid var(--border); padding: 10px 0; }
Â  Â  Â  Â  .post-header-row { padding: 4px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
Â  Â  Â  Â  .post-title-text { font-weight: 700; font-size: 0.95rem; color: var(--text-main); display: flex; align-items: center; gap: 5px; flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; margin-right: 8px; }
Â  Â  Â  Â  .post-meta-info { font-size: 0.75rem; color: var(--text-sub); white-space: nowrap; }
Â  Â  Â  Â  .post-body-content { display: none; padding: 12px; background: rgba(0,0,0,0.02); border-top: 1px dashed var(--border); font-size: 0.9rem; line-height: 1.6; white-space: pre-wrap; color: var(--text-main); word-break: break-all; }
Â  Â  Â  Â  .comment-section { margin-top: 10px; border-top: 1px dashed var(--border); padding-top: 8px; background: rgba(0,0,0,0.015); border-radius: 6px; padding: 8px; }
Â  Â  Â  Â  .comment-item { display: flex; justify-content: space-between; align-items: flex-start; font-size: 0.8rem; padding: 5px 0; border-bottom: 1px solid rgba(0,0,0,0.05); }
Â  Â  Â  Â  .comment-form { display: flex; gap: 4px; align-items: center; flex-wrap: wrap; margin-top: 8px; }
Â  Â  Â  Â  .comment-input-sm { width: 60px; padding: 6px; border: 1px solid var(--border); border-radius: 4px; font-size: 0.8rem; }
Â  Â  Â  Â  .comment-input-lg { flex: 1; padding: 6px; border: 1px solid var(--border); border-radius: 4px; font-size: 0.8rem; min-width: 100px; }
Â  Â  Â  Â  .comment-submit { padding: 6px 10px; background: var(--text-sub); color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.75rem; font-weight: bold; }
Â  Â  Â  Â  .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 3px; text-align: center; }
Â  Â  Â  Â  .cal-day { padding: 8px 0; border-radius: 6px; background: rgba(255,255,255,0.5); border: 1px solid var(--border); font-weight: 700; font-size: 0.85rem; cursor: pointer; min-height: 40px; display: flex; flex-direction: column; justify-content: center; align-items: center; }
Â  Â  Â  Â  .cal-day.has-data { border: 2px solid var(--success); background: rgba(16, 185, 129, 0.1); }
Â  Â  Â  Â  .cal-dot { width: 5px; height: 5px; background-color: var(--success); border-radius: 50%; margin-top: 3px; display: none; }
Â  Â  Â  Â  .cal-day.has-data .cal-dot { display: block; }
Â  Â  Â  Â  .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; height: 60px; background: rgba(255,255,255,0.98); border-top: 1px solid var(--border); display: flex; justify-content: space-around; align-items: center; z-index: 1000; padding-bottom: env(safe-area-inset-bottom); box-shadow: 0 -2px 10px rgba(0,0,0,0.05); }
Â  Â  Â  Â  .nav-item { flex: 1; text-align: center; color: var(--text-sub); font-size: 0.7rem; cursor: pointer; display: flex; flex-direction: column; align-items: center; gap: 2px; }
Â  Â  Â  Â  .nav-item.active { color: var(--primary); font-weight: 800; transform: scale(1.05); }
Â  Â  Â  Â  .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 3000; justify-content: center; align-items: center; padding: 15px; }
Â  Â  Â  Â  .modal-content { background: var(--card-bg); padding: 15px; border-radius: 16px; max-width: 100%; max-height: 85%; overflow-y: auto; width: 100%; }
Â  Â  Â  Â  .modal-img { width: 100%; height: auto; border-radius: 8px; }
Â  Â  Â  Â  .hidden { display: none !important; }
Â  Â  Â  Â  #toast { position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.85); color: white; padding: 10px 20px; border-radius: 30px; font-size: 0.9rem; z-index: 5000; opacity: 0; transition: 0.3s; pointer-events: none; }
Â  Â  Â  Â  #toast.show { opacity: 1; }
Â  Â  Â  Â  .ticker-manage-item { display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid var(--border); }
Â  Â  Â  Â  .page-num { padding: 6px 12px; border: 1px solid var(--border); cursor: pointer; border-radius: 6px; font-size: 0.85rem; margin: 0 2px; }
Â  Â  Â  Â  .page-num.active { background: var(--primary); color: white; }
Â  Â  Â  Â  .mini-btn { padding: 4px 8px; font-size: 0.75rem; border-radius: 4px; border: none; cursor: pointer; color: white; margin-left: 4px; }
Â  Â  Â  Â  .btn-del { background: var(--danger); }
Â  Â  Â  Â  .btn-del-mini { background: var(--danger); }
Â  Â  Â  Â  .user-auth-bar { display: flex; justify-content: space-between; align-items: center; background: rgba(59, 130, 246, 0.1); padding: 10px; border-radius: 8px; margin-bottom: 10px; border: 1px solid var(--primary-light); }
Â  Â  Â  Â  .user-name { font-weight: 800; color: var(--primary); font-size: 0.9rem; }
Â  Â  Â  Â  .user-status { font-size: 0.75rem; color: var(--success); }
Â  Â  Â  Â  .logout-btn { background: var(--text-sub); color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 0.75rem; font-weight: bold; }
Â  Â  Â  Â  @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
Â  Â  </style>
</head>
<body>
Â  Â  <header>
Â  Â  Â  Â  <h1>BUSAN HAK PORT</h1>
Â  Â  Â  Â  <button class="theme-toggle tap-effect" onclick="toggleDarkMode()">ğŸŒ™</button>
Â  Â  </header>

Â  Â  <div id="safetyTicker" class="ticker-container">
Â  Â  Â  Â  <div class="ticker-wrap"><div id="tickerText" class="ticker-item">ğŸš¨ ì•ˆì „ ì œì¼! ì˜¤ëŠ˜ë„ ë¬´ì‚¬ê³ !</div></div>
Â  Â  Â  Â  <div class="ticker-setting-area">
Â  Â  Â  Â  Â  Â  <div class="setting-icon">â•</div>
Â  Â  Â  Â  Â  Â  <div class="hover-menu-box">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="menu-btn" onclick="writeUserTicker()">ğŸ–Šï¸ ì¼ë°˜ ë“±ë¡</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="menu-btn" onclick="setAdminTicker()">ğŸ“¢ ê´€ë¦¬ì ë“±ë¡</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="menu-btn btn-del-menu" onclick="openTickerManager()">âš™ï¸ ë“±ë¡ ì‚­ì œ</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="container">
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="dash-grid">
Â  Â  Â  Â  Â  Â  <div id="wage-card" class="dash-card expanded" style="border:1px solid var(--danger);">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="dash-header tap-effect" onclick="toggleDashItem('wage-card')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="dash-title" style="color:var(--danger);">ğŸ’° ì„ê¸ˆê³„ì‚°ê¸°</span><span class="toggle-icon">â–¼</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="dash-content" style="display:none;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="role-selector">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="radio" id="role-main" name="workRole" value="main" checked><label for="role-main">ğŸš¢ ë³¸ì„ </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="radio" id="role-skilled" name="workRole" value="skilled"><label for="role-skilled">ğŸ”§ ê¸°ëŠ¥ê³µ</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="radio" id="role-onshore" name="workRole" value="onshore"><label for="role-onshore">ğŸš› ìœ¡ìƒ</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calc-layout">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calc-left">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="wage-row"><label>ì‹œê¸‰(ê¸°ë³¸)</label><input type="number" id="wageHourly" class="input-field" value="10320" style="text-align:right; font-weight:bold; color:#ef4444; font-size:1.1rem;" readonly></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="wage-row"><label>â³ ì´ ê·¼ë¬´</label><input type="number" id="wageTotalHours" class="input-field" placeholder="H" style="text-align:right;"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="wage-row"><label>ğŸ•’ ì‹œì‘ì‹œê°</label><input type="number" id="wageStartTime" class="input-field" value="8" placeholder="0~23" style="text-align:right;"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calc-right">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <table class="ref-table">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <thead><tr><th>ì›”(Month)</th><th>ì£¼ê°„</th><th>ì•¼ê°„</th></tr></thead>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tbody>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr id="row-jan"><td>1~3ì›”</td><td>08~18</td><td>18~08</td></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr id="row-apr"><td>4~9ì›”</td><td>06~19</td><td>19~06</td></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr id="row-oct"><td>10~12ì›”</td><td>07~17</td><td>17~07</td></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tbody>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </table>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size:0.75rem; color:var(--text-sub); margin:0; text-align:center;">â€» í˜„ì¬ ì›”ì— ë§ì¶° ì£¼/ì•¼ê°„ ì‹œê°„ì´ ìë™ ì ìš©ë©ë‹ˆë‹¤.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size:0.8rem; color:#ef4444; font-weight:bold; margin:4px 0 12px 0; text-align:center;">ë”ë¸” ì˜¤ë”ë¡œ ê²¹ì¹˜ëŠ” ì‹œê°„ì€ ë³„ë„ë¡œ ì‹œê°„ì„ ê³„ì‚° í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤!!</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="border-top:1px dashed var(--border); margin:10px 0; padding-top:12px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size:0.85rem; color:var(--primary); font-weight:800; margin-bottom:8px;">âœ… ì¶”ê°€ ìˆ˜ë‹¹ ì‹œê°„ ì…ë ¥</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="allowance-grid">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="wage-row"><label>ê³µíœ´ì¼</label><input type="number" id="wageHoliday" class="input-field" placeholder="H"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="wage-row"><label>ì£¼ë§</label><input type="number" id="wageWeekend" class="input-field" placeholder="H"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="wage-row"><label>ìš°ì²œ</label><input type="number" id="wageRain" class="input-field" placeholder="H"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="wage-row"><label>í˜¹ì„œê¸°</label><input type="number" id="wageHotTime" class="input-field" placeholder="H"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="wageTaxType" class="input-field" style="margin-top:5px; text-align:center;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="0">ê³µì œ ì—†ìŒ (0%)</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="0.033">í”„ë¦¬ëœì„œ (3.3%)</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="0.094">4ëŒ€ë³´í—˜ (9.4%)</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="display:flex; gap:10px; margin-top:10px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="action-btn bg-calc" style="flex:2" onclick="calculateWage()">ë‚´ì—­ì„œ ìƒì„± ë° ê³„ì‚°</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="action-btn bg-cancel" style="flex:1" onclick="resetWageForm()">ì´ˆê¸°í™”</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="wageResultBox" class="hidden wage-result-box">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4 style="margin:0; text-align:center; color:var(--primary); font-size:1.1rem;">ğŸ“‹ ì„ê¸ˆ ì‚°ì • ë‚´ì—­ì„œ</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <table class="spec-table"><tbody id="wageSpecBody"></tbody></table>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="wageTotal" class="wage-total">0ì›</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size:0.75rem; color:var(--text-sub); text-align:center; margin-top:5px;">â€» 2026ë…„ 3í•­ì—…ì§€ë¶€ ì„ê¸ˆí‘œ ê¸°ì¤€</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="log-card" class="dash-card" style="border:1px solid var(--primary);">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="dash-header tap-effect" onclick="toggleDashItem('log-card')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="dash-title" style="color:var(--primary);">ğŸ“… ìŠ¤ë§ˆíŠ¸ ê·¼ë¬´ì¼ì§€(ì§ì§€)</span><span class="toggle-icon">â–¼</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="workLogArea" class="dash-content">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="userProfileBar" class="user-auth-bar" style="display:none;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="user-info">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span id="currentUserDisplay" class="user-name"></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="user-status">ğŸ”’ ë‚´ ì €ì¥ì†Œ</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="logout-btn" onclick="logoutWorker()">ë¡œê·¸ì•„ì›ƒ</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="mini-btn" style="padding:6px 12px; font-size:1rem;" onclick="changeMonth(-1)">â—€</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span id="calMonthYear" style="font-weight:bold; font-size:1.1rem;"></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="mini-btn" style="padding:6px 12px; font-size:1rem;" onclick="changeMonth(1)">â–¶</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="calendarGrid" class="calendar-grid"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="dailyLogForm" class="hidden" style="margin-top:20px; padding:15px; background:rgba(0,0,0,0.03); border-radius:12px; border:1px solid var(--border);">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4 id="selectedDateText" style="margin:0 0 10px 0; color:var(--primary); text-align:center; font-size:1.1rem;"></h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="wage-row"><label>ì£¼ê°„</label><input type="number" id="logDayHours" class="input-field" placeholder="ì‹œê°„(H)" step="0.5"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="wage-row"><label>ì•¼ê°„</label><input type="number" id="logNightHours" class="input-field" placeholder="ì‹œê°„(H)" step="0.5"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea id="logMemo" class="input-field textarea-field" placeholder="ì‘ì—… ë‚´ìš©..."></textarea>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label style="font-size:0.85rem; font-weight:bold; display:block; margin-top:10px; margin-bottom:4px;">ğŸ“· í˜„ì¥ ì‚¬ì§„</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="file" id="logImageInput" class="input-field" accept="image/*" onchange="previewLogImage(this)">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img id="logImagePreview" style="max-width:100%; border-radius:8px; margin-top:8px; display:none;" onclick="document.getElementById('imageModal').style.display='flex'; document.getElementById('modalImage').src=this.src;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="display:flex; gap:10px; margin-top:15px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="saveLogBtn" class="action-btn bg-submit" onclick="trySaveWorkLog()">ì €ì¥í•˜ê¸°</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="action-btn bg-cancel" style="background:var(--danger);" onclick="deleteWorkLog()">ì‚­ì œ</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="monthlyTotalDisplay" style="text-align:center; margin-top:20px; font-weight:bold; color:var(--primary); font-size:1.2rem; border-top:1px dashed var(--border); padding-top:15px;">ì´ë²ˆë‹¬ ì´ì•¡: 0ì›</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card" style="border-left: 5px solid #3b82f6;">
Â  Â  Â  Â  Â  Â  <div class="section-header tap-effect" onclick="toggleSection('t3-content', this)"><span class="section-title">â›´ï¸ 3í•­ì—… (ì‹ í•­ ë‚¨ì¸¡) â–¼</span></div>
Â  Â  Â  Â  Â  Â  <div id="t3-content" class="collapsible-content collapsed">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="terminal-block"><div class="terminal-header tap-effect" onclick="toggleContent('term-hjnc')">í•œì§„ì‹ í•­ë§Œ (HJNC) â–¼</div><div id="term-hjnc" class="terminal-body"><div class="terminal-actions"><a href="https://www.hjnc.co.kr/esvc/vessel/berthScheduleT" target="_blank" class="terminal-btn">ìŠ¤ì¼€ì¤„</a><a href="https://www.hjnc.co.kr/esvc/vessel/berthScheduleG" target="_blank" class="terminal-btn">ì°¨íŠ¸</a><a href="https://www.hjnc.co.kr/esvc/vessel/vesselStatus" target="_blank" class="terminal-btn">í˜„í™©</a><a href="http://bayplan.hjnc.co.kr" target="_blank" class="terminal-btn btn-premium">ğŸ§© BAY PLAN (ì„œë¹„ìŠ¤)</a></div></div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="terminal-block"><div class="terminal-header tap-effect" onclick="toggleContent('term-bnct')">ë¶€ì‚°ì‹ í•­ì»¨í…Œì´ë„ˆ (BNCT) â–¼</div><div id="term-bnct" class="terminal-body"><div class="terminal-actions"><a href="https://info.bnctkorea.com/esvc/vessel/berthScheduleT" target="_blank" class="terminal-btn">ìŠ¤ì¼€ì¤„</a><a href="https://info.bnctkorea.com/esvc/vessel/berthScheduleG" target="_blank" class="terminal-btn">ì°¨íŠ¸</a><a href="https://info.bnctkorea.com/esvc/vessel/vesselStatus" target="_blank" class="terminal-btn">í˜„í™©</a></div></div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="terminal-block"><div class="terminal-header tap-effect" onclick="toggleContent('term-dgt')">ë™ì›ë¡œì—‘ìŠ¤ (DGT) â–¼</div><div id="term-dgt" class="terminal-body"><div class="terminal-actions"><a href="https://www.dgtbusan.com/DGT/esvc/vessel/berthScheduleT" target="_blank" class="terminal-btn">ìŠ¤ì¼€ì¤„</a><a href="https://www.dgtbusan.com/DGT/esvc/vessel/berthScheduleG" target="_blank" class="terminal-btn">ì°¨íŠ¸</a><a href="https://www.dgtbusan.com/DGT/esvc/vessel/vesselStatus" target="_blank" class="terminal-btn">í˜„í™©</a></div></div></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card" style="border-left: 5px solid #10b981;">
Â  Â  Â  Â  Â  Â  <div class="section-header tap-effect" onclick="toggleSection('t2-content', this)"><span class="section-title">ğŸ—ï¸ 2í•­ì—… (ì‹ í•­ ë¶ì¸¡) â–¼</span></div>
Â  Â  Â  Â  Â  Â  <div id="t2-content" class="collapsible-content collapsed">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="terminal-block"><div class="terminal-header tap-effect" onclick="toggleContent('term-pnc')">ë¶€ì‚°ì‹ í•­ë§Œ (PNC) â–¼</div><div id="term-pnc" class="terminal-body"><div class="terminal-actions"><a href="https://svc.pncport.com/info/CMS/Ship/Info.pnc?mCode=MN014" target="_blank" class="terminal-btn">ìŠ¤ì¼€ì¤„</a><a href="https://svc.pncport.com/info/CMS/Ship/ShipBerthC.pnc?mCode=MN019" target="_blank" class="terminal-btn">ì°¨íŠ¸</a><a href="https://svc.pncport.com/info/CMS/Ship/ShipVslStatus.pnc?mCode=MN020" target="_blank" class="terminal-btn">í˜„í™©</a></div><button class="action-btn" style="background:#f39c12; margin-top:8px; padding:10px;" onclick="openBusSchedule()">ğŸšŒ ì…”í‹€ë²„ìŠ¤ ì‹œê°„í‘œ</button></div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="terminal-block"><div class="terminal-header tap-effect" onclick="toggleContent('term-hpnt')">HMM (HPNT) â–¼</div><div id="term-hpnt" class="terminal-body"><div class="terminal-actions"><a href="https://www.hpnt.co.kr/main/vessel/schedule/list" target="_blank" class="terminal-btn">ìŠ¤ì¼€ì¤„</a><a href="https://www.hpnt.co.kr/main/vessel/berth/list" target="_blank" class="terminal-btn">ì„ ì„</a></div></div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="terminal-block"><div class="terminal-header tap-effect" onclick="toggleContent('term-pnit')">ì‹ í•­êµ­ì œ (PNIT) â–¼</div><div id="term-pnit" class="terminal-body"><div class="terminal-actions"><a href="http://www.pnitl.com" target="_blank" class="terminal-btn">í™ˆí˜ì´ì§€</a></div></div></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card" style="border-left: 5px solid #f97316;">
Â  Â  Â  Â  Â  Â  <div class="section-header tap-effect" onclick="toggleSection('t1-content', this)"><span class="section-title">âš“ 1í•­ì—… (ë¶í•­) â–¼</span></div>
Â  Â  Â  Â  Â  Â  <div id="t1-content" class="collapsible-content collapsed">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="terminal-block"><div class="terminal-header tap-effect" onclick="toggleContent('term-bptc')">ë¶í•­ í†µí•© (BPTC) â–¼</div><div id="term-bptc" class="terminal-body"><div class="terminal-actions"><a href="http://info.bptc.co.kr:9084" target="_blank" class="terminal-btn" style="grid-column:span 3;">ğŸ—ï¸ ê°ë§Œ/ì‹ ì„ ëŒ€ í†µí•© ì„ ì„</a></div></div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="terminal-block"><div class="terminal-header tap-effect" onclick="toggleContent('term-hbct')">í—ˆì¹˜ìŠ¨ (HBCT/ìì„±ëŒ€) â–¼</div><div id="term-hbct" class="terminal-body"><div class="terminal-actions"><a href="https://www.hutchisonportsbusan.com" target="_blank" class="terminal-btn">í™ˆí˜ì´ì§€</a></div></div></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card"><div class="section-header tap-effect" onclick="toggleSection('control-content', this)"><span class="section-title">ğŸ“¡ ê´€ì œ ë° ì‹¤ì‹œê°„ ê¸°ìƒ â–¼</span></div><div id="control-content" class="collapsible-content collapsed"><div class="control-grid"><a href="http://www.busanpilot.co.kr/popup/monitoring" class="control-btn" target="_blank">ğŸ›¥ï¸ ë„ì„  ëª¨ë‹ˆí„°</a><a href="https://weather.naver.com/today/08440585" class="control-btn" target="_blank" style="grid-column: span 2; color:var(--danger);">â˜€ï¸ ë¶€ì‚°í•­ ì‹¤ì‹œê°„ ë‚ ì”¨</a></div></div></div>
Â  Â  Â  Â  <div class="card" style="border-left: 5px solid var(--primary);"><div class="section-header tap-effect" onclick="toggleSection('ads-info-1', this)"><span class="section-title">ğŸ“˜ ë¶€ì‚°í•­ ì´ìš© ë° ì•ˆì „ ê·¼ë¬´ ê°€ì´ë“œ â–¼</span></div><div id="ads-info-1" class="collapsible-content collapsed"><div class="guide-text"><h4>ğŸ“Œ 2026ë…„ ë¶€ì‚°í•­ í„°ë¯¸ë„ ì¶œì… ë° ë³´ì•ˆ ê·œì •</h4><p>ë¶€ì‚°í•­ ë‚´ ëª¨ë“  í„°ë¯¸ë„(PNC, HJNC, BCT ë“±)ì€ êµ­ê°€ ì¤‘ìš” ë³´ì•ˆ ì‹œì„¤ë¡œ ì§€ì •ë˜ì–´ ì¶œì… ì‹œ ì‚¬ì „ ë“±ë¡ì´ í•„ìˆ˜ì…ë‹ˆë‹¤.</p><h4>ğŸŒ§ï¸ ê¸°ìƒ ì•…í™” ì‹œ í•˜ì—­ ì‘ì—… ì¤‘ë‹¨ ê¸°ì¤€</h4><p>í•­ë§Œ ì—…ë¬´ëŠ” í’ì†ê³¼ ê°•ìˆ˜ëŸ‰ì— ë¯¼ê°í•©ë‹ˆë‹¤. í†µìƒ ìˆœê°„í’ì† 15m/s ì´ˆê³¼ ì‹œ ì•ˆë²½ í¬ë ˆì¸(QC) ì‘ì—…ì´ ì¼ì‹œ ì¤‘ë‹¨ë©ë‹ˆë‹¤.</p></div></div></div>

Â  Â  Â  Â  <div class="dash-grid">
Â  Â  Â  Â  Â  Â  <div id="notice-card" class="dash-card"><div class="dash-header tap-effect" onclick="toggleDashItem('notice-card')">ğŸ“¢ ê³µì§€ì‚¬í•­ â–¼</div><div class="dash-content"><div style="margin-bottom:10px; background:rgba(239,68,68,0.05); padding:10px; border-radius:8px;"><input type="text" id="noticeTitle" class="input-field" placeholder="ì œëª©"><textarea id="noticeContent" class="input-field textarea-field" placeholder="ë‚´ìš©"></textarea><button class="action-btn bg-submit" onclick="addNotice()">ê³µì§€ ë“±ë¡ (Admin)</button></div><ul id="noticeList" class="post-list" style="margin-top:10px;"></ul></div></div>
Â  Â  Â  Â  Â  Â  <div id="board-card" class="dash-card"><div class="dash-header tap-effect" onclick="toggleDashItem('board-card')">ğŸ’¬ ìµëª…ê²Œì‹œíŒ â–¼</div><div class="dash-content"><button class="action-btn" style="background:var(--text-sub); margin-bottom:10px;" onclick="toggleHidden('boardForm')">âœï¸ ê¸€ì“°ê¸°</button><div id="boardForm" class="hidden"><input type="text" id="inputTitle" class="input-field" placeholder="ì œëª©"><input type="password" id="inputPw" class="input-field" placeholder="ë¹„ë²ˆ"><textarea id="inputContent" class="input-field textarea-field" placeholder="ë‚´ìš©"></textarea><button class="action-btn bg-submit" onclick="addPost()">ë“±ë¡</button></div><ul id="boardList" class="post-list"></ul><div id="pagination" style="display:flex; justify-content:center; gap:5px; margin-top:10px;"></div></div></div>
Â  Â  Â  Â  Â  Â  <div id="ship-card" class="dash-card"><div class="dash-header tap-effect" onclick="toggleDashItem('ship-card')">ğŸš¢ ì„ ë°•ì •ë³´ â–¼</div><div class="dash-content"><div style="display:flex; gap:5px; margin-bottom:10px;"><input type="text" id="shipSearch" class="input-field" placeholder="ì„ ë°• ê²€ìƒ‰" onkeyup="filterShips()" style="margin-bottom:0;"><button class="action-btn" style="width:auto;" onclick="filterShips()">ğŸ”</button></div><a href="https://www.marinetraffic.com/" target="_blank" class="action-btn" style="background:#0284c7; text-align:center; display:block; text-decoration:none; margin-bottom:10px; padding:12px;">ğŸŒ ì‹¤ì‹œê°„ ì„ ë°• ìœ„ì¹˜ í™•ì¸</a><button class="action-btn" style="background:var(--accent); margin-bottom:10px;" onclick="toggleHidden('shipForm')">ğŸ“ ì„ ë°• ì •ë³´ ì‹ ê·œ ë“±ë¡</button><div id="shipForm" class="hidden"><input type="text" id="shipName" class="input-field" placeholder="ì„ ë°•ëª…"><textarea id="shipOnboard" class="input-field textarea-field" placeholder="ì‘ì—…ë‚´ìš©"></textarea><input type="file" id="shipFileInput" class="input-field"><button id="shipSubmitBtn" class="action-btn bg-submit" onclick="addShipInfo()">ë“±ë¡/ìˆ˜ì •</button></div><ul id="shipList" class="post-list"></ul></div></div>
Â  Â  Â  Â  Â  Â  <div id="file-card" class="dash-card"><div class="dash-header tap-effect" onclick="toggleDashItem('file-card')">ğŸ“‚ ìë£Œì‹¤ â–¼</div><div class="dash-content"><input type="text" id="fileTitle" class="input-field" placeholder="íŒŒì¼ ì œëª©"><input type="file" id="fileInput" class="input-field"><button class="action-btn bg-submit" onclick="uploadFile()">ì—…ë¡œë“œ</button><ul id="fileList" class="post-list" style="margin-top:10px;"></ul></div></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <footer><p>Â© 2026 BUSAN HAK PORT INFO. All rights reserved.</p><div style="margin-top:10px;"><span class="footer-link" onclick="openPrivacy()">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</span></div></footer>
Â  Â  </div>

Â  Â  <nav class="bottom-nav"><div class="nav-item active tap-effect" onclick="scrollToTop()">ğŸ  í™ˆ</div><div class="nav-item tap-effect" onclick="toggleDashItem('board-card')">ğŸ’¬ í†¡í†¡</div><div class="nav-item tap-effect" onclick="toggleDashItem('ship-card')">ğŸš¢ ì„ ë°•</div><div class="nav-item tap-effect" onclick="toggleDashItem('file-card')">ğŸ“‚ ìë£Œ</div></nav>
Â  Â  <div id="toast">ì•Œë¦¼</div>
Â  Â  <div id="imageModal" class="modal-overlay" onclick="closeImageModal()"><div class="modal-content" onclick="event.stopPropagation()"><img id="modalImage" class="modal-img"><button class="action-btn bg-cancel" onclick="closeImageModal()">ë‹«ê¸°</button></div></div>
Â  Â  <div id="privacyModal" class="modal-overlay" onclick="document.getElementById('privacyModal').style.display='none'"><div class="modal-content"><h3>ğŸ›¡ï¸ ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</h3><p>ë³¸ ì‚¬ì´íŠ¸ëŠ” êµ¬ê¸€ ì• ë“œì„¼ìŠ¤ ê´‘ê³ ë¥¼ ê²Œì¬í•˜ë©° ì¿ í‚¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ê·¼ë¬´ ê¸°ë¡ ë° ê²Œì‹œë¬¼ ë°ì´í„°ëŠ” Firebase ì„œë²„ì— ì•ˆì „í•˜ê²Œ ë³´ê´€ë©ë‹ˆë‹¤.</p><button class="action-btn" onclick="document.getElementById('privacyModal').style.display='none'">ë‹«ê¸°</button></div></div>
Â  Â  <div id="tickerManageModal" class="modal-overlay" onclick="document.getElementById('tickerManageModal').style.display='none'"><div class="modal-content" onclick="event.stopPropagation()"><h3 style="margin-top:0;">âš™ï¸ ì•Œë¦¼ê¸€ ì‚­ì œ</h3><div id="tickerListContainer"></div><button class="action-btn bg-cancel" onclick="document.getElementById('tickerManageModal').style.display='none'" style="margin-top:10px;">ë‹«ê¸°</button></div></div>
Â  Â  <div id="loginModal" class="modal-overlay" style="display:none;" onclick="closeLoginModal()">
Â  Â  Â  Â  <div class="modal-content" onclick="event.stopPropagation()">
Â  Â  Â  Â  Â  Â  <h3>ğŸ” ê·¼ë¬´ì¼ì§€ ë¡œê·¸ì¸/ê°€ì…</h3>
Â  Â  Â  Â  Â  Â  <p>ë‹‰ë„¤ì„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</p>
Â  Â  Â  Â  Â  Â  <input type="text" id="loginNick" class="input-field" placeholder="ë‹‰ë„¤ì„ (ID)">
Â  Â  Â  Â  Â  Â  <input type="password" id="loginPw" class="input-field" placeholder="ë¹„ë°€ë²ˆí˜¸">
Â  Â  Â  Â  Â  Â  <button class="action-btn" onclick="confirmLoginAndSave()">í™•ì¸ ë° ì €ì¥</button>
Â  Â  Â  Â  Â  Â  <button class="action-btn bg-cancel" onclick="closeLoginModal()">ì·¨ì†Œ</button>
Â  Â  Â  Â  </div>
Â  Â  </div>
Â  Â  <script>
/* 1ï¸âƒ£ Firebase ì„¤ì • */
const firebaseConfig = {Â 
Â  Â  apiKey: "AIzaSyBDXy5HcYW-IZQJ9ZDEivr_yi99AxhYme8",Â 
Â  Â  authDomain: "my-app-d8527.firebaseapp.com",Â 
Â  Â  projectId: "my-app-d8527",Â 
Â  Â  storageBucket: "my-app-d8527.appspot.com",Â 
Â  Â  messagingSenderId: "667323279185",Â 
Â  Â  appId: "1:667323279185:web:cff6184aaa82e08d345570"Â 
};
// Firebase ì´ˆê¸°í™” (ì¤‘ë³µ ë°©ì§€)
if (!firebase.apps.length) {
Â  Â  firebase.initializeApp(firebaseConfig);
}
const db = firebase.firestore();
const storage = firebase.storage();Â 

// ì˜¤í”„ë¼ì¸ ì˜ì†ì„± í™œì„±í™”
db.enablePersistence({ synchronizeTabs: true }).catch(err => {
Â  Â  console.warn("Persistence Error:", err.code);
});

/* 2ï¸âƒ£ ì „ì—­ ë³€ìˆ˜ */
let allPostsData=[], allShipsData=[], filteredShips=[], adminWorkLogs={};
let currentDate = new Date();
let currentWorkerId = localStorage.getItem('myWorkerId');Â 
let commentUnsubscribes = {};
const postsPerPage = 5;

// [ì¤‘ìš”] í‹°ì»¤ ë°ì´í„° ë¡œì»¬ ì €ì¥ìš©
let globalTickerData = { adminMessage: "", userMessages: [] };

/* 3ï¸âƒ£ í•¨ìˆ˜ ì„ ì–¸ */

// --- [A] ê³µí†µ ìœ í‹¸ë¦¬í‹° ---
async function safeGet(ref) {
Â  Â  if (!ref) return null;
Â  Â  try {
Â  Â  Â  Â  return await ref.get();
Â  Â  } catch (e) {
Â  Â  Â  Â  console.warn("ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨:", e);
Â  Â  Â  Â  return null;
Â  Â  }
}

async function verifyAdmin(){Â 
Â  Â  return prompt("Admin PW:") === "0346";Â 
}

function toggleDashItem(id){Â 
Â  Â  const c = document.getElementById(id);
Â  Â  if(!c) return;Â 
Â  Â  const e = c.classList.contains('expanded');Â 
Â  Â  document.querySelectorAll('.dash-card').forEach(x=>{
Â  Â  Â  Â  x.classList.remove('expanded');Â 
Â  Â  Â  Â  const content = x.querySelector('.dash-content');
Â  Â  Â  Â  if(content) content.style.display='none';
Â  Â  });Â 
Â  Â  if(!e){
Â  Â  Â  Â  c.classList.add('expanded');Â 
Â  Â  Â  Â  const content = c.querySelector('.dash-content');
Â  Â  Â  Â  if(content) content.style.display='block';Â 
Â  Â  Â  Â  if(id === 'log-card') renderCalendar(currentDate.getFullYear(), currentDate.getMonth());Â 
Â  Â  }
}

function toggleSection(id){ document.getElementById(id).classList.toggle('collapsed'); }
function toggleContent(id){ const e=document.getElementById(id); e.style.display=(e.style.display==='block'?'none':'block'); }
function toggleHidden(id){ document.getElementById(id).classList.toggle('hidden'); }
function toggleDarkMode(){ document.body.classList.toggle('dark-mode'); }
function scrollToTop(){ window.scrollTo({top:0, behavior:'smooth'}); }
function showToast(m){const t=document.getElementById("toast"); t.innerText=m; t.classList.add("show"); setTimeout(()=>t.classList.remove("show"),3000);}

// --- [B] íë¥´ëŠ” ë°°ë„ˆ ê´€ë¦¬ (ìˆ˜ì •ë¨: ì‚­ì œ ì¦‰ì‹œ ë°˜ì˜) ---

function loadBanner(){Â 
Â  Â  db.collection('settings').doc('banner').onSnapshot((doc) => {
Â  Â  Â  Â  if(!doc.exists) {
Â  Â  Â  Â  Â  Â  Â document.getElementById('tickerText').innerText = "ğŸš¨ ì•ˆì „ ì œì¼! ì˜¤ëŠ˜ë„ ë¬´ì‚¬ê³ !";
Â  Â  Â  Â  Â  Â  Â return;
Â  Â  Â  Â  }
Â  Â  Â  Â  globalTickerData = doc.data();Â 
Â  Â  Â  Â  let msg = "";
Â  Â  Â  Â  if(globalTickerData.adminMessage) msg += `ğŸ“¢ ${globalTickerData.adminMessage}Â  Â ///Â  Â `;
Â  Â  Â  Â  if(globalTickerData.userMessages && globalTickerData.userMessages.length > 0) {
Â  Â  Â  Â  Â  Â  msg += globalTickerData.userMessages.map((m,i) => `${i+1}. ${m}`).join("Â  Â ///Â  Â ");
Â  Â  Â  Â  }
Â  Â  Â  Â  document.getElementById('tickerText').innerText = msg || "ğŸš¨ ì•ˆì „ ì œì¼! ì˜¤ëŠ˜ë„ ë¬´ì‚¬ê³ !";
Â  Â  });
}

function writeUserTicker(){Â 
Â  Â  const m = prompt("í˜„ì¥ ì•ˆì „ ë¬¸êµ¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”:");
Â  Â  if(!m) return;
Â  Â  let msgs = globalTickerData.userMessages || [];
Â  Â  msgs.unshift(m);Â 
Â  Â  if(msgs.length > 3) msgs = msgs.slice(0, 3);
Â  Â  db.collection('settings').doc('banner').set({ userMessages: msgs }, { merge: true })
Â  Â  Â  Â  .then(() => showToast("ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤."))
Â  Â  Â  Â  .catch((e) => alert("ë“±ë¡ ì‹¤íŒ¨: " + e.message));
}

async function setAdminTicker(){Â 
Â  Â  if(await verifyAdmin()){Â 
Â  Â  Â  Â  const m = prompt("ê´€ë¦¬ì ê³µì§€ ë“±ë¡:");
Â  Â  Â  Â  if(m) db.collection('settings').doc('banner').set({adminMessage:m}, {merge:true});Â 
Â  Â  }Â 
}

async function openTickerManager(){Â 
Â  Â  if(await verifyAdmin()){Â 
Â  Â  Â  Â  document.getElementById('tickerManageModal').style.display='flex';Â 
Â  Â  Â  Â  renderTickerList();
Â  Â  }Â 
}

function renderTickerList() {
Â  Â  const listContainer = document.getElementById('tickerListContainer');
Â  Â  listContainer.innerHTML = '<div style="padding:10px; text-align:center;">ë¡œë”© ì¤‘...</div>';
Â  Â Â 
Â  Â  // ë¡œì»¬ ë°ì´í„°ë¥¼ ì¦‰ì‹œ ë¶ˆëŸ¬ì˜´ (ì§€ì›Œì§€ëŠ” ì¦‰ì‹œ ê°±ì‹ ë¨)
Â  Â  const data = globalTickerData;Â 
Â  Â  listContainer.innerHTML = "";Â 
Â  Â  let hasData = false;

Â  Â  if (data.adminMessage) {
Â  Â  Â  Â  hasData = true;
Â  Â  Â  Â  listContainer.innerHTML += `
Â  Â  Â  Â  Â  Â  <div class="ticker-manage-item" style="display:flex; justify-content:space-between; align-items:center; padding:8px; border-bottom:1px solid #eee;">
Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-weight:bold; color:red; flex:1;">ğŸ“¢ [ê´€ë¦¬ì] ${data.adminMessage}</span>
Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="deleteTickerMsg('admin', 0)" class="mini-btn btn-del-mini">ì‚­ì œ</button>
Â  Â  Â  Â  Â  Â  </div>`;
Â  Â  }

Â  Â  if (data.userMessages && data.userMessages.length > 0) {
Â  Â  Â  Â  hasData = true;
Â  Â  Â  Â  data.userMessages.forEach((m, i) => {
Â  Â  Â  Â  Â  Â  listContainer.innerHTML += `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="ticker-manage-item" style="display:flex; justify-content:space-between; align-items:center; padding:8px; border-bottom:1px solid #eee;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="flex:1;">${i + 1}. ${m}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="deleteTickerMsg('user', ${i})" class="mini-btn btn-del-mini">ì‚­ì œ</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>`;
Â  Â  Â  Â  });
Â  Â  }

Â  Â  if (!hasData) {
Â  Â  Â  Â  listContainer.innerHTML = '<div style="padding:10px; text-align:center; color:#888;">ë“±ë¡ëœ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
Â  Â  }
}

async function deleteTickerMsg(type, index){Â 
Â  Â  if(!confirm("ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;

Â  Â  if(type === 'admin') {
Â  Â  Â  Â  delete globalTickerData.adminMessage;
Â  Â  Â  Â  await db.collection('settings').doc('banner').update({ adminMessage: firebase.firestore.FieldValue.delete() });
Â  Â  } else {
Â  Â  Â  Â  if(globalTickerData.userMessages) {
Â  Â  Â  Â  Â  Â  globalTickerData.userMessages.splice(index, 1);
Â  Â  Â  Â  Â  Â  await db.collection('settings').doc('banner').update({ userMessages: globalTickerData.userMessages });
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â  // [ì¤‘ìš”] ì‚­ì œ í›„ íŒì—… ë‚´ë¶€ ëª©ë¡ì„ ì¦‰ì‹œ ë‹¤ì‹œ ê·¸ë¦½ë‹ˆë‹¤.
Â  Â  renderTickerList();
Â  Â  showToast("ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
}

// --- [C] ìŠ¤ë§ˆíŠ¸ ê·¼ë¬´ì¼ì§€ ---
function renderCalendar(y, m){
Â  Â  const g = document.getElementById('calendarGrid');Â 
Â  Â  g.innerHTML = "";
Â  Â  document.getElementById('calMonthYear').innerText = `${y}ë…„ ${m+1}ì›”`;
Â  Â  const fD = new Date(y, m, 1).getDay(), lD = new Date(y, m+1, 0).getDate();
Â  Â  for(let i=0; i<fD; i++) g.innerHTML += `<div></div>`;
Â  Â  for(let d=1; d<=lD; d++){
Â  Â  Â  Â  const dStr = `${y}-${String(m+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
Â  Â  Â  Â  g.innerHTML += `<div id="cal-day-${d}" class="cal-day tap-effect" onclick="clickDate('${dStr}')">${d}<div class="cal-dot"></div></div>`;
Â  Â  }
Â  Â  if(currentWorkerId) {
Â  Â  Â  Â  const sDate = `${y}-${String(m+1).padStart(2,'0')}-01`, eDate = `${y}-${String(m+1).padStart(2,'0')}-${lD}`;
Â  Â  Â  Â  db.collection('work_logs').where('date', '>=', sDate).where('date', '<=', eDate).get().then(s => {
Â  Â  Â  Â  Â  Â  adminWorkLogs = {};
Â  Â  Â  Â  Â  Â  let total = 0;
Â  Â  Â  Â  Â  Â  s.forEach(doc => {
Â  Â  Â  Â  Â  Â  Â  Â  const data = doc.data();
Â  Â  Â  Â  Â  Â  Â  Â  if(data.workerId === currentWorkerId) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  adminWorkLogs[data.date] = data;Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const day = parseInt(data.date.split('-')[2]);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const el = document.getElementById(`cal-day-${day}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(el) el.classList.add('has-data');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  total += (data.totalPay || 0);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  document.getElementById('monthlyTotalDisplay').innerText = `ì´ë²ˆë‹¬ ì´ì•¡: ${total.toLocaleString()}ì›`;
Â  Â  Â  Â  });
Â  Â  } else {
Â  Â  Â  Â  document.getElementById('monthlyTotalDisplay').innerText = `ì´ë²ˆë‹¬ ì´ì•¡: 0ì›`;
Â  Â  }
}

function clickDate(dStr){
Â  Â  document.getElementById('selectedDateText').innerText = dStr;
Â  Â  document.getElementById('dailyLogForm').classList.remove('hidden');
Â  Â  document.getElementById('dailyLogForm').setAttribute('data-date', dStr);
Â  Â  const d = adminWorkLogs[dStr];
Â  Â  document.getElementById('logDayHours').value = d ? d.dayHours : '';
Â  Â  document.getElementById('logNightHours').value = d ? d.nightHours : '';
Â  Â  document.getElementById('logMemo').value = d ? d.memo : '';
Â  Â  const img = document.getElementById('logImagePreview');
Â  Â  if(d && d.imageUrl){ img.src = d.imageUrl; img.style.display = 'block'; }Â 
Â  Â  else { img.style.display = 'none'; img.src = ""; }
Â  Â  document.getElementById('logImageInput').value = '';Â 
}

function trySaveWorkLog(){
Â  Â  if(currentWorkerId) saveWorkLog();
Â  Â  else document.getElementById('loginModal').style.display = 'flex';
}

async function confirmLoginAndSave(){
Â  Â  const nick = document.getElementById('loginNick').value.trim();
Â  Â  const pw = document.getElementById('loginPw').value.trim();
Â  Â  if(!nick || !pw) { alert("ì…ë ¥ í•„ìš”"); return; }
Â  Â  const userRef = db.collection('user_profiles').doc(nick);
Â  Â  const doc = await safeGet(userRef);
Â  Â  if (doc && doc.exists) {
Â  Â  Â  Â  if (doc.data().password === pw) { loginSuccess(nick); closeLoginModal(); saveWorkLog(); }Â 
Â  Â  Â  Â  else { alert("ë¹„ë²ˆ í‹€ë¦¼"); }
Â  Â  } else if (doc === null) {
Â  Â  Â  Â  if(confirm("ì„œë²„ ì—°ê²°ì´ ë¶ˆì•ˆì •í•©ë‹ˆë‹¤. ì˜¤í”„ë¼ì¸ ëª¨ë“œë¡œ ë¡œê·¸ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) { loginSuccess(nick); closeLoginModal(); saveWorkLog(); }
Â  Â  } else {Â 
Â  Â  Â  Â  await userRef.set({ password: pw }); loginSuccess(nick); closeLoginModal(); saveWorkLog(); alert("ê°€ì… ì™„ë£Œ!");
Â  Â  }
}

function saveWorkLog(){
Â  Â  const btn = document.getElementById('saveLogBtn');
Â  Â  btn.innerText = "ì €ì¥ ì¤‘...";
Â  Â  const dStr = document.getElementById('dailyLogForm').getAttribute('data-date');
Â  Â  const dh = parseFloat(document.getElementById('logDayHours').value)||0;
Â  Â  const nh = parseFloat(document.getElementById('logNightHours').value)||0;
Â  Â  const memo = document.getElementById('logMemo').value;
Â  Â  const file = document.getElementById('logImageInput').files[0];
Â  Â  const pay = (dh*10320) + (nh*15480);
Â  Â  const docId = `${currentWorkerId}_${dStr}`;
Â  Â  const save = (url) => {
Â  Â  Â  Â  db.collection('work_logs').doc(docId).set({
Â  Â  Â  Â  Â  Â  date: dStr, workerId: currentWorkerId, dayHours: dh, nightHours: nh, memo: memo, totalPay: pay, imageUrl: url
Â  Â  Â  Â  }, {merge: true}).then(() => {
Â  Â  Â  Â  Â  Â  showToast("ì €ì¥ë¨"); btn.innerText = "ì €ì¥í•˜ê¸°";
Â  Â  Â  Â  Â  Â  adminWorkLogs[dStr] = { date: dStr, workerId: currentWorkerId, dayHours: dh, nightHours: nh, memo: memo, totalPay: pay, imageUrl: url };
Â  Â  Â  Â  Â  Â  const day = parseInt(dStr.split('-')[2]);
Â  Â  Â  Â  Â  Â  document.getElementById(`cal-day-${day}`).classList.add('has-data');
Â  Â  Â  Â  Â  Â  let total = 0; Object.values(adminWorkLogs).forEach(log => total += (log.totalPay || 0));
Â  Â  Â  Â  Â  Â  document.getElementById('monthlyTotalDisplay').innerText = `ì´ë²ˆë‹¬ ì´ì•¡: ${total.toLocaleString()}ì›`;
Â  Â  Â  Â  }).catch(err => { alert("ì‹¤íŒ¨: " + err.message); btn.innerText = "ì €ì¥í•˜ê¸°"; });
Â  Â  };
Â  Â  if(file) storage.ref(`logs/${currentWorkerId}/${Date.now()}`).put(file).then(s=>s.ref.getDownloadURL()).then(u=>save(u)).catch(e=>{alert("ì‚¬ì§„ ì—…ë¡œë“œ ì‹¤íŒ¨"); btn.innerText="ì €ì¥í•˜ê¸°";});
Â  Â  else save(adminWorkLogs[dStr] ? adminWorkLogs[dStr].imageUrl : null);
}

function loginSuccess(name) { currentWorkerId = name; localStorage.setItem('myWorkerId', currentWorkerId); updateUserBar(); renderCalendar(currentDate.getFullYear(), currentDate.getMonth()); }
function closeLoginModal(){ document.getElementById('loginModal').style.display = 'none'; }
function updateUserBar() {
Â  Â  const bar = document.getElementById('userProfileBar');
Â  Â  if (currentWorkerId) { bar.style.display = 'flex'; document.getElementById('currentUserDisplay').innerText = `ğŸ‘¤ ${currentWorkerId}`; }Â 
Â  Â  else { bar.style.display = 'none'; }
}
function logoutWorker() {
Â  Â  if(confirm("ë¡œê·¸ì•„ì›ƒ?")) {
Â  Â  Â  Â  currentWorkerId = null; localStorage.removeItem('myWorkerId'); updateUserBar();
Â  Â  Â  Â  document.getElementById('monthlyTotalDisplay').innerText = "ì´ë²ˆë‹¬ ì´ì•¡: 0ì›";
Â  Â  Â  Â  renderCalendar(currentDate.getFullYear(), currentDate.getMonth());
Â  Â  Â  Â  document.getElementById('dailyLogForm').classList.add('hidden');
Â  Â  }
}
function deleteWorkLog(){
Â  Â  if(!currentWorkerId) return;
Â  Â  const dStr = document.getElementById('dailyLogForm').getAttribute('data-date');
Â  Â  if(confirm("ì‚­ì œ?")){
Â  Â  Â  Â  db.collection('work_logs').doc(`${currentWorkerId}_${dStr}`).delete().then(()=>{
Â  Â  Â  Â  Â  Â  showToast("ì‚­ì œë¨"); delete adminWorkLogs[dStr];
Â  Â  Â  Â  Â  Â  document.getElementById(`cal-day-${parseInt(dStr.split('-')[2])}`).classList.remove('has-data');
Â  Â  Â  Â  Â  Â  document.getElementById('logDayHours').value=''; document.getElementById('logNightHours').value=''; document.getElementById('logMemo').value='';
Â  Â  Â  Â  Â  Â  let total = 0; Object.values(adminWorkLogs).forEach(log => total += (log.totalPay || 0));
Â  Â  Â  Â  Â  Â  document.getElementById('monthlyTotalDisplay').innerText = `ì´ë²ˆë‹¬ ì´ì•¡: ${total.toLocaleString()}ì›`;
Â  Â  Â  Â  });
Â  Â  }
}
function changeMonth(s){ currentDate.setMonth(currentDate.getMonth()+s); renderCalendar(currentDate.getFullYear(), currentDate.getMonth()); }
function previewLogImage(input){ if(input.files&&input.files[0]){ const r=new FileReader(); r.onload=e=>{const i=document.getElementById('logImagePreview'); i.src=e.target.result; i.style.display='block';}; r.readAsDataURL(input.files[0]); } }

// --- [D] ì„ê¸ˆê³„ì‚°ê¸° ---
function calculateWage() {
Â  Â  const role = document.querySelector('input[name="workRole"]:checked').value;Â 
Â  Â  const totalHours = parseFloat(document.getElementById('wageTotalHours').value) || 0;
Â  Â  const startHour = parseInt(document.getElementById('wageStartTime').value) || 8;Â 
Â  Â  const taxRate = parseFloat(document.getElementById('wageTaxType').value) || 0;
Â  Â  const hHoliday = parseFloat(document.getElementById('wageHoliday').value) || 0;
Â  Â  const hWeekend = parseFloat(document.getElementById('wageWeekend').value) || 0;
Â  Â  const hRain = parseFloat(document.getElementById('wageRain').value) || 0;
Â  Â  const hT = parseFloat(document.getElementById('wageHotTime').value) || 0;
Â  Â  const currentMonth = new Date().getMonth() + 1;
Â  Â  let dayStartHour = 8, dayEndHour = 18;
Â  Â  ['row-jan','row-apr','row-oct'].forEach(id => document.getElementById(id)?.classList.remove('highlight'));
Â  Â  if (currentMonth >= 4 && currentMonth <= 9) { dayStartHour = 6; dayEndHour = 19; document.getElementById('row-apr')?.classList.add('highlight'); }
Â  Â  else if (currentMonth >= 10 && currentMonth <= 12) { dayStartHour = 7; dayEndHour = 17; document.getElementById('row-oct')?.classList.add('highlight'); }
Â  Â  else { document.getElementById('row-jan')?.classList.add('highlight'); }
Â  Â  let dayCount=0, nightCount=0, deepNightCount=0, lunchExtCount=0;
Â  Â  for (let i = 0; i < totalHours; i++) {
Â  Â  Â  Â  let curr = (startHour + i) % 24;
Â  Â  Â  Â  if (curr >= dayStartHour && curr < dayEndHour) dayCount++; else nightCount++;
Â  Â  Â  Â  if (curr >= 0 && curr < 4) deepNightCount++;
Â  Â  Â  Â  if (curr === 12) lunchExtCount++;
Â  Â  }
Â  Â  let sDayCount=0, sNightCount=0;
Â  Â  if (role === 'skilled') { sDayCount = dayCount; sNightCount = nightCount; }
Â  Â  const DAY_RATE = 10320, NIGHT_RATE = 15480, EXTRA_ADD = 5160, HOT_ADD = 3096;
Â  Â  const SKILLED_DAY_ADD = 2557, SKILLED_NIGHT_ADD = 3836;
Â  Â  const subTotal = (dayCount * DAY_RATE) + (nightCount * NIGHT_RATE) + (deepNightCount * EXTRA_ADD) + (lunchExtCount * DAY_RATE) +Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ((hHoliday + hWeekend + hRain) * EXTRA_ADD) + (hT * HOT_ADD) +Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â (sDayCount * SKILLED_DAY_ADD) + (sNightCount * SKILLED_NIGHT_ADD);
Â  Â  const taxAmt = subTotal * taxRate;
Â  Â  document.getElementById('wageSpecBody').innerHTML = `
Â  Â  Â  Â  <tr><td>â˜€ï¸ ì£¼ê°„ (${dayCount.toFixed(1)}H)</td><td>${Math.floor(dayCount * DAY_RATE).toLocaleString()}ì›</td></tr>
Â  Â  Â  Â  <tr><td>ğŸŒ™ ì•¼ê°„ (${nightCount.toFixed(1)}H)</td><td>${Math.floor(nightCount * NIGHT_RATE).toLocaleString()}ì›</td></tr>
Â  Â  Â  Â  ${role === 'skilled' ? `<tr><td colspan="2">ğŸ”§ ê¸°ëŠ¥ê³µ ìˆ˜ë‹¹ ì¶”ê°€</td></tr>` : ''}
Â  Â  Â  Â  <tr><td>ğŸŒ´ í• ì¦ (${hHoliday+hWeekend+hRain+hT}H)</td><td>${Math.floor((hHoliday+hWeekend+hRain)*EXTRA_ADD + hT*HOT_ADD).toLocaleString()}ì›</td></tr>
Â  Â  Â  Â  <tr style="border-top:2px solid #ccc; font-weight:bold;"><td>ğŸ’¸ ì„¸ê¸ˆ (${(taxRate*100).toFixed(1)}%)</td><td>-${Math.floor(taxAmt).toLocaleString()}ì›</td></tr>
Â  Â  `;
Â  Â  document.getElementById('wageTotal').innerText = `ì´ ìˆ˜ë ¹ì•¡: ${Math.floor(subTotal - taxAmt).toLocaleString()}ì›`;
Â  Â  document.getElementById('wageResultBox').classList.remove('hidden');
}
function resetWageForm(){Â 
Â  Â  document.querySelectorAll('#wage-card input').forEach(i=> { if(i.type !== 'radio' && i.id !== 'wageHourly') i.value=''; });Â 
Â  Â  document.getElementById('wageResultBox').classList.add('hidden');Â 
}

// --- [E] ê³µì§€/ê²Œì‹œíŒ/ì„ ë°•/ìë£Œ ---
function addNotice(){ verifyAdmin().then(r=>{ if(r) db.collection("notices").add({title:document.getElementById('noticeTitle').value, content:document.getElementById('noticeContent').value, timestamp:firebase.firestore.FieldValue.serverTimestamp()}).then(()=>{document.getElementById('noticeTitle').value=''; document.getElementById('noticeContent').value=''; showToast("ê³µì§€ ë“±ë¡ë¨");}); }); }
function delNotice(id,e){ e.stopPropagation(); verifyAdmin().then(r=>{ if(r) db.collection("notices").doc(id).delete(); }); }
function addPost(){ const t=document.getElementById('inputTitle').value, p=document.getElementById('inputPw').value, c=document.getElementById('inputContent').value; if(t&&p&&c) db.collection("posts").add({title:t, password:p, content:c, timestamp:firebase.firestore.FieldValue.serverTimestamp()}).then(()=>{document.getElementById('inputTitle').value=''; document.getElementById('inputPw').value=''; document.getElementById('inputContent').value=''; toggleHidden('boardForm'); showToast("ë“±ë¡ë¨");}); }
function deletePost(id,pw,e){ e.stopPropagation(); if(prompt("ë¹„ë²ˆ")===pw) db.collection("posts").doc(id).delete(); }
function addComment(pid){const n=document.getElementById(`cmt-name-${pid}`).value, p=document.getElementById(`cmt-pw-${pid}`).value, t=document.getElementById(`cmt-txt-${pid}`).value; if(n&&p&&t){db.collection('posts').doc(pid).collection('comments').add({name:n, password:p, text:t, timestamp:firebase.firestore.FieldValue.serverTimestamp()}).then(()=>{document.getElementById(`cmt-txt-${pid}`).value=""; showToast("ëŒ“ê¸€ ë“±ë¡ë¨");});}}
async function deleteComment(pid,cid,pw){if(prompt("ë¹„ë²ˆ")===pw||await verifyAdmin()) db.collection('posts').doc(pid).collection('comments').doc(cid).delete();}
function addShipInfo(){const n=document.getElementById('shipName').value, c=document.getElementById('shipOnboard').value, f=document.getElementById('shipFileInput').files[0]; const save=(u)=>{db.collection("ships").add({shipName:n, onboardFeat:c, imageUrl:u, timestamp:firebase.firestore.FieldValue.serverTimestamp()}).then(()=>{document.getElementById('shipName').value=''; document.getElementById('shipOnboard').value=''; document.getElementById('shipFileInput').value=''; toggleHidden('shipForm'); showToast("ì„ ë°• ë“±ë¡ë¨");});}; if(f) storage.ref(`ships/${Date.now()}`).put(f).then(s=>s.ref.getDownloadURL()).then(u=>save(u)); else save(null);}
async function deleteShip(id,e){e.stopPropagation(); if(await verifyAdmin()) db.collection("ships").doc(id).delete();}
function uploadFile(){ const f=document.getElementById('fileInput').files[0], t=document.getElementById('fileTitle').value; if(f&&t) storage.ref(`archives/${Date.now()}`).put(f).then(s=>s.ref.getDownloadURL()).then(u=>db.collection("archives").add({title:t, url:u, timestamp:firebase.firestore.FieldValue.serverTimestamp()})).then(()=>{showToast("ì—…ë¡œë“œë¨"); document.getElementById('fileTitle').value='';}); }
function delArchive(id,e){ e.stopPropagation(); verifyAdmin().then(r=>{ if(r) db.collection("archives").doc(id).delete(); }); }

function renderBoardPage(p){currentBoardPage=p; const l=document.getElementById("boardList"); l.innerHTML=""; const start=(p-1)*postsPerPage; const end=start+postsPerPage; allPostsData.slice(start, end).forEach(x=>{l.innerHTML+=`<li class="post-item"><div class="post-header-row" onclick="toggleContent('p-${x.id}')"><span class="post-title-text">${x.title}</span><span class="post-meta-info">${x.timestamp ? new Date(x.timestamp.toDate()).toLocaleDateString() : ''}</span><button class="mini-btn btn-del" onclick="deletePost('${x.id}','${x.password}',event)">ì‚­ì œ</button></div><div id="p-${x.id}" class="post-body-content">${x.content}<div id="cmt-list-${x.id}" class="comment-section"></div><div class="comment-form"><input id="cmt-name-${x.id}" class="comment-input-sm" placeholder="ë‹‰ë„¤ì„"><input id="cmt-pw-${x.id}" class="comment-input-sm" type="password" placeholder="ë¹„ë²ˆ"><input id="cmt-txt-${x.id}" class="comment-input-lg" placeholder="ëŒ“ê¸€ ë‚´ìš©..."><button class="comment-submit" onclick="addComment('${x.id}')">ë“±ë¡</button></div></div></li>`; loadComments(x.id);});}
function loadComments(pid){if(commentUnsubscribes[pid]) commentUnsubscribes[pid](); commentUnsubscribes[pid]=db.collection('posts').doc(pid).collection('comments').orderBy('timestamp','asc').onSnapshot(s=>{const el=document.getElementById(`cmt-list-${pid}`); if(!el) return; el.innerHTML=""; s.forEach(d=>{const c=d.data(); el.innerHTML+=`<div class="comment-item"><span><span class="comment-meta">${c.name}:</span><span class="comment-text">${c.text}</span></span><button class="comment-del-btn" onclick="deleteComment('${pid}','${d.id}','${c.password}')">Ã—</button></div>`;});});}
function renderShipPage(p){const l=document.getElementById("shipList"); l.innerHTML=""; filteredShips.slice((p-1)*postsPerPage, p*postsPerPage).forEach(x=>{l.innerHTML+=`<li class="post-item"><div onclick="toggleContent('s-${x.id}')">ğŸš¢ ${x.shipName}</div><div id="s-${x.id}" class="post-body-content">${x.onboardFeat}<br><button class="mini-btn btn-del" onclick="deleteShip('${x.id}',event)">ì‚­ì œ</button></div></li>`;});}
function filterShips(){ const q=document.getElementById('shipSearch').value; filteredShips=allShipsData.filter(s=>s.shipName.includes(q)); renderShipPage(1); }
function openBusSchedule(){ const m=document.getElementById('imageModal'); document.getElementById('modalImage').src='http://pasc.dothome.co.kr/pnitbus.jpg'; m.style.display='flex'; }
function closeImageModal(){ document.getElementById('imageModal').style.display='none'; }
function openPrivacy(){ document.getElementById('privacyModal').style.display='flex'; }

/* 4ï¸âƒ£ ì‹¤í–‰ */
window.onload = () => {
Â  Â  loadBanner();
Â  Â  try {
Â  Â  Â  Â  db.collection("notices").orderBy("timestamp","desc").onSnapshot(s=>{const l=document.getElementById("noticeList"); l.innerHTML=""; s.forEach(d=>{const x=d.data(); l.innerHTML+=`<li class="post-item" onclick="toggleContent('n-${d.id}')">ğŸ“¢ <strong>${x.title}</strong><div id="n-${d.id}" class="post-body-content">${x.content}<br><button class="mini-btn btn-del" onclick="delNotice('${d.id}',event)">ì‚­ì œ</button></div></li>`;})});Â 
Â  Â  Â  Â  db.collection("posts").orderBy("timestamp","desc").onSnapshot(s=>{allPostsData=[]; s.forEach(d=>{allPostsData.push({...d.data(), id:d.id})}); renderBoardPage(1);});Â 
Â  Â  Â  Â  db.collection("ships").orderBy("timestamp","desc").onSnapshot(s=>{allShipsData=[]; s.forEach(d=>{allShipsData.push({...d.data(), id:d.id})}); filteredShips=allShipsData; renderShipPage(1);});Â 
Â  Â  Â  Â  db.collection("archives").orderBy("timestamp","desc").onSnapshot(s=>{const l=document.getElementById("fileList"); l.innerHTML=""; s.forEach(d=>{const x=d.data(); l.innerHTML+=`<li class="post-item"><a href="${x.url}" target="_blank">ğŸ’¾ ${x.title}</a><button class="mini-btn btn-del" onclick="delArchive('${d.id}',event)">Ã—</button></li>`;})});
Â  Â  } catch(err) { console.warn("ì‹¤ì‹œê°„ ì—°ê²° ì˜¤ë¥˜:", err); }
Â  Â  if(localStorage.getItem('myWorkerId')) { currentWorkerId = localStorage.getItem('myWorkerId'); updateUserBar(); }
};
</script>
</body>
</html>
