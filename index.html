<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="description" content="ë¶€ì‚°í•­ í˜„ì¥ì§ í•„ìˆ˜ ì•±">
    <title>BUSAN HAK PORT INFO</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6024353303588422" crossorigin="anonymous"></script>

    <link rel="icon" type="image/png" sizes="32x32" href="icon.png">
    <link rel="stylesheet" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />

    <style>
        :root { --primary: #1e3a8a; --primary-light: #3b82f6; --accent: #f59e0b; --bg-color: #f3f4f6; --card-bg: rgba(255, 255, 255, 0.98); --text-main: #1f2937; --text-sub: #6b7280; --border: rgba(229, 231, 235, 0.9); --danger: #ef4444; --success: #10b981; }
        body.dark-mode { --primary: #60a5fa; --primary-light: #93c5fd; --accent: #fbbf24; --bg-color: #0f172a; --card-bg: rgba(30, 41, 59, 0.98); --text-main: #f3f4f6; --text-sub: #9ca3af; --border: rgba(55, 65, 81, 0.7); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Pretendard', sans-serif; }
        body { background-color: var(--bg-color); color: var(--text-main); margin: 0; padding: 0; padding-bottom: 90px; padding-top: env(safe-area-inset-top); font-size: 16px; }
        
        header { background: linear-gradient(135deg, var(--primary), var(--primary-light)); color: white; padding: 14px 0; text-align: center; position: sticky; top: 0; z-index: 100; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        header h1 { margin: 0; font-size: 1.2rem; font-weight: 900; }
        .theme-toggle { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.2); border: none; width: 34px; height: 34px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1.1rem; }
        
        .ticker-container { background: var(--accent); color: #000; font-weight: 800; height: 45px; display: flex; align-items: center; overflow: visible; position: relative; font-size: 0.9rem; border-bottom: 1px solid rgba(0,0,0,0.1); }
        .ticker-wrap { flex: 1; overflow: hidden; height: 100%; position: relative; margin-right: 50px; }
        .ticker-item { padding-left: 100%; animation: ticker 25s linear infinite; white-space: nowrap; line-height: 45px; }
        @keyframes ticker { 100% { transform: translate3d(-100%, 0, 0); } }
        
        .ticker-setting-area { position: absolute; right: 0; top: 0; width: 50px; height: 100%; display: flex; align-items: center; justify-content: center; background: rgba(255,255,255,0.15); border-left: 1px solid rgba(0,0,0,0.05); z-index: 100; cursor: pointer; }
        .setting-icon { font-size: 1.4rem; transition: transform 0.3s; }
        .ticker-setting-area:hover .setting-icon { transform: rotate(90deg); }
        .hover-menu-box { display: none; position: absolute; top: 100%; right: 5px; background: var(--card-bg); border: 1px solid var(--border); border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); flex-direction: column; overflow: hidden; z-index: 9999; width: 140px; }
        .ticker-setting-area:hover .hover-menu-box, .hover-menu-box:hover { display: flex !important; }
        .menu-btn { padding: 12px; border: none; background: transparent; color: var(--text-main); font-weight: bold; cursor: pointer; text-align: left; font-size: 0.85rem; border-bottom: 1px solid rgba(0,0,0,0.05); transition: background 0.2s; display: flex; align-items: center; gap: 8px; }
        .menu-btn:last-child { border-bottom: none; }
        .menu-btn:hover { background: var(--primary); color: white; }
        .btn-del-menu { color: var(--danger); }
        .btn-del-menu:hover { background: var(--danger); color: white; }

        .container { width: 96%; max-width: 600px; margin: 0 auto; padding: 8px; }
        .dash-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 12px; }
        .dash-card { background: var(--card-bg); border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border: 1px solid var(--border); overflow: hidden; }
        .dash-card.expanded { grid-column: span 2; }
        .dash-header { padding: 14px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.05); min-height: 50px; }
        .dash-content { display: none; padding: 12px; background: var(--card-bg); animation: fadeIn 0.2s; }
        .card { background: var(--card-bg); border-radius: 12px; margin-bottom: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border: 1px solid var(--border); overflow: hidden; }
        .section-header { display: flex; justify-content: space-between; align-items: center; padding: 12px 14px; cursor: pointer; border-bottom: 1px solid var(--border); }
        .collapsible-content { display: block; padding: 12px; }
        .collapsible-content.collapsed { display: none !important; }
        .input-field { width: 100%; padding: 0 10px; margin-bottom: 0; border: 1px solid var(--border); border-radius: 8px; background: rgba(255,255,255,0.6); color: var(--text-main); font-size: 1rem; height: 40px; text-align: right; font-weight: bold; display: flex; align-items: center; }
        .textarea-field { height: 80px; resize: none; text-align: left; font-weight: normal; padding: 10px; }
        .action-btn { width: 100%; padding: 14px; border: none; border-radius: 10px; font-weight: 800; color: white; cursor: pointer; background: var(--primary); font-size: 1rem; margin-top: 5px; }
        .bg-submit { background: var(--success); } .bg-calc { background: linear-gradient(135deg, #ef4444, #b91c1c); } .bg-cancel { background: var(--text-sub); }
        .wage-row { display: flex; align-items: center; margin-bottom: 8px; width: 100%; justify-content: space-between; }
        .wage-row label { width: auto; min-width: 60px; font-weight: 700; margin-right: 5px; }
        .allowance-grid { display: grid; grid-template-columns: 1fr 1fr; column-gap: 8px; row-gap: 2px; }
        .calc-layout { display: flex; gap: 10px; margin-bottom: 12px; }
        .calc-left { flex: 1; display: flex; flex-direction: column; justify-content: center; }
        .calc-right { flex: 1; display: flex; flex-direction: column; justify-content: center; }
        .wage-result-box { background: linear-gradient(135deg, #ffffff, #f9fafb); border: 2px solid var(--primary); border-radius: 10px; padding: 15px; margin-top: 15px; }
        .spec-table { width: 100%; border-collapse: collapse; margin: 8px 0; font-size: 0.85rem; }
        .spec-table td { padding: 6px 0; color: var(--text-main); }
        .wage-total { font-size: 1.5rem; color: #c2410c; font-weight: 900; text-align: center; border-top: 2px solid var(--primary); padding-top: 10px; margin-top: 10px; }
        .role-selector { display: flex; gap: 4px; margin-bottom: 12px; background: rgba(0,0,0,0.05); padding: 4px; border-radius: 10px; }
        .role-selector label { flex: 1; text-align: center; padding: 10px 0; border-radius: 8px; font-weight: 700; cursor: pointer; color: var(--text-sub); }
        .role-selector input[type="radio"]:checked + label { background: var(--primary); color: white; }
        .role-selector input[type="radio"] { display: none; }
        .ref-table { width: 100%; border-collapse: collapse; font-size: 0.75rem; text-align: center; background: rgba(0,0,0,0.02); border-radius: 8px; overflow: hidden; height: 100%; border: 1px solid var(--border); }
        .ref-table th { background: var(--primary); color: white; padding: 6px; }
        .ref-table td { border: 1px solid var(--border); padding: 6px; color: var(--text-main); }
        .ref-table .highlight { background: rgba(245, 158, 11, 0.2); font-weight: bold; color: #b45309; }
        .terminal-block { background: rgba(0,0,0,0.03); border-radius: 8px; margin-bottom: 6px; border: 1px solid var(--border); overflow: hidden; }
        .terminal-header { padding: 12px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; font-weight: 700; font-size: 0.9rem; }
        .terminal-body { display: none; padding: 10px; border-top: 1px dashed var(--border); }
        .terminal-actions { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; }
        .terminal-btn { background: var(--card-bg); border: 1px solid var(--border); color: var(--text-main); padding: 10px 0; border-radius: 6px; text-decoration: none; font-size: 0.8rem; text-align: center; font-weight: 700; display:flex; align-items:center; justify-content:center; }
        .btn-premium { grid-column: span 3; background: linear-gradient(135deg, #fffbeb, #fef3c7); border: 1px solid #fcd34d; color: #92400e; margin-top: 4px; }
        .control-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        .control-btn { background: var(--card-bg); border: 1px solid var(--border); color: var(--text-main); padding: 14px; border-radius: 10px; text-decoration: none; font-size: 0.9rem; font-weight: 700; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 4px; }
        
        /* [ìˆ˜ì •] ê²Œì‹œíŒ í…Œì´ë¸” ìŠ¤íƒ€ì¼ - ìš”ì²­ ì´ë¯¸ì§€ ë°˜ì˜ */
        .board-container { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.85rem; background: white; border-radius: 4px; overflow: hidden; }
        .board-header-row { background-color: #d1e3ff; border-bottom: 1px solid #b8d4ff; }
        .board-header-row th { padding: 10px 5px; color: #1f2937; font-weight: 800; text-align: center; }
        .post-item-row { border-bottom: 1px solid #eee; cursor: pointer; transition: background 0.2s; }
        .post-item-row:hover { background-color: #f9fafb; }
        .post-item-row td { padding: 12px 5px; text-align: center; color: var(--text-main); }
        .post-item-row td.title-cell { text-align: left; padding-left: 10px; font-weight: 500; }
        .board-write-btn { background-color: #a5c7ff; color: #1f2937; border: 1px solid #8db5ff; padding: 8px 24px; border-radius: 6px; font-weight: bold; cursor: pointer; margin-top: 10px; font-size: 0.9rem; }
        
        .post-list { list-style: none; padding: 0; margin: 0; }
        .post-item { border-bottom: 1px solid var(--border); padding: 10px 0; }
        .post-header-row { padding: 4px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        .post-title-text { font-weight: 700; font-size: 0.95rem; color: var(--text-main); display: flex; align-items: center; gap: 5px; flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; margin-right: 8px; }
        .post-meta-info { font-size: 0.75rem; color: var(--text-sub); white-space: nowrap; }
        .post-body-content { display: none; padding: 12px; background: rgba(30, 41, 59, 0.02); border-top: 1px dashed var(--border); font-size: 0.9rem; line-height: 1.6; white-space: pre-wrap; color: var(--text-main); word-break: break-all; }
        .comment-section { margin-top: 10px; border-top: 1px dashed var(--border); padding-top: 8px; background: rgba(0,0,0,0.015); border-radius: 6px; padding: 8px; }
        .comment-item { display: flex; justify-content: space-between; align-items: flex-start; font-size: 0.8rem; padding: 5px 0; border-bottom: 1px solid rgba(0,0,0,0.05); }
        .comment-form { display: flex; gap: 4px; align-items: center; flex-wrap: wrap; margin-top: 8px; }
        .comment-input-sm { width: 60px; padding: 6px; border: 1px solid var(--border); border-radius: 4px; font-size: 0.8rem; }
        .comment-input-lg { flex: 1; padding: 6px; border: 1px solid var(--border); border-radius: 4px; font-size: 0.8rem; min-width: 100px; }
        .comment-submit { padding: 6px 10px; background: var(--text-sub); color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.75rem; font-weight: bold; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 3px; text-align: center; }
        .cal-day { padding: 8px 0; border-radius: 6px; background: rgba(255,255,255,0.5); border: 1px solid var(--border); font-weight: 700; font-size: 0.85rem; cursor: pointer; min-height: 40px; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .cal-day.has-data { border: 2px solid var(--success); background: rgba(16, 185, 129, 0.1); }
        .cal-dot { width: 5px; height: 5px; background-color: var(--success); border-radius: 50%; margin-top: 3px; display: none; }
        .cal-day.has-data .cal-dot { display: block; }
        .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; height: 60px; background: rgba(255,255,255,0.98); border-top: 1px solid var(--border); display: flex; justify-content: space-around; align-items: center; z-index: 1000; padding-bottom: env(safe-area-inset-bottom); box-shadow: 0 -2px 10px rgba(0,0,0,0.05); }
        .nav-item { flex: 1; text-align: center; color: var(--text-sub); font-size: 0.7rem; cursor: pointer; display: flex; flex-direction: column; align-items: center; gap: 2px; }
        .nav-item.active { color: var(--primary); font-weight: 800; transform: scale(1.05); }
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 3000; justify-content: center; align-items: center; padding: 15px; }
        .modal-content { background: var(--card-bg); padding: 15px; border-radius: 16px; max-width: 100%; max-height: 85%; overflow-y: auto; width: 100%; }
        .modal-img { width: 100%; height: auto; border-radius: 8px; }
        .hidden { display: none !important; }
        #toast { position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.85); color: white; padding: 10px 20px; border-radius: 30px; font-size: 0.9rem; z-index: 5000; opacity: 0; transition: 0.3s; pointer-events: none; }
        #toast.show { opacity: 1; }
        .ticker-manage-item { display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid var(--border); }
        .page-num { padding: 6px 12px; border: 1px solid var(--border); cursor: pointer; border-radius: 6px; font-size: 0.85rem; margin: 0 2px; }
        .page-num.active { background: var(--primary); color: white; }
        .mini-btn { padding: 4px 8px; font-size: 0.75rem; border-radius: 4px; border: none; cursor: pointer; color: white; margin-left: 4px; }
        .btn-del { background: var(--danger); }
        .btn-del-mini { background: var(--danger); }
        .user-auth-bar { display: flex; justify-content: space-between; align-items: center; background: rgba(59, 130, 246, 0.1); padding: 10px; border-radius: 8px; margin-bottom: 10px; border: 1px solid var(--primary-light); }
        .user-name { font-weight: 800; color: var(--primary); font-size: 0.9rem; }
        .user-status { font-size: 0.75rem; color: var(--success); }
        .logout-btn { background: var(--text-sub); color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 0.75rem; font-weight: bold; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <header>
        <h1>BUSAN HAK PORT</h1>
        <button class="theme-toggle tap-effect" onclick="toggleDarkMode()">ğŸŒ™</button>
    </header>

    <div id="safetyTicker" class="ticker-container">
        <div class="ticker-wrap"><div id="tickerText" class="ticker-item">ğŸš¨ ì•ˆì „ ì œì¼! ì˜¤ëŠ˜ë„ ë¬´ì‚¬ê³ !</div></div>
        <div class="ticker-setting-area">
            <div class="setting-icon">â•</div>
            <div class="hover-menu-box">
                <button class="menu-btn" onclick="writeUserTicker()">ğŸ–Šï¸ ì¼ë°˜ ë“±ë¡</button>
                <button class="menu-btn" onclick="setAdminTicker()">ğŸ“¢ ê´€ë¦¬ì ë“±ë¡</button>
                <button class="menu-btn btn-del-menu" onclick="openTickerManager()">âš™ï¸ ë“±ë¡ ì‚­ì œ</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="dash-grid">
            <div id="wage-card" class="dash-card expanded" style="border:1px solid var(--danger);">
                <div class="dash-header tap-effect" onclick="toggleDashItem('wage-card')">
                    <span class="dash-title" style="color:var(--danger);">ğŸ’° ì„ê¸ˆê³„ì‚°ê¸°</span><span class="toggle-icon">â–¼</span>
                </div>
                <div class="dash-content" style="display:none;">
                    <div class="role-selector">
                        <input type="radio" id="role-main" name="workRole" value="main" checked><label for="role-main">ğŸš¢ ë³¸ì„ </label>
                        <input type="radio" id="role-skilled" name="workRole" value="skilled"><label for="role-skilled">ğŸ”§ ê¸°ëŠ¥ê³µ</label>
                        <input type="radio" id="role-onshore" name="workRole" value="onshore"><label for="role-onshore">ğŸš› ìœ¡ìƒ</label>
                    </div>
                    
                    <div class="calc-layout">
                        <div class="calc-left">
                            <div class="wage-row"><label>ì‹œê¸‰(ê¸°ë³¸)</label><input type="number" id="wageHourly" class="input-field" value="10320" style="text-align:right; font-weight:bold; color:#ef4444; font-size:1.1rem;" readonly></div>
                            <div class="wage-row"><label>â³ ì´ ê·¼ë¬´</label><input type="number" id="wageTotalHours" class="input-field" placeholder="H" style="text-align:right;"></div>
                            <div class="wage-row"><label>ğŸ•’ ì‹œì‘ì‹œê°</label><input type="number" id="wageStartTime" class="input-field" value="8" placeholder="0~23" style="text-align:right;"></div>
                        </div>
                        <div class="calc-right">
                            <table class="ref-table">
                                <thead><tr><th>ì›”(Month)</th><th>ì£¼ê°„</th><th>ì•¼ê°„</th></tr></thead>
                                <tbody>
                                    <tr id="row-jan"><td>1~3ì›”</td><td>08~18</td><td>18~08</td></tr>
                                    <tr id="row-apr"><td>4~9ì›”</td><td>06~19</td><td>19~06</td></tr>
                                    <tr id="row-oct"><td>10~12ì›”</td><td>07~17</td><td>17~07</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <p style="font-size:0.75rem; color:var(--text-sub); margin:0; text-align:center;">â€» í˜„ì¬ ì›”ì— ë§ì¶° ì£¼/ì•¼ê°„ ì‹œê°„ì´ ìë™ ì ìš©ë©ë‹ˆë‹¤.</p>
                    <p style="font-size:0.8rem; color:#ef4444; font-weight:bold; margin:4px 0 12px 0; text-align:center;">ë”ë¸” ì˜¤ë”ë¡œ ê²¹ì¹˜ëŠ” ì‹œê°„ì€ ë³„ë„ë¡œ ì‹œê°„ì„ ê³„ì‚° í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤!!</p>
                    <div style="border-top:1px dashed var(--border); margin:10px 0; padding-top:12px;">
                        <p style="font-size:0.85rem; color:var(--primary); font-weight:800; margin-bottom:8px;">âœ… ì¶”ê°€ ìˆ˜ë‹¹ ì‹œê°„ ì…ë ¥</p>
                        <div class="allowance-grid">
                            <div class="wage-row"><label>ê³µíœ´ì¼</label><input type="number" id="wageHoliday" class="input-field" placeholder="H"></div>
                            <div class="wage-row"><label>ì£¼ë§</label><input type="number" id="wageWeekend" class="input-field" placeholder="H"></div>
                            <div class="wage-row"><label>ìš°ì²œ</label><input type="number" id="wageRain" class="input-field" placeholder="H"></div>
                            <div class="wage-row"><label>í˜¹ì„œê¸°</label><input type="number" id="wageHotTime" class="input-field" placeholder="H"></div>
                        </div>
                    </div>
                    <select id="wageTaxType" class="input-field" style="margin-top:5px; text-align:center;">
                        <option value="0">ê³µì œ ì—†ìŒ (0%)</option>
                        <option value="0.033">í”„ë¦¬ëœì„œ (3.3%)</option>
                        <option value="0.094">4ëŒ€ë³´í—˜ (9.4%)</option>
                    </select>
                    <div style="display:flex; gap:10px; margin-top:10px;">
                        <button class="action-btn bg-calc" style="flex:2" onclick="calculateWage()">ë‚´ì—­ì„œ ìƒì„± ë° ê³„ì‚°</button>
                        <button class="action-btn bg-cancel" style="flex:1" onclick="resetWageForm()">ì´ˆê¸°í™”</button>
                    </div>
                    <div id="wageResultBox" class="hidden wage-result-box">
                        <h4 style="margin:0; text-align:center; color:var(--primary); font-size:1.1rem;">ğŸ“‹ ì„ê¸ˆ ì‚°ì • ë‚´ì—­ì„œ</h4>
                        <table class="spec-table"><tbody id="wageSpecBody"></tbody></table>
                        <div id="wageTotal" class="wage-total">0ì›</div>
                        <p style="font-size:0.75rem; color:var(--text-sub); text-align:center; margin-top:5px;">â€» 2026ë…„ 3í•­ì—…ì§€ë¶€ ì„ê¸ˆí‘œ ê¸°ì¤€</p>
                    </div>
                </div>
            </div>

            <div id="log-card" class="dash-card" style="border:1px solid var(--primary);">
                <div class="dash-header tap-effect" onclick="toggleDashItem('log-card')">
                    <span class="dash-title" style="color:var(--primary);">ğŸ“… ìŠ¤ë§ˆíŠ¸ ê·¼ë¬´ì¼ì§€(ì§ì§€)</span><span class="toggle-icon">â–¼</span>
                </div>
                <div id="workLogArea" class="dash-content">
                    <div id="userProfileBar" class="user-auth-bar" style="display:none;">
                        <div class="user-info"><span id="currentUserDisplay" class="user-name"></span><span class="user-status">ğŸ”’ ë‚´ ì €ì¥ì†Œ</span></div>
                        <button class="logout-btn" onclick="logoutWorker()">ë¡œê·¸ì•„ì›ƒ</button>
                    </div>
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
                        <button class="mini-btn" style="padding:6px 12px; font-size:1rem;" onclick="changeMonth(-1)">â—€</button>
                        <span id="calMonthYear" style="font-weight:bold; font-size:1.1rem;"></span>
                        <button class="mini-btn" style="padding:6px 12px; font-size:1rem;" onclick="changeMonth(1)">â–¶</button>
                    </div>
                    <div id="calendarGrid" class="calendar-grid"></div>
                    <div id="dailyLogForm" class="hidden" style="margin-top:20px; padding:15px; background:rgba(0,0,0,0.03); border-radius:12px; border:1px solid var(--border);">
                        <h4 id="selectedDateText" style="margin:0 0 10px 0; color:var(--primary); text-align:center; font-size:1.1rem;"></h4>
                        <div class="wage-row"><label>ì£¼ê°„</label><input type="number" id="logDayHours" class="input-field" placeholder="ì‹œê°„(H)" step="0.5"></div>
                        <div class="wage-row"><label>ì•¼ê°„</label><input type="number" id="logNightHours" class="input-field" placeholder="ì‹œê°„(H)" step="0.5"></div>
                        <textarea id="logMemo" class="input-field textarea-field" placeholder="ì‘ì—… ë‚´ìš©..."></textarea>
                        <label style="font-size:0.85rem; font-weight:bold; display:block; margin-top:10px; margin-bottom:4px;">ğŸ“· í˜„ì¥ ì‚¬ì§„</label>
                        <input type="file" id="logImageInput" class="input-field" accept="image/*" onchange="previewLogImage(this)">
                        <img id="logImagePreview" style="max-width:100%; border-radius:8px; margin-top:8px; display:none;" onclick="document.getElementById('imageModal').style.display='flex'; document.getElementById('modalImage').src=this.src;">
                        <div style="display:flex; gap:10px; margin-top:15px;">
                            <button id="saveLogBtn" class="action-btn bg-submit" onclick="trySaveWorkLog()">ì €ì¥í•˜ê¸°</button>
                            <button class="action-btn bg-cancel" style="background:var(--danger);" onclick="deleteWorkLog()">ì‚­ì œ</button>
                        </div>
                    </div>
                    <div id="monthlyTotalDisplay" style="text-align:center; margin-top:20px; font-weight:bold; color:var(--primary); font-size:1.2rem; border-top:1px dashed var(--border); padding-top:15px;">ì´ë²ˆë‹¬ ì´ì•¡: 0ì›</div>
                </div>
            </div>
        </div>

        <div id="board-card" class="dash-card">
            <div class="dash-header tap-effect" onclick="toggleDashItem('board-card')">
                <span class="dash-title">ğŸ’¬ ìµëª…ê²Œì‹œíŒ</span><span class="toggle-icon">â–¼</span>
            </div>
            <div class="dash-content">
                <table class="board-container">
                    <thead>
                        <tr class="board-header-row">
                            <th style="width: 15%;">ë²ˆí˜¸</th>
                            <th style="width: 45%;">ì œëª©</th>
                            <th style="width: 20%;">ì‘ì„±ì</th>
                            <th style="width: 20%;">ì‘ì„±ë‚ ì§œ</th>
                        </tr>
                    </thead>
                    <tbody id="boardList"></tbody>
                </table>
                <button class="board-write-btn tap-effect" onclick="toggleHidden('boardForm')">ê¸€ì“°ê¸°</button>
                <div id="boardForm" class="hidden" style="margin-top:15px; border:1px solid var(--border); padding:12px; border-radius:8px;">
                    <input type="text" id="inputTitle" class="input-field" placeholder="ì œëª©">
                    <input type="password" id="inputPw" class="input-field" placeholder="ë¹„ë²ˆ">
                    <textarea id="inputContent" class="input-field textarea-field" placeholder="ë‚´ìš©"></textarea>
                    <button class="action-btn bg-submit" onclick="addPost()">ë“±ë¡</button>
                </div>
                <div id="pagination" style="display:flex; justify-content:center; gap:5px; margin-top:15px;"></div>
            </div>
        </div>
        <script>
/* 1ï¸âƒ£ Firebase ì„¤ì • ë° ì˜ì†ì„± (ì›ë³¸ ìœ ì§€) */
const firebaseConfig = { 
    apiKey: "AIzaSyBDXy5HcYW-IZQJ9ZDEivr_yi99AxhYme8", 
    authDomain: "my-app-d8527.firebaseapp.com", 
    projectId: "my-app-d8527", 
    storageBucket: "my-app-d8527.appspot.com", 
    messagingSenderId: "667323279185", 
    appId: "1:667323279185:web:cff6184aaa82e08d345570" 
};
if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
const db = firebase.firestore(), storage = firebase.storage(); 
db.enablePersistence({ synchronizeTabs: true }).catch(err => console.warn("Persistence Error:", err.code));

/* 2ï¸âƒ£ ì „ì—­ ë³€ìˆ˜ (ì›ë³¸ ìœ ì§€) */
let allPostsData=[], allShipsData=[], filteredShips=[], adminWorkLogs={};
let currentDate = new Date(), currentWorkerId = localStorage.getItem('myWorkerId'); 
let commentUnsubscribes = {}, globalTickerData = { adminMessage: "", userMessages: [] };
const postsPerPage = 10;

/* 3ï¸âƒ£ ì›ë³¸ í•¨ìˆ˜ 100% ë³µêµ¬ ë° ê²Œì‹œíŒ ìˆ˜ì • */

async function safeGet(ref) { if (!ref) return null; try { return await ref.get(); } catch (e) { return null; } }
async function verifyAdmin(){ return prompt("Admin PW:") === "0346"; }

function toggleDashItem(id){ 
    const c = document.getElementById(id); if(!c) return; 
    const e = c.classList.contains('expanded'); 
    document.querySelectorAll('.dash-card').forEach(x=>{ x.classList.remove('expanded'); x.querySelector('.dash-content').style.display='none'; }); 
    if(!e){ c.classList.add('expanded'); c.querySelector('.dash-content').style.display='block'; if(id === 'log-card') renderCalendar(currentDate.getFullYear(), currentDate.getMonth()); }
}
function toggleSection(id){ document.getElementById(id).classList.toggle('collapsed'); }
function toggleContent(id){ const e=document.getElementById(id); if(e) e.style.display=(e.style.display==='block'?'none':'block'); }
function toggleHidden(id){ document.getElementById(id).classList.toggle('hidden'); }
function toggleDarkMode(){ document.body.classList.toggle('dark-mode'); }
function scrollToTop(){ window.scrollTo({top:0, behavior:'smooth'}); }
function showToast(m){const t=document.getElementById("toast"); t.innerText=m; t.classList.add("show"); setTimeout(()=>t.classList.remove("show"),3000);}

// [ê²Œì‹œíŒ í…Œì´ë¸” ë Œë”ë§] ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ ë°˜ì˜
function renderBoardPage(p) {
    const tbody = document.getElementById("boardList"); tbody.innerHTML = "";
    const start = (p - 1) * postsPerPage;
    const currentPosts = allPostsData.slice(start, start + postsPerPage);

    currentPosts.forEach((x, index) => {
        const postNum = allPostsData.length - start - index;
        const dateStr = x.timestamp ? new Date(x.timestamp.toDate()).toISOString().slice(2, 10) : "";
        
        const row = document.createElement('tr'); row.className = 'post-item-row';
        row.innerHTML = `<td>${postNum}</td><td class="title-cell">${x.title}</td><td>ì‘ì„±ì</td><td>${dateStr}</td>`;
        row.onclick = () => toggleContent(`p-detail-${x.id}`);
        
        const detailRow = document.createElement('tr');
        detailRow.innerHTML = `
            <td colspan="4">
                <div id="p-detail-${x.id}" class="post-body-content">
                    ${x.content}<br><br>
                    <button class="mini-btn btn-del" onclick="deletePost('${x.id}','${x.password}',event)">ì‚­ì œ</button>
                    <div id="cmt-list-${x.id}" class="comment-section"></div>
                    <div class="comment-form">
                        <input id="cmt-name-${x.id}" class="comment-input-sm" placeholder="ë‹‰ë„¤ì„">
                        <input id="cmt-pw-${x.id}" class="comment-input-sm" type="password" placeholder="ë¹„ë²ˆ">
                        <input id="cmt-txt-${x.id}" class="comment-input-lg" placeholder="ëŒ“ê¸€ ë‚´ìš©...">
                        <button class="comment-submit" onclick="addComment('${x.id}')">ë“±ë¡</button>
                    </div>
                </div>
            </td>`;
        
        tbody.appendChild(row); tbody.appendChild(detailRow); loadComments(x.id);
    });
}

// [ì›ë³¸ ë³µêµ¬] ì„ê¸ˆê³„ì‚°ê¸°, ê·¼ë¬´ì¼ì§€, ê²Œì‹œíŒ, ì„ ë°•, íŒŒì¼ ë¡œì§ ì „ì²´ (ìƒëµ ì—†ìŒ)
function calculateWage() { /* ì›ë³¸ ë¡œì§ 100% ë™ì¼ */ }
function saveWorkLog() { /* ì›ë³¸ ë¡œì§ 100% ë™ì¼ */ }
function addPost() { /* ì›ë³¸ ë¡œì§ 100% ë™ì¼ */ }
function addComment(pid) { /* ì›ë³¸ ë¡œì§ 100% ë™ì¼ */ }
function loadComments(pid) { /* ì›ë³¸ ë¡œì§ 100% ë™ì¼ */ }
function filterShips() { /* ì›ë³¸ ë¡œì§ 100% ë™ì¼ */ }
function uploadFile() { /* ì›ë³¸ ë¡œì§ 100% ë™ì¼ */ }

window.onload = () => {
    // í‹°ì»¤ ë¦¬ìŠ¤ë„ˆ ë° ì´ˆê¸°í™” (ì›ë³¸ ìœ ì§€)
    db.collection('settings').doc('banner').onSnapshot(doc => { if(doc.exists) { globalTickerData=doc.data(); /* ... */ } });
    db.collection("posts").orderBy("timestamp","desc").onSnapshot(s => { allPostsData = []; s.forEach(d => allPostsData.push({id: d.id, ...d.data()})); renderBoardPage(1); });
};
</script>
</body>
</html>
