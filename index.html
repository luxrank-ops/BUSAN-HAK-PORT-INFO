<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <meta name="description" content="2026ë…„ ìµœì‹  ë¶€ì‚°í•­ í•­ìš´ë…¸ì¡°ì› ì„ê¸ˆ ê³„ì‚°ê¸° ë° ìŠ¤ë§ˆíŠ¸ ê·¼ë¬´ì¼ì§€. HJNC, BNCT ë“± ë¶€ì‚°ì‹ í•­ ì„ ë°• ìŠ¤ì¼€ì¤„ê³¼ í„°ë¯¸ë„ ì •ë³´ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì œê³µí•˜ëŠ” í˜„ì¥ í•„ìˆ˜ ì•±ì…ë‹ˆë‹¤.">
    <meta name="keywords" content="ë¶€ì‚°í•­, í•­ìš´ë…¸ì¡°, ì„ê¸ˆê³„ì‚°ê¸°, ë¶€ì‚°ì‹ í•­, ì„ ë°•ìŠ¤ì¼€ì¤„, ê·¼ë¬´ì¼ì§€, ë…¸ì„ê³„ì‚°, ì•¼ê°„ìˆ˜ë‹¹, HJNC, PNC, ë¶€ì‚°í•­ë§Œ">
    <meta name="author" content="BUSAN HAK PORT INFO">
    <meta name="robots" content="index, follow">
    
    <meta property="og:type" content="website">
    <meta property="og:title" content="ë¶€ì‚°í•­ í˜„ì¥ì§ ì˜¬ì¸ì› í”Œë«í¼ - HAK PORT">
    <meta property="og:description" content="í„°ë¯¸ë„ ìŠ¤ì¼€ì¤„ í™•ì¸ë¶€í„° ë³µì¡í•œ ì„ê¸ˆ/ìˆ˜ë‹¹ ê³„ì‚°ê¹Œì§€ í•œ ë²ˆì— í•´ê²°í•˜ì„¸ìš”.">
    <meta property="og:site_name" content="BUSAN HAK PORT INFO">
    
    <title>BUSAN HAK PORT INFO - ë¶€ì‚°í•­ ì„ê¸ˆ ê³„ì‚° ë° ì •ë³´</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6024353303588422" crossorigin="anonymous"></script>

    <link rel="icon" type="image/png" sizes="32x32" href="icon.png?v=seo">
    <link rel="icon" type="image/png" sizes="192x192" href="icon.png?v=seo">
    <link rel="apple-touch-icon" sizes="180x180" href="icon.png?v=seo">
    <link rel="shortcut icon" href="icon.png?v=seo">
    <link rel="manifest" href="manifest.json?v=seo">

    <meta name="theme-color" content="#1e3a8a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />

    <style>
        :root {
            /* Design System Preserved */
            --primary: #1e3a8a; --primary-light: #3b82f6;
            --accent: #f59e0b;
            --bg-color: #f3f4f6;
            --card-bg: rgba(255, 255, 255, 0.90);
            --text-main: #1f2937; --text-sub: #6b7280;
            --border: rgba(229, 231, 235, 0.6);
            --danger: #ef4444; --success: #10b981;
            --glass-border: 1px solid rgba(255, 255, 255, 0.6);
            --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.08);
            --blur: blur(16px);
        }

        body.dark-mode {
            --primary: #60a5fa; --primary-light: #93c5fd; --accent: #fbbf24;
            --bg-color: #0f172a; --card-bg: rgba(30, 41, 59, 0.85);
            --text-main: #f3f4f6; --text-sub: #9ca3af;
            --border: rgba(55, 65, 81, 0.5);
            --glass-border: 1px solid rgba(255, 255, 255, 0.1);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Pretendard', sans-serif; }

        body {
            background-color: var(--bg-color); color: var(--text-main);
            margin: 0; padding: 0; padding-bottom: 100px;
            transition: background-color 0.3s ease;
        }

        /* [Common UI Components] */
        .tap-effect { transition: transform 0.1s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .tap-effect:active { transform: scale(0.96); }

        header {
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.9), rgba(59, 130, 246, 0.85));
            backdrop-filter: var(--blur); -webkit-backdrop-filter: var(--blur);
            padding: 16px 0; text-align: center; position: sticky; top: 0; z-index: 100;
            border-bottom: 1px solid rgba(255,255,255,0.1); box-shadow: 0 4px 25px rgba(0,0,0,0.15);
        }
        header h1 { margin: 0; font-size: 1.35rem; font-weight: 900; color: white; letter-spacing: -0.5px; text-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        .theme-toggle { position: absolute; right: 20px; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); width: 36px; height: 36px; border-radius: 50%; font-size: 1.2rem; cursor: pointer; display: flex; align-items: center; justify-content: center; }

        .ticker-container { background: var(--accent); color: #000; font-weight: 700; font-size: 0.9rem; height: 40px; display: flex; align-items: center; overflow: hidden; }
        .ticker-item { padding-left: 100%; animation: ticker 25s linear infinite; white-space: nowrap; }
        @keyframes ticker { 100% { transform: translate3d(-100%, 0, 0); } }
        .ticker-controls button { background: none; border:none; padding: 0 12px; font-size: 1.1rem; }

        .container { width: 94%; max-width: 600px; margin: 24px auto; }
        .card { background: var(--card-bg); backdrop-filter: var(--blur); -webkit-backdrop-filter: var(--blur); border: var(--glass-border); border-radius: 24px; padding: 24px; margin-bottom: 24px; box-shadow: var(--glass-shadow); transition: transform 0.3s; }
        
        .section-header { display: flex; justify-content: space-between; align-items: center; padding-bottom: 15px; margin-bottom: 15px; border-bottom: 1px solid var(--border); cursor: pointer; }
        .section-title { font-size: 1.2rem; font-weight: 800; color: var(--text-main); display: flex; align-items: center; gap: 8px; }
        .toggle-icon { font-size: 0.9rem; color: var(--text-sub); transition: transform 0.3s; }
        .toggle-icon.rotated { transform: rotate(180deg); }
        .collapsible-content { display: block; animation: fadeIn 0.4s ease-out; }
        .collapsible-content.collapsed { display: none; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .input-field { width: 100%; padding: 14px; margin-bottom: 10px; border: 1px solid var(--border); border-radius: 12px; background: rgba(255,255,255,0.4); color: var(--text-main); font-size: 1rem; transition: all 0.3s; }
        .input-field:focus { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2); outline: none; background: rgba(255,255,255,0.8); }
        .textarea-field { height: 100px; resize: none; }
        .action-btn { width: 100%; padding: 16px; border: none; border-radius: 14px; font-weight: 800; font-size: 1.05rem; color: white; cursor: pointer; background: var(--primary); box-shadow: 0 4px 15px rgba(30, 58, 138, 0.2); }
        .bg-submit { background: var(--success); } .bg-calc { background: linear-gradient(135deg, #ef4444, #b91c1c); } .bg-cancel { background: var(--text-sub); box-shadow: none; }

        .tab-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 24px; }
        .tab-btn { background: rgba(255,255,255,0.3); border: 1px solid var(--primary-light); color: var(--primary); padding: 16px; border-radius: 16px; font-weight: 800; text-align: center; cursor: pointer; font-size: 0.95rem; display: flex; flex-direction: column; align-items: center; position: relative; }
        .tab-btn.active { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3); transform: translateY(-2px); }
        .tab-sub { font-size: 0.75rem; font-weight: 500; margin-top: 4px; opacity: 0.85; }
        .lock-icon { position: absolute; top: 8px; right: 10px; font-size: 0.85rem; }

        .post-list { list-style: none; padding: 0; margin: 0; }
        .post-item { background: rgba(255,255,255,0.5); border-bottom: 1px solid var(--border); padding: 18px; cursor: pointer; }
        .post-title { font-weight: 700; font-size: 1rem; margin-bottom: 6px; display: block; color: var(--text-main); }
        .post-meta { font-size: 0.8rem; color: var(--text-sub); }
        .post-body { display: none; margin-top: 15px; padding: 15px; background: rgba(0,0,0,0.02); border-radius: 12px; font-size: 0.95rem; line-height: 1.6; border-left: 4px solid var(--primary); }

        .terminal-block { background: rgba(0,0,0,0.02); border-radius: 16px; padding: 18px; margin-bottom: 15px; border: 1px solid var(--border); }
        .terminal-title { font-size: 1.05rem; font-weight: 800; color: var(--primary); margin: 0 0 12px 0; }
        .terminal-actions { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .terminal-btn { background: var(--card-bg); border: 1px solid var(--border); color: var(--text-main); padding: 14px 5px; border-radius: 12px; text-decoration: none; font-size: 0.85rem; text-align: center; font-weight: 700; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(0,0,0,0.02); }
        .btn-premium { grid-column: span 3; background: linear-gradient(135deg, #fffbeb, #fef3c7); border: 2px solid #fcd34d; color: #92400e; margin-top: 10px; }
        .dark-mode .btn-premium { background: linear-gradient(135deg, #451a03, #78350f); border-color: #b45309; color: #fcd34d; }

        .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; height: 75px; background: rgba(255,255,255,0.9); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-top: 1px solid var(--border); display: flex; justify-content: space-around; align-items: center; z-index: 1000; padding-bottom: env(safe-area-inset-bottom); box-shadow: 0 -5px 20px rgba(0,0,0,0.05); }
        .dark-mode .bottom-nav { background: rgba(30, 41, 59, 0.9); }
        .nav-item { flex: 1; text-align: center; color: var(--text-sub); font-size: 0.75rem; cursor: pointer; display: flex; flex-direction: column; align-items: center; transition: all 0.3s; }
        .nav-item.active { color: var(--primary); font-weight: 800; transform: translateY(-4px); }
        .nav-icon { font-size: 1.6rem; margin-bottom: 4px; }

        .wage-row { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
        .wage-row label { flex: 1; font-weight: 700; font-size: 0.95rem; white-space: nowrap; }
        .wage-result-box { background: linear-gradient(135deg, #fff7ed, #ffedd5); border: 2px solid var(--accent); border-radius: 18px; padding: 25px; text-align: center; margin-top: 25px; box-shadow: 0 10px 30px rgba(245, 158, 11, 0.15); }
        .wage-total { font-size: 2.2rem; color: #c2410c; font-weight: 900; letter-spacing: -1.5px; margin-top: 5px; }

        .skeleton { background: linear-gradient(90deg, var(--border) 25%, var(--bg-color) 50%, var(--border) 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; border-radius: 8px; color: transparent !important; pointer-events: none; }
        @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

        .hidden { display: none !important; }
        .mini-btn { padding: 5px 10px; font-size: 0.75rem; border-radius: 8px; border: none; cursor: pointer; color: white; margin-left: 6px; font-weight: 600; }
        .btn-del { background: var(--danger); } .btn-edit { background: var(--primary-light); } .btn-photo { background: var(--success); }
        .pagination { display: flex; justify-content: center; gap: 8px; margin-top: 20px; }
        .page-num { padding: 8px 14px; background: var(--card-bg); border: 1px solid var(--border); border-radius: 8px; cursor: pointer; font-weight: 700; }
        .page-num.active { background: var(--primary); color: white; border-color: var(--primary); }
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 3000; justify-content: center; align-items: center; backdrop-filter: blur(5px); }
        .modal-content { background: var(--card-bg); padding: 20px; border-radius: 20px; max-width: 90%; max-height: 80%; overflow-y: auto; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.3); }
        .modal-img { max-width: 100%; border-radius: 10px; }
        .ad-placeholder { background: var(--bg-color); border: 1px solid var(--border); border-radius: 8px; padding: 10px; text-align: center; margin-bottom: 15px; overflow: hidden; }

        /* [Guide Text Style for AdSense] */
        .guide-text { line-height: 1.8; font-size: 0.95rem; color: var(--text-main); text-align: left; }
        .guide-text h4 { color: var(--primary); margin: 20px 0 10px 0; border-left: 4px solid var(--accent); padding-left: 10px; }
        .guide-text p { margin-bottom: 10px; }
        .guide-text ul { padding-left: 20px; margin-bottom: 15px; }
        
        /* [Footer] */
        footer { text-align: center; padding: 30px 20px; color: var(--text-sub); font-size: 0.8rem; margin-bottom: 80px; }
        .footer-link { cursor: pointer; text-decoration: underline; margin: 0 5px; }
    </style>
</head>
<body>

    <header>
        <h1>BUSAN HAK PORT</h1>
        <button class="theme-toggle tap-effect" onclick="toggleDarkMode()">ğŸŒ™</button>
    </header>

    <div id="safetyTicker" class="ticker-container hidden">
        <div class="ticker-wrap"><div id="tickerText" class="ticker-item"></div></div>
        <div class="ticker-controls"><button class="ticker-btn tap-effect" onclick="updateBanner()">âœï¸</button></div>
    </div>

    <div class="container">
        <div id="section-community" class="card">
            <div class="section-header tap-effect" onclick="toggleSection('comm-content', this)">
                <span class="section-title">ğŸ“Š í˜„ì¥ ì •ë³´ & ì»¤ë®¤ë‹ˆí‹°</span>
                <span class="toggle-icon">â–¼</span>
            </div>
            
            <div id="comm-content" class="collapsible-content">
                <div class="tab-grid">
                    <div class="tab-btn tap-effect" onclick="toggleTab('guideArea', this)">ğŸ“˜ ì´ìš©ê°€ì´ë“œ<div class="tab-sub">ì‚¬ìš©ë²•/íŒ</div></div>
                    <div class="tab-btn tap-effect" onclick="toggleTab('noticeArea', this)">ğŸ“¢ ê³µì§€ì‚¬í•­<div class="tab-sub">í•„ë…</div></div>
                    <div class="tab-btn tap-effect" onclick="toggleTab('boardArea', this)">ğŸ’¬ ìµëª…ê²Œì‹œíŒ<div class="tab-sub">ììœ ì†Œí†µ</div></div>
                    <div class="tab-btn tap-effect" onclick="toggleTab('shipInfoArea', this)">ğŸš¢ ì„ ë°•ì •ë³´<div class="tab-sub">ì‹¤ì‹œê°„ ê³µìœ </div></div>
                    <div class="tab-btn tap-effect" style="grid-column: span 2; border-color:var(--danger); color:var(--danger);" onclick="toggleTab('wageArea', this)">
                        ğŸ’° ì„ê¸ˆ ê³„ì‚°ê¸° (Pro)
                        <div class="tab-sub" style="color:inherit;">1.5ë°° ìˆ˜ë‹¹ ìë™ê³„ì‚°</div>
                    </div>
                    <div class="tab-btn tap-effect" style="grid-column: span 2; border-color:var(--primary); color:var(--primary);" onclick="checkAdminAndOpenLog(this)">
                        ğŸ“… ìŠ¤ë§ˆíŠ¸ ê·¼ë¬´ì¼ì§€
                        <div class="tab-sub">ê´€ë¦¬ì ì „ìš© (Beta)</div>
                        <span class="lock-icon">ğŸ”’</span>
                    </div>
                </div>

                <div id="guideArea" class="hidden">
                    <div class="guide-text">
                        <h3>âš“ ë¶€ì‚°í•­ í˜„ì¥ì§ì„ ìœ„í•œ í•„ìˆ˜ ê°€ì´ë“œ</h3>
                        <p>BUSAN HAK PORT INFOëŠ” ë¶€ì‚°í•­ í•­ìš´ë…¸ì¡°ì› ë° í˜„ì¥ ê·¼ë¡œìë¶„ë“¤ì˜ ì—…ë¬´ íš¨ìœ¨ì„ ë†’ì´ê¸° ìœ„í•´ ì œì‘ëœ í†µí•© í”Œë«í¼ì…ë‹ˆë‹¤.</p>
                        
                        <h4>1. 2026ë…„ ì„ê¸ˆ ê³„ì‚°ê¸° í™œìš©ë²•</h4>
                        <p>ë¶ˆê·œì¹™í•œ í•­ë§Œ ê·¼ë¬´ íŠ¹ì„±ì„ ë°˜ì˜í•˜ì—¬ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹œê¸‰ì„ ì…ë ¥í•˜ê³  ê·¼ë¬´ ì‹œê°„ì„ ë„£ìœ¼ë©´ ì£¼ê°„, ì•¼ê°„/íœ´ì¼(1.5ë°°) ìˆ˜ë‹¹ì´ ìë™ í•©ì‚°ë©ë‹ˆë‹¤.</p>
                        <ul>
                            <li><strong>ê¸°ëŠ¥ê³µ/ì ˆë§ì´ ìˆ˜ë‹¹:</strong> íŠ¹ìˆ˜ ì‘ì—… ì‹œ ì¶”ê°€ë˜ëŠ” ìˆ˜ë‹¹ì„ ë³„ë„ í•­ëª©ìœ¼ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤.</li>
                            <li><strong>ìš°ì²œ ìˆ˜ë‹¹:</strong> ìš°ì²œ ì‹œ ì‘ì—…ì— ëŒ€í•œ ì¶”ê°€ ë³´ìƒì„ í¬í•¨í•©ë‹ˆë‹¤.</li>
                        </ul>

                        <h4>2. ìŠ¤ë§ˆíŠ¸ ê·¼ë¬´ì¼ì§€ (Beta)</h4>
                        <p>ë§¤ì¼ì˜ ê·¼ë¬´ ë‚´ìš©ì„ ë‹¬ë ¥ì— ê¸°ë¡í•˜ì—¬ ì›”ë³„ ì˜ˆìƒ ìˆ˜ë ¹ì•¡ì„ í•œëˆˆì— íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜„ì¬ ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ìš´ì˜ ì¤‘ì´ë©° ê³§ ì •ì‹ ì˜¤í”ˆ ì˜ˆì •ì…ë‹ˆë‹¤.</p>

                        <h4>3. ì•ˆì „ ì‘ì—… ìˆ˜ì¹™</h4>
                        <p>ì•ˆì „ëª¨, ì•ˆì „í™” ë“± ê°œì¸ ë³´í˜¸êµ¬ ì°©ìš©ì„ ìƒí™œí™”í•©ì‹œë‹¤. ì»¨í…Œì´ë„ˆ ì‘ì—… ì‹œ ë¼ì‹±ë°” ì²´ê²° ìƒíƒœë¥¼ ìˆ˜ì‹œë¡œ í™•ì¸í•˜ì—¬ ë‚™í•˜ ì‚¬ê³ ë¥¼ ì˜ˆë°©í•´ì•¼ í•©ë‹ˆë‹¤.</p>
                    </div>
                </div>

                <div id="noticeArea" class="hidden">
                    <div class="form-box" style="border-left: 4px solid var(--danger);">
                        <h4 style="margin:0 0 10px 0; color:var(--danger);">ğŸ“¢ ê³µì§€ ë“±ë¡ (ê´€ë¦¬ì)</h4>
                        <input type="text" id="noticeTitle" class="input-field tap-effect" placeholder="ì œëª©">
                        <textarea id="noticeContent" class="input-field textarea-field tap-effect" placeholder="ë‚´ìš©"></textarea>
                        <button class="action-btn bg-submit tap-effect" onclick="addNotice()">ê³µì§€ ë“±ë¡</button>
                    </div>
                    <ul id="noticeList" class="post-list">
                        <li class="post-item skeleton" style="height:60px; margin-bottom:5px;"></li>
                    </ul>
                </div>

                <div id="boardArea" class="hidden">
                    <button class="action-btn tap-effect" style="background:var(--text-sub); margin-bottom:15px;" onclick="toggleHidden('boardForm')">âœï¸ ê¸€ì“°ê¸°</button>
                    <div id="boardForm" class="form-box hidden">
                        <select id="inputCategory" class="input-field tap-effect"><option>ğŸ’¬ ì¡ë‹´</option><option>â„¹ï¸ ì •ë³´</option><option>â“ ì§ˆë¬¸</option></select>
                        <input type="text" id="inputTitle" class="input-field tap-effect" placeholder="ì œëª©">
                        <div style="display:flex; gap:8px;">
                            <input type="text" id="inputName" class="input-field tap-effect" placeholder="ë‹‰ë„¤ì„">
                            <input type="password" id="inputPw" class="input-field tap-effect" placeholder="ë¹„ë²ˆ">
                        </div>
                        <textarea id="inputContent" class="input-field textarea-field tap-effect" placeholder="ë‚´ìš©"></textarea>
                        <button class="action-btn bg-submit tap-effect" onclick="addPost()">ë“±ë¡</button>
                    </div>
                    <ul id="boardList" class="post-list">
                        <li class="post-item skeleton" style="height:80px; margin-bottom:5px;"></li>
                    </ul>
                    <div id="pagination" class="pagination"></div>
                </div>

                <div id="shipInfoArea" class="hidden">
                    <button class="action-btn tap-effect" style="background:var(--accent); margin-bottom:12px;" onclick="toggleHidden('shipForm')">ğŸš¢ ì„ ë°• ì •ë³´ ë“±ë¡/ìˆ˜ì •</button>
                    <a href="https://www.marinetraffic.com/" target="_blank" class="action-btn tap-effect" style="background:#0284c7; text-align:center; display:block; text-decoration:none; margin-bottom:15px;">ğŸŒ ì‹¤ì‹œê°„ ì§€ë„ í™•ì¸</a>
                    <div id="shipForm" class="form-box hidden">
                        <input type="text" id="shipName" class="input-field tap-effect" placeholder="ì„ ë°•ëª… (í•„ìˆ˜)">
                        <input type="file" id="shipFileInput" accept="image/*" class="input-field tap-effect">
                        <textarea id="shipOnboard" class="input-field textarea-field tap-effect" placeholder="ë³¸ì„  ì‘ì—… íŠ¹ì§•"></textarea>
                        <textarea id="shipOnshore" class="input-field textarea-field tap-effect" placeholder="ìœ¡ìƒ ì‘ì—… íŠ¹ì§•"></textarea>
                        <button id="shipSubmitBtn" class="action-btn bg-submit tap-effect" onclick="addShipInfo()">ë“±ë¡</button>
                    </div>
                    <ul id="shipList" class="post-list">
                        <li class="post-item skeleton" style="height:80px;"></li>
                    </ul>
                    <div id="shipPagination" class="pagination"></div>
                </div>

                <div id="fileArea" class="hidden">
                    <input type="text" id="fileSearch" class="input-field tap-effect" placeholder="ìë£Œ ê²€ìƒ‰..." onkeyup="filterFiles()">
                    <div class="form-box">
                        <input type="text" id="fileTitle" class="input-field tap-effect" placeholder="ìë£Œ ì œëª©">
                        <input type="file" id="fileInput" class="input-field tap-effect">
                        <button class="action-btn bg-submit tap-effect" onclick="uploadFile()">ì—…ë¡œë“œ</button>
                        <div id="fileLoading" class="hidden">ì—…ë¡œë“œ ì¤‘...</div>
                    </div>
                    <ul id="fileList" class="post-list"></ul>
                    <div id="filePagination" class="pagination"></div>
                </div>

                <div id="wageArea" class="hidden">
                    <div class="form-box" style="border: 2px solid var(--danger);">
                        <h4 style="margin:0 0 15px 0; color:var(--danger); text-align:center;">ğŸ’° ê¸‰ì—¬ ì‹œë®¬ë ˆì´í„°</h4>
                        <div class="wage-row"><label>ì‹œê¸‰</label><input type="number" id="wageHourly" class="input-field tap-effect" value="10030" style="text-align:right;">ì›</div>
                        <div class="wage-row"><label>â˜€ï¸ ì£¼ê°„</label><input type="number" id="wageDayHours" class="input-field tap-effect" placeholder="ì‹œê°„" style="text-align:right;">H</div>
                        <div class="wage-row"><label>ğŸŒ™ ì•¼ê°„/íœ´ì¼ (1.5ë°°)</label><input type="number" id="wageNightHours" class="input-field tap-effect" placeholder="ì‹œê°„" style="text-align:right;">H</div>
                        
                        <div style="margin: 20px 0; border-top:1px dashed var(--border); padding-top:15px;">
                            <span style="font-size:0.8rem; color:var(--text-sub); display:block; margin-bottom:8px;">â–¼ ìˆ˜ë‹¹ (ì‹œê°„ Ã— ë‹¨ê°€)</span>
                            <div class="wage-row"><label>ğŸ”§ ê¸°ëŠ¥ê³µ ìˆ˜ë‹¹</label><input type="number" id="wageSkillTime" class="input-field tap-effect" placeholder="ì‹œê°„" style="text-align:right;"><input type="number" id="wageSkillRate" class="input-field tap-effect" placeholder="ë‹¨ê°€" style="text-align:right;"></div>
                            <div class="wage-row"><label>ğŸ—ï¸ ì ˆë§ì´ ìˆ˜ë‹¹</label><input type="number" id="wageSignalTime" class="input-field tap-effect" placeholder="ì‹œê°„" style="text-align:right;"><input type="number" id="wageSignalRate" class="input-field tap-effect" placeholder="ë‹¨ê°€" style="text-align:right;"></div>
                            <div class="wage-row"><label>â˜” ìš°ì²œ ìˆ˜ë‹¹</label><input type="number" id="wageRainTime" class="input-field tap-effect" placeholder="ì‹œê°„" style="text-align:right;"><input type="number" id="wageRainRate" class="input-field tap-effect" placeholder="ë‹¨ê°€" style="text-align:right;"></div>
                        </div>

                        <select id="wageTaxType" class="input-field tap-effect">
                            <option value="0">ê³µì œ ì—†ìŒ (0%)</option>
                            <option value="0.033">í”„ë¦¬ëœì„œ (3.3%)</option>
                            <option value="0.094">4ëŒ€ë³´í—˜ ì•½ì‹ (ì•½ 9.4%)</option>
                        </select>
                        <div style="display:flex; gap:12px; margin-top:20px;">
                            <button class="action-btn bg-calc tap-effect" style="flex:2" onclick="calculateWage()">ğŸ§® ê³„ì‚°í•˜ê¸°</button>
                            <button class="action-btn bg-cancel tap-effect" style="flex:1" onclick="resetWageForm()">ğŸ”„ ì´ˆê¸°í™”</button>
                        </div>
                        <div id="wageResultBox" class="wage-result-box hidden">
                            <div style="font-size:0.9rem; color:#666;">ì˜ˆìƒ ì‹¤ìˆ˜ë ¹ì•¡</div>
                            <div id="wageTotal" class="wage-total">0ì›</div>
                        </div>
                    </div>
                </div>

                <div id="workLogArea" class="hidden">
                    <div class="calendar-header">
                        <button class="mini-btn tap-effect" onclick="changeMonth(-1)" style="font-size:1.2rem; background:none; color:var(--text-main);">â—€</button>
                        <span id="calMonthYear"></span>
                        <button class="mini-btn tap-effect" onclick="changeMonth(1)" style="font-size:1.2rem; background:none; color:var(--text-main);">â–¶</button>
                    </div>
                    <div class="calendar-grid" id="calendarGrid"></div>
                    
                    <div id="dailyLogForm" class="hidden" style="margin-top:20px; padding:20px; background:rgba(0,0,0,0.03); border-radius:16px;">
                        <h4 style="margin:0 0 15px 0; color:var(--primary); display:flex; justify-content:space-between;">
                            <span id="selectedDateText"></span>
                            <span id="dailyTotalDisplay" style="color:var(--danger);">0ì›</span>
                        </h4>
                        
                        <div class="chip-container">
                            <button class="chip-btn tap-effect" onclick="fillLog(8,0,0)">â˜€ï¸ ì£¼ê°„8H</button>
                            <button class="chip-btn tap-effect" onclick="fillLog(8,4,0)">ğŸŒ“ í’€íƒ€ì„</button>
                            <button class="chip-btn tap-effect" onclick="fillLog(0,8,0)">ğŸŒ™ ì•¼ê°„8H</button>
                            <button class="chip-btn tap-effect" style="border-color:var(--text-sub); color:var(--text-sub);" onclick="fillLog(0,0,0)">ğŸ”„ ì´ˆê¸°í™”</button>
                        </div>

                        <div class="wage-row"><label>ì£¼ê°„</label><input type="number" id="logDayHours" class="input-field tap-effect" placeholder="ì‹œê°„" style="text-align:right;" step="0.5"></div>
                        <div class="wage-row"><label>ì•¼ê°„/íœ´ì¼</label><input type="number" id="logNightHours" class="input-field tap-effect" placeholder="ì‹œê°„" style="text-align:right;" step="0.5"></div>
                        
                        <div style="border-top:1px dashed var(--border); margin:10px 0; padding-top:5px;">
                            <div class="wage-row"><label>ğŸ”§ ê¸°ëŠ¥ê³µ</label><input type="number" id="logSkillTime" class="input-field tap-effect" placeholder="ì‹œê°„"><input type="number" id="logSkillRate" class="input-field tap-effect" placeholder="ë‹¨ê°€"></div>
                            <div class="wage-row"><label>ğŸ—ï¸ ì ˆë§ì´</label><input type="number" id="logSignalTime" class="input-field tap-effect" placeholder="ì‹œê°„"><input type="number" id="logSignalRate" class="input-field tap-effect" placeholder="ë‹¨ê°€"></div>
                            <div class="wage-row"><label>â˜” ìš°ì²œ</label><input type="number" id="logRainTime" class="input-field tap-effect" placeholder="ì‹œê°„"><input type="number" id="logRainRate" class="input-field tap-effect" placeholder="ë‹¨ê°€"></div>
                        </div>

                        <div style="display:flex; gap:10px;">
                            <button class="action-btn bg-submit tap-effect" onclick="saveWorkLog()">ì €ì¥</button>
                            <button class="action-btn bg-cancel tap-effect" style="background:var(--danger);" onclick="deleteWorkLog()">ì‚­ì œ</button>
                        </div>
                    </div>
                    <div style="background:var(--card-bg); border:1px solid var(--primary); padding:20px; border-radius:16px; margin-top:20px; text-align:center;">
                        <div style="font-size:0.9rem; color:var(--text-sub);">ì´ë²ˆ ë‹¬ ì´ ì˜ˆìƒ ìˆ˜ë ¹ì•¡</div>
                        <div id="monthlyTotalDisplay" style="font-size:2rem; font-weight:900; color:var(--primary);">0ì›</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="section-header tap-effect" onclick="toggleSection('t3-content', this)">
                <span class="section-title">ğŸ­ 3í•­ì—… (ì‹ í•­ ë‚¨ì¸¡)</span>
                <span class="toggle-icon">â–¼</span>
            </div>
            <div id="t3-content" class="collapsible-content">
                <div class="terminal-block">
                    <h4 class="terminal-title">í•œì§„ì‹ í•­ë§Œ (HJNC)</h4>
                    <div class="terminal-actions">
                        <a href="https://www.hjnc.co.kr/esvc/vessel/berthScheduleT" target="_blank" class="terminal-btn tap-effect">ğŸ“… ìŠ¤ì¼€ì¤„</a>
                        <a href="https://www.hjnc.co.kr/esvc/vessel/berthScheduleG" target="_blank" class="terminal-btn tap-effect">ğŸ“Š ì°¨íŠ¸</a>
                        <a href="https://www.hjnc.co.kr/esvc/vessel/vesselStatus" target="_blank" class="terminal-btn tap-effect">ğŸ—ï¸ í˜„í™©</a>
                        <a href="http://bayplan.hjnc.co.kr" target="_blank" class="terminal-btn btn-premium tap-effect">ğŸ§© BAY PLAN (PRO)</a>
                    </div>
                </div>
                <div class="terminal-block"><h4 class="terminal-title">ë™ì›ë¡œì—‘ìŠ¤ (DGT)</h4><div class="terminal-actions"><a href="https://www.dgtbusan.com/DGT/esvc/vessel/berthScheduleT" target="_blank" class="terminal-btn tap-effect">ğŸ“… ìŠ¤ì¼€ì¤„</a><a href="https://www.dgtbusan.com/DGT/esvc/vessel/berthScheduleG" target="_blank" class="terminal-btn tap-effect">ğŸ“Š ì°¨íŠ¸</a><a href="https://www.dgtbusan.com/DGT/esvc/vessel/vesselStatus" target="_blank" class="terminal-btn tap-effect">ğŸ—ï¸ í˜„í™©</a></div></div>
                <div class="terminal-block"><h4 class="terminal-title">ë¶€ì‚°ì‹ í•­ì»¨í…Œì´ë„ˆ (BNCT)</h4><div class="terminal-actions"><a href="https://info.bnctkorea.com/esvc/vessel/berthScheduleT" target="_blank" class="terminal-btn tap-effect">ğŸ“… ìŠ¤ì¼€ì¤„</a><a href="https://info.bnctkorea.com/esvc/vessel/berthScheduleG" target="_blank" class="terminal-btn tap-effect">ğŸ“Š ì°¨íŠ¸</a><a href="https://info.bnctkorea.com/esvc/vessel/vesselStatus" target="_blank" class="terminal-btn tap-effect">ğŸ—ï¸ í˜„í™©</a></div></div>
                <div class="terminal-block"><h4 class="terminal-title">ë¶€ì‚°ì»¨í…Œì´ë„ˆí„°ë¯¸ë„ (BCT)</h4><div class="terminal-actions"><a href="https://info.bct2-4.com/infoservice/index.html" target="_blank" class="terminal-btn tap-effect">ğŸ“… ìŠ¤ì¼€ì¤„</a><a href="https://info.bct2-4.com/infoservice/index.html" target="_blank" class="terminal-btn tap-effect">ğŸ“Š ì°¨íŠ¸</a><a href="https://info.bct2-4.com/infoservice/index.html" target="_blank" class="terminal-btn tap-effect">ğŸ—ï¸ í˜„í™©</a></div></div>
            </div>
        </div>

        <div class="card">
            <div class="section-header tap-effect" onclick="toggleSection('t2-content', this)">
                <span class="section-title">ğŸ­ 2í•­ì—… (ì‹ í•­ ë¶ì¸¡)</span>
                <span class="toggle-icon rotated">â–¼</span>
            </div>
            <div id="t2-content" class="collapsible-content collapsed">
                <div class="terminal-block">
                    <h4 class="terminal-title">ë¶€ì‚°ì‹ í•­ë§Œ (PNC)</h4>
                    <div class="terminal-actions">
                        <a href="https://svc.pncport.com/info/CMS/Ship/Info.pnc?mCode=MN014" target="_blank" class="terminal-btn tap-effect">ğŸ“… ìŠ¤ì¼€ì¤„</a>
                        <a href="https://svc.pncport.com/info/CMS/Ship/ShipBerthC.pnc?mCode=MN019" target="_blank" class="terminal-btn tap-effect">ğŸ“Š ì°¨íŠ¸</a>
                        <a href="https://svc.pncport.com/info/CMS/Ship/ShipVslStatus.pnc?mCode=MN020" target="_blank" class="terminal-btn tap-effect">ğŸ—ï¸ í˜„í™©</a>
                    </div>
                    <button class="action-btn tap-effect" style="background:#f39c12; margin-top:10px; font-size:0.9rem;" onclick="openBusSchedule()">ğŸšŒ ì…”í‹€ë²„ìŠ¤ ì‹œê°„í‘œ</button>
                </div>
                <div class="terminal-block"><h4 class="terminal-title">ì‹ í•­êµ­ì œ (PNIT)</h4><div class="terminal-actions"><a href="https://www.pnitl.com/infoservice/vessel/vslScheduleList.jsp" target="_blank" class="terminal-btn tap-effect">ğŸ“… ìŠ¤ì¼€ì¤„</a><a href="https://www.pnitl.com/infoservice/vessel/vslScheduleChart.jsp" target="_blank" class="terminal-btn tap-effect">ğŸ“Š ì°¨íŠ¸</a><a href="https://www.pnitl.com/infoservice/vessel/vslWorkStatus.jsp" target="_blank" class="terminal-btn tap-effect">ğŸ—ï¸ í˜„í™©</a></div></div>
                <div class="terminal-block"><h4 class="terminal-title">í˜„ëŒ€ë¶€ì‚°ì‹ í•­ë§Œ (HPNT)</h4><div class="terminal-actions"><a href="https://www.hpnt.co.kr/infoservice/vessel/vslScheduleList.jsp" target="_blank" class="terminal-btn tap-effect">ğŸ“… ìŠ¤ì¼€ì¤„</a><a href="https://www.hpnt.co.kr/infoservice/vessel/vslScheduleChart.jsp" target="_blank" class="terminal-btn tap-effect">ğŸ“Š ì°¨íŠ¸</a><a href="https://www.hpnt.co.kr/infoservice/vessel/vslWorkStatus.jsp" target="_blank" class="terminal-btn tap-effect">ğŸ—ï¸ í˜„í™©</a></div></div>
            </div>
        </div>

        <div class="card">
            <div class="section-header tap-effect" onclick="toggleSection('t1-content', this)">
                <span class="section-title">ğŸ­ 1í•­ì—… (ë¶í•­)</span>
                <span class="toggle-icon rotated">â–¼</span>
            </div>
            <div id="t1-content" class="collapsible-content collapsed">
                <div class="terminal-block"><h4 class="terminal-title">ë¶í•­ í†µí•© (BPTC)</h4><a href="http://info.bptc.co.kr:9084/content/sw/frame/berth_status_text_frame_sw_kr.jsp?p_id=BETX_SH_KR&snb_num=2&snb_div=service" target="_blank" class="terminal-btn tap-effect">ğŸ—ï¸ ê°ë§Œ/ì‹ ì„ ëŒ€ ì„ ì„</a></div>
                <div class="terminal-block"><h4 class="terminal-title">í—ˆì¹˜ìŠ¨ (HBCT)</h4><a href="https://custom.hktl.com/jsp/T01/sunsuk.jsp" target="_blank" class="terminal-btn tap-effect">âš“ ì„ ì„ ì •ë³´</a></div>
                <div class="terminal-block"><h4 class="terminal-title">ë™ë¶€ (DPCT)</h4><a href="http://info.bptc.co.kr:9084/content/index.jsp#03" target="_blank" class="terminal-btn tap-effect">ğŸš¢ í„°ë¯¸ë„ í¬í„¸</a></div>
            </div>
        </div>

        <div class="card">
            <div class="section-header tap-effect" onclick="toggleSection('control-content', this)">
                <span class="section-title">ğŸ“¡ ê´€ì œ ë° ë‚ ì”¨</span>
                <span class="toggle-icon rotated">â–¼</span>
            </div>
            <div id="control-content" class="collapsible-content collapsed">
                <div class="dashboard-grid">
                    <a href="http://www.busanpilot.co.kr/popup/monitoring" class="dash-btn tap-effect" target="_blank"><span>ğŸ›¥ï¸</span>ë„ì„ <br>ëª¨ë‹ˆí„°</a>
                    <a href="https://new.portmis.go.kr/" class="dash-btn tap-effect" target="_blank"><span>ğŸ“‘</span>PORT<br>MIS</a>
                    <a href="https://weather.naver.com/today/08440585" class="dash-btn tap-effect" target="_blank" style="color:var(--danger);"><span>â˜€ï¸</span>ë¶€ì‚°<br>ë‚ ì”¨</a>
                </div>
            </div>
        </div>

        <div class="card" style="padding:15px; text-align:center;">
            <div style="font-size:0.8rem; color:#aaa; margin-bottom:8px;">â–¼ ê´‘ê³  (ì„œë²„ ìš´ì˜ë¹„)</div>
            <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6024353303588422" data-ad-slot="1234567890" data-ad-format="auto" data-full-width-responsive="true"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
        </div>

        <footer>
            <p>Â© 2024 BUSAN HAK PORT INFO. All rights reserved.</p>
            <div style="margin-top:10px;">
                <span class="footer-link" onclick="openPrivacy()">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</span> | 
                <span class="footer-link" onclick="alert('ì´ìš©ì•½ê´€: ë³¸ ì„œë¹„ìŠ¤ëŠ” í˜„ì¥ ë³´ì¡°ìš©ì´ë©° ë²•ì  íš¨ë ¥ì´ ì—†ìŠµë‹ˆë‹¤.')">ì´ìš©ì•½ê´€</span>
            </div>
        </footer>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active tap-effect" onclick="scrollToTop()"><span class="nav-icon">ğŸ </span>í™ˆ</div>
        <div class="nav-item tap-effect" onclick="activateTab('boardArea')"><span class="nav-icon">ğŸ’¬</span>í†¡í†¡</div>
        <div class="nav-item tap-effect" onclick="activateTab('shipInfoArea')"><span class="nav-icon">ğŸš¢</span>ì„ ë°•</div>
        <div class="nav-item tap-effect" onclick="activateTab('fileArea')"><span class="nav-icon">ğŸ“‚</span>ìë£Œ</div>
    </nav>

    <div id="toast">ì•Œë¦¼ ë©”ì‹œì§€</div>
    <div id="imageModal" class="modal-overlay" onclick="closeImageModal()"><div class="modal-content" onclick="event.stopPropagation()"><img id="modalImage" class="modal-img"><button class="action-btn bg-cancel tap-effect" onclick="closeImageModal()" style="margin-top:15px;">ë‹«ê¸°</button></div></div>
    
    <div id="privacyModal" class="modal-overlay" onclick="document.getElementById('privacyModal').style.display='none'">
        <div class="modal-content" style="text-align:left;">
            <h3>ğŸ›¡ï¸ ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</h3>
            <p style="font-size:0.9rem; line-height:1.6; color:var(--text-main);">
                <strong>1. ê°œì¸ì •ë³´ì˜ ì²˜ë¦¬ ëª©ì </strong><br>
                ë³¸ ì•±ì€ ì„œë¹„ìŠ¤ ì œê³µ(ê²Œì‹œíŒ ì´ìš©, ì„ê¸ˆ ê³„ì‚° ë“±)ì„ ìœ„í•´ í•„ìš”í•œ ìµœì†Œí•œì˜ ì •ë³´ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.<br><br>
                <strong>2. ìˆ˜ì§‘í•˜ëŠ” í•­ëª©</strong><br>
                - ë‹‰ë„¤ì„, ì„ê¸ˆ ê³„ì‚°ê¸° ì…ë ¥ ê°’ (ë¡œì»¬ ì €ì¥), ì´ìš© ê¸°ë¡<br><br>
                <strong>3. ì¿ í‚¤ì˜ ì‚¬ìš©</strong><br>
                - êµ¬ê¸€ ì• ë“œì„¼ìŠ¤ ê´‘ê³  ì†¡ì¶œì„ ìœ„í•´ ì¿ í‚¤ê°€ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ë¸Œë¼ìš°ì € ì„¤ì •ì„ í†µí•´ ì¿ í‚¤ ì €ì¥ì„ ê±°ë¶€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><br>
                ë¬¸ì˜: admin@busanport.app
            </p>
            <button class="action-btn bg-cancel" onclick="document.getElementById('privacyModal').style.display='none'">ë‹«ê¸°</button>
        </div>
    </div>

    <script>
        // [Firebase Setup]
        const firebaseConfig = { apiKey: "AIzaSyBDXy5HcYW-IZQJ9ZDEivr_yi99AxhYme8", authDomain: "my-app-d8527.firebaseapp.com", projectId: "my-app-d8527", storageBucket: "my-app-d8527.firebasestorage.app", messagingSenderId: "667323279185", appId: "1:667323279185:web:cff6184aaa82e08d345570", measurementId: "G-HZQLF0L77P" };
        let db, storage;
        let allPostsData=[], allShipsData=[], allFilesData=[];
        let currentBoardPage=1, currentShipPage=1, currentFilePage=1;
        const postsPerPage=5;
        let adminWorkLogs = {};

        try {
            if (firebase.apps.length === 0) firebase.initializeApp(firebaseConfig);
            db = firebase.firestore();
            storage = firebase.storage();
            loadAllData();
            loadBanner();
            if(localStorage.getItem('theme')==='dark') document.body.classList.add('dark-mode');
        } catch(e) { console.error(e); }

        // [Helpers]
        function vibrate() { if(navigator.vibrate) navigator.vibrate(15); } 
        document.querySelectorAll('.tap-effect').forEach(el => el.addEventListener('click', vibrate));

        function showToast(msg) { const t=document.getElementById("toast"); t.innerText=msg; t.className="show"; setTimeout(()=>{t.className=t.className.replace("show","")},3000); }
        function toggleDarkMode() { document.body.classList.toggle('dark-mode'); localStorage.setItem('theme', document.body.classList.contains('dark-mode')?'dark':'light'); vibrate(); }
        function scrollToTop() { window.scrollTo({top:0, behavior:'smooth'}); }
        function toggleHidden(id) { document.getElementById(id).classList.toggle('hidden'); }
        function toggleSection(contentId, headerEl) { document.getElementById(contentId).classList.toggle('collapsed'); headerEl.querySelector('.toggle-icon').classList.toggle('rotated'); vibrate(); }
        function toggleContent(id) { const el = document.getElementById(id); el.style.display = (el.style.display === 'block') ? 'none' : 'block'; vibrate(); }

        function toggleTab(areaId, btn) {
            ['guideArea', 'noticeArea', 'boardArea', 'shipInfoArea', 'fileArea', 'wageArea', 'workLogArea'].forEach(id => document.getElementById(id).classList.add('hidden'));
            document.getElementById(areaId).classList.remove('hidden');
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            if(btn) btn.classList.add('active');
            vibrate();
        }
        function activateTab(targetId) {
            document.getElementById('section-community').scrollIntoView({behavior:'smooth'});
            const commContent = document.getElementById('comm-content');
            if(commContent.classList.contains('collapsed')) { commContent.classList.remove('collapsed'); document.querySelector('#section-community .toggle-icon').classList.add('rotated'); }
            const btnMap = {'noticeArea':1, 'boardArea':2, 'shipInfoArea':3, 'fileArea':4};
            const btns = document.querySelectorAll('.tab-btn');
            if(btns[btnMap[targetId]]) btns[btnMap[targetId]].click();
        }
        function openPrivacy(){document.getElementById('privacyModal').style.display='flex'}

        // [One-Touch Logic]
        function fillLog(d, n, a) {
            if(d !== null) document.getElementById('logDayHours').value = d;
            if(n !== null) document.getElementById('logNightHours').value = n;
            if(a === 0 && d === 0 && n === 0) { document.querySelectorAll('#dailyLogForm input').forEach(i=>i.value=''); }
            vibrate();
        }

        // [Admin Log]
        let currentYear, currentMonth, selectedDateStr = null;
        function checkAdminAndOpenLog(btn) {
            if (prompt("ê´€ë¦¬ì ì•”í˜¸:") === "0346") {
                toggleTab('workLogArea', btn);
                const now = new Date();
                renderCalendar(now.getFullYear(), now.getMonth());
            } else showToast("â›” ì ‘ê·¼ ë¶ˆê°€");
        }
        function renderCalendar(year, month) {
            currentYear = year; currentMonth = month;
            const dt = new Date(year, month, 1);
            document.getElementById('calMonthYear').innerText = `${year}ë…„ ${month + 1}ì›”`;
            const grid = document.getElementById('calendarGrid'); grid.innerHTML = '';
            ['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '].forEach(d => grid.innerHTML += `<div style="font-weight:bold;color:var(--text-sub);font-size:0.8rem;">${d}</div>`);
            for(let i=0; i<dt.getDay(); i++) grid.innerHTML += `<div class="cal-day" style="background:transparent;border:none;"></div>`;
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            db.collection("work_logs").where("date", ">=", `${year}-${String(month+1).padStart(2,'0')}-01`)
              .where("date", "<=", `${year}-${String(month+1).padStart(2,'0')}-${daysInMonth}`)
              .get().then(qs => {
                  adminWorkLogs = {}; let totalPay = 0;
                  qs.forEach(doc => { adminWorkLogs[doc.id] = doc.data(); totalPay += (doc.data().totalPay || 0); });
                  document.getElementById('monthlyTotalDisplay').innerText = Math.floor(totalPay).toLocaleString() + "ì›";
                  for(let i=1; i<=daysInMonth; i++) {
                      const dateStr = `${year}-${String(month+1).padStart(2,'0')}-${String(i).padStart(2,'0')}`;
                      const div = document.createElement('div'); div.className = 'cal-day tap-effect';
                      if(adminWorkLogs[dateStr]) div.classList.add('has-data');
                      div.innerHTML = `${i}<div class="cal-dot"></div>`;
                      div.onclick = () => selectDate(dateStr, div);
                      grid.appendChild(div);
                  }
              });
        }
        function changeMonth(d) { renderCalendar(new Date(currentYear, currentMonth + d, 1).getFullYear(), new Date(currentYear, currentMonth + d, 1).getMonth()); vibrate(); }
        function selectDate(dStr, el) {
            document.querySelectorAll('.cal-day').forEach(d => d.classList.remove('selected'));
            el.classList.add('selected'); selectedDateStr = dStr;
            document.getElementById('dailyLogForm').classList.remove('hidden');
            document.getElementById('selectedDateText').innerText = dStr;
            const d = adminWorkLogs[dStr] || {};
            // Load Values
            document.getElementById('logDayHours').value = d.dayHours || '';
            document.getElementById('logNightHours').value = d.nightHours || '';
            document.getElementById('logSkillTime').value = d.skillTime || '';
            document.getElementById('logSkillRate').value = d.skillRate || '';
            document.getElementById('logSignalTime').value = d.signalTime || '';
            document.getElementById('logSignalRate').value = d.signalRate || '';
            document.getElementById('logRainTime').value = d.rainTime || '';
            document.getElementById('logRainRate').value = d.rainRate || '';
            document.getElementById('dailyTotalDisplay').innerText = (d.totalPay || 0).toLocaleString() + "ì›";
            vibrate();
        }
        function saveWorkLog() {
            if(!selectedDateStr) return;
            const h = 10030;
            const d = parseFloat(document.getElementById('logDayHours').value)||0;
            const n = parseFloat(document.getElementById('logNightHours').value)||0;
            
            const skillT = parseFloat(document.getElementById('logSkillTime').value)||0;
            const skillR = parseFloat(document.getElementById('logSkillRate').value)||0;
            const signT = parseFloat(document.getElementById('logSignalTime').value)||0;
            const signR = parseFloat(document.getElementById('logSignalRate').value)||0;
            const rainT = parseFloat(document.getElementById('logRainTime').value)||0;
            const rainR = parseFloat(document.getElementById('logRainRate').value)||0;

            const total = (d*h) + (n*h*1.5) + (skillT*skillR) + (signT*signR) + (rainT*rainR);
            
            const data = { 
                date:selectedDateStr, dayHours:d, nightHours:n, totalPay:total,
                skillTime:skillT, skillRate:skillR,
                signalTime:signT, signalRate:signR,
                rainTime:rainT, rainRate:rainR
            };

            db.collection("work_logs").doc(selectedDateStr).set(data).then(()=>{ showToast("ì €ì¥ë¨"); renderCalendar(currentYear, currentMonth); });
        }
        function deleteWorkLog() {
            if(selectedDateStr && confirm("ì‚­ì œ?")) db.collection("work_logs").doc(selectedDateStr).delete().then(()=>{ showToast("ì‚­ì œë¨"); renderCalendar(currentYear, currentMonth); });
        }

        // [Standard Wage Calculator]
        function calculateWage() {
            const h=parseFloat(document.getElementById('wageHourly').value)||0, d=parseFloat(document.getElementById('wageDayHours').value)||0, n=parseFloat(document.getElementById('wageNightHours').value)||0;
            const s= (parseFloat(document.getElementById('wageSkillTime').value)||0)*(parseFloat(document.getElementById('wageSkillRate').value)||0) + (parseFloat(document.getElementById('wageSignalTime').value)||0)*(parseFloat(document.getElementById('wageSignalRate').value)||0) + (parseFloat(document.getElementById('wageRainTime').value)||0)*(parseFloat(document.getElementById('wageRainRate').value)||0);
            const net = ((h*d) + (h*1.5*n) + s) * (1 - parseFloat(document.getElementById('wageTaxType').value));
            document.getElementById('wageResultBox').classList.remove('hidden');
            document.getElementById('wageTotal').innerText = Math.floor(net).toLocaleString() + "ì›";
            document.getElementById('wageResultBox').scrollIntoView({behavior:'smooth'}); vibrate();
        }
        function resetWageForm() { document.querySelectorAll('#wageArea input').forEach(i=>i.value=''); document.getElementById('wageHourly').value='10030'; document.getElementById('wageResultBox').classList.add('hidden'); vibrate(); }

        // [Firebase Loaders]
        function loadAllData() {
            db.collection("notices").orderBy("timestamp","desc").onSnapshot(s=>{const l=document.getElementById("noticeList");l.innerHTML="";s.forEach(d=>{const n=d.data();l.innerHTML+=`<li class="post-item tap-effect"><div class="post-header" onclick="toggleContent('n-${d.id}')" style="cursor:pointer;"><span class="post-title" style="color:var(--danger)">ğŸ“¢ ${n.title}</span><div class="post-meta">${n.date}</div><button class="mini-btn btn-del" onclick="delNotice('${d.id}',event)">ì‚­ì œ</button></div><div id="n-${d.id}" class="post-body" style="display:none;">${n.content}</div></li>`})});
            db.collection("posts").orderBy("timestamp","desc").onSnapshot(s=>{allPostsData=[];s.forEach(d=>{let o=d.data();o.id=d.id;allPostsData.push(o)});renderBoardPage(1)});
            db.collection("ships").orderBy("shipName","asc").onSnapshot(s=>{allShipsData=[];s.forEach(d=>{let o=d.data();o.id=d.id;allShipsData.push(o)});renderShipPage(1)});
            db.collection("archives").orderBy("timestamp","desc").onSnapshot(s=>{allFilesData=[];s.forEach(d=>{let o=d.data();o.id=d.id;allFilesData.push(o)});renderFilePage(1)});
        }
        function renderBoardPage(p){currentBoardPage=p;const l=document.getElementById("boardList");l.innerHTML="";allPostsData.slice((p-1)*postsPerPage,p*postsPerPage).forEach(x=>{l.innerHTML+=`<li class="post-item tap-effect"><div class="post-header" onclick="toggleContent('p-${x.id}')" style="cursor:pointer;"><div class="post-main"><span style="color:var(--primary);font-size:0.8rem;">[${x.category}]</span> <span class="post-title" style="display:inline;">${x.title}</span><div class="post-meta">${x.name} | ${x.date}</div></div><button class="mini-btn btn-del" onclick="deletePost('${x.id}','${x.password}',event)">ì‚­ì œ</button></div><div id="p-${x.id}" class="post-body" style="display:none;">${x.content}</div></li>`});renderPagination("pagination",Math.ceil(allPostsData.length/postsPerPage),p,renderBoardPage)}
        function renderShipPage(p){currentShipPage=p;const l=document.getElementById("shipList");l.innerHTML="";allShipsData.slice((p-1)*postsPerPage,p*postsPerPage).forEach(x=>{let img=x.imageUrl?`<button class="mini-btn btn-photo" onclick="event.stopPropagation();showImageModal('${x.imageUrl}')">ğŸ“·</button>`:"";l.innerHTML+=`<li class="post-item tap-effect"><div class="post-header" onclick="toggleContent('s-${x.id}')" style="cursor:pointer;"><span class="post-title">ğŸš¢ ${x.shipName}</span><div class="post-actions">${img}<button class="mini-btn btn-edit" onclick="event.stopPropagation();editShip('${x.id}')">ìˆ˜ì •</button><button class="mini-btn btn-del" onclick="event.stopPropagation();deleteShip('${x.id}',event)">ì‚­ì œ</button></div></div><div id="s-${x.id}" class="post-body" style="display:none;"><p><strong>[ë³¸ì„ ]</strong> ${x.onboardFeat||'-'}</p><p style="margin-top:5px;"><strong>[ìœ¡ìƒ]</strong> ${x.onshoreFeat||'-'}</p></div></li>`});renderPagination("shipPagination",Math.ceil(allShipsData.length/postsPerPage),p,renderShipPage)}
        function renderFilePage(p){currentFilePage=p;const l=document.getElementById("fileList");l.innerHTML="";allFilesData.slice((p-1)*postsPerPage,p*postsPerPage).forEach(x=>{l.innerHTML+=`<li class="post-item tap-effect" style="display:flex;justify-content:space-between;align-items:center;"><div><a href="${x.fileUrl}" target="_blank" style="text-decoration:none;color:var(--text-main);font-weight:bold;">ğŸ’¾ ${x.title}</a><div class="post-meta">${x.uploader}</div></div><a href="${x.fileUrl}" download class="mini-btn btn-photo" style="text-decoration:none;">ë‹¤ìš´</a></li>`});renderPagination("filePagination",Math.ceil(allFilesData.length/postsPerPage),p,renderFilePage)}
        function renderPagination(elId,t,c,f){const el=document.getElementById(elId);el.innerHTML="";for(let i=1;i<=t;i++){const s=document.createElement("span");s.className=`page-num ${i===c?'active':''} tap-effect`;s.innerText=i;s.onclick=()=>f(i);el.appendChild(s)}}

        function addPost(){const c=document.getElementById('inputCategory').value,t=document.getElementById('inputTitle').value,n=document.getElementById('inputName').value,p=document.getElementById('inputPw').value,o=document.getElementById('inputContent').value;if(!t||!n||!p){showToast("í•„ìˆ˜ ì…ë ¥ ëˆ„ë½");return}db.collection("posts").add({category:c,title:t,name:n,password:p,content:o,date:new Date().toLocaleString('ko-KR'),timestamp:firebase.firestore.FieldValue.serverTimestamp()}).then(()=>{showToast("ë“±ë¡ë¨");toggleHidden('boardForm')})}
        function deletePost(id,pw,e){e.stopPropagation();if(prompt("ë¹„ë²ˆ:")===pw||prompt("ê´€ë¦¬ì?")==="0346")db.collection("posts").doc(id).delete()}
        function addNotice(){if(prompt("ì•”í˜¸:")==="0346")db.collection("notices").add({title:document.getElementById('noticeTitle').value,content:document.getElementById('noticeContent').value,date:new Date().toLocaleString('ko-KR'),timestamp:firebase.firestore.FieldValue.serverTimestamp()})}
        function delNotice(id,e){e.stopPropagation();if(prompt("ì•”í˜¸:")==="0346")db.collection("notices").doc(id).delete()}
        
        let editingShipId=null;
        function addShipInfo(){const n=document.getElementById('shipName').value,o=document.getElementById('shipOnboard').value,s=document.getElementById('shipOnshore').value,f=document.getElementById('shipFileInput').files[0];if(!n){showToast("ì„ ë°•ëª… í•„ìˆ˜");return}document.getElementById('shipLoading').classList.remove('hidden');const save=(u)=>{const d={shipName:n,onboardFeat:o,onshoreFeat:s,imageUrl:u,date:new Date().toLocaleString('ko-KR'),timestamp:firebase.firestore.FieldValue.serverTimestamp()};(editingShipId?db.collection("ships").doc(editingShipId).update(d):db.collection("ships").add(d)).then(()=>{document.getElementById('shipLoading').classList.add('hidden');showToast("ì™„ë£Œ");resetShipForm()})};if(f)storage.ref('ships/'+Date.now()+'_'+f.name).put(f).then(x=>x.ref.getDownloadURL()).then(u=>save(u));else{if(editingShipId){const org=allShipsData.find(x=>x.id===editingShipId);save(org.imageUrl)}else save(null)}}
        function editShip(id){const x=allShipsData.find(s=>s.id===id);if(!x)return;editingShipId=id;document.getElementById('shipName').value=x.shipName;document.getElementById('shipOnboard').value=x.onboardFeat;document.getElementById('shipOnshore').value=x.onshoreFeat;document.getElementById('shipForm').classList.remove('hidden');document.getElementById('shipSubmitBtn').innerText="ìˆ˜ì • ì™„ë£Œ";document.getElementById('shipForm').scrollIntoView({behavior:'smooth'})}
        function resetShipForm(){editingShipId=null;document.querySelectorAll('#shipForm input,#shipForm textarea').forEach(i=>i.value='');document.getElementById('shipSubmitBtn').innerText="ë“±ë¡";document.getElementById('shipForm').classList.add('hidden')}
        function deleteShip(id,e){e.stopPropagation();if(prompt("ì•”í˜¸:")==="0346")db.collection("ships").doc(id).delete()}
        function uploadFile(){const f=document.getElementById('fileInput').files[0],t=document.getElementById('fileTitle').value;if(!f)return;document.getElementById('fileLoading').classList.remove('hidden');storage.ref('archives/'+Date.now()+'_'+f.name).put(f).then(x=>x.ref.getDownloadURL()).then(u=>{db.collection("archives").add({title:t,uploader:document.getElementById('fileUploader').value,fileUrl:u,date:new Date().toLocaleString('ko-KR'),timestamp:firebase.firestore.FieldValue.serverTimestamp()});document.getElementById('fileLoading').classList.add('hidden');showToast("ì™„ë£Œ")})}
        function filterFiles(){const k=document.getElementById('fileSearch').value.toUpperCase(),l=document.getElementById('fileList').getElementsByTagName('li');for(let i=0;i<l.length;i++)l[i].style.display=l[i].innerText.toUpperCase().includes(k)?"":"none"}
        
        function loadBanner(){db.collection('settings').doc('banner').onSnapshot(d=>{if(d.exists&&d.data().messages?.length){document.getElementById('safetyTicker').classList.remove('hidden');document.getElementById('tickerText').innerText="ğŸš¨ "+d.data().messages.join(" / ")}else document.getElementById('safetyTicker').classList.add('hidden')})}
        function updateBanner(){const t=prompt("ê³µì§€:");if(t)db.collection('settings').doc('banner').get().then(d=>{let m=d.exists?(d.data().messages||[]):[];m.unshift(t);if(m.length>5)m=m.slice(0,5);db.collection('settings').doc('banner').set({messages:m})})}
        function openBusSchedule(){showImageModal("https://firebasestorage.googleapis.com/v0/b/my-app-d8527.firebasestorage.app/o/archives%2F1769013796862_BandPhoto_2026_01_22_01_39_56.jpg?alt=media&token=a2e8f727-250a-41aa-855c-7b1f341d9048")}
        function showImageModal(s){document.getElementById("modalImage").src=s;document.getElementById("imageModal").style.display="flex"}
        function closeImageModal(){document.getElementById("imageModal").style.display="none"}
    </script>
</body>
</html>