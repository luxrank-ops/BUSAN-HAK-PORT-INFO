<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <meta name="description" content="Î∂ÄÏÇ∞Ìï≠ ÌòÑÏû•ÏßÅ ÌïÑÏàò Ïï±. ÏûÑÍ∏àÍ≥ÑÏÇ∞Í∏∞, Ïä§ÎßàÌä∏ Í∑ºÎ¨¥ÏùºÏßÄ(ÏßùÏßÄÍ∏∞Î°ù), ÏÑ†Î∞ïÏúÑÏπò Î∞è Ïä§ÏºÄÏ§Ñ Ï°∞Ìöå.">
    <meta property="og:title" content="BUSAN HAK PORT INFO">
    <title>BUSAN HAK PORT INFO</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6024353303588422" crossorigin="anonymous"></script>

    <link rel="icon" type="image/png" sizes="32x32" href="icon.png?v=ship_list_fixed">
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />

    <style>
        :root {
            --primary: #1e3a8a; --primary-light: #3b82f6; --accent: #f59e0b;
            --bg-color: #f3f4f6; --card-bg: rgba(255, 255, 255, 0.95);
            --text-main: #1f2937; --text-sub: #6b7280;
            --border: rgba(229, 231, 235, 0.8);
            --danger: #ef4444; --success: #10b981;
            --glass-border: 1px solid rgba(255, 255, 255, 0.6);
            --glass-shadow: 0 2px 10px rgba(0,0,0,0.03);
            --blur: blur(12px);
        }
        body.dark-mode {
            --primary: #60a5fa; --primary-light: #93c5fd; --accent: #fbbf24;
            --bg-color: #0f172a; --card-bg: rgba(30, 41, 59, 0.95);
            --text-main: #f3f4f6; --text-sub: #9ca3af;
            --border: rgba(55, 65, 81, 0.5);
            --glass-border: 1px solid rgba(255, 255, 255, 0.1);
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Pretendard', sans-serif; }
        body { background-color: var(--bg-color); color: var(--text-main); margin: 0; padding: 0; padding-bottom: 90px; transition: background 0.3s ease; }

        .tap-effect { transition: transform 0.1s; } .tap-effect:active { transform: scale(0.98); }

        header {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white; padding: 14px 0; text-align: center; position: sticky; top: 0; z-index: 100;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        header h1 { margin: 0; font-size: 1.2rem; font-weight: 900; }
        .theme-toggle { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.2); border: none; width: 30px; height: 30px; border-radius: 50%; font-size: 1.1rem; cursor: pointer; display: flex; align-items: center; justify-content: center; }

        .container { width: 96%; max-width: 600px; margin: 15px auto; }
        
        /* [Main Grid Layout] */
        .dash-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .dash-card { 
            background: var(--card-bg); border-radius: 16px; 
            box-shadow: var(--glass-shadow); border: var(--glass-border); overflow: hidden;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            display: flex; flex-direction: column;
        }
        .dash-card.expanded { grid-column: span 2; }

        .dash-header {
            padding: 15px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;
            background: rgba(255,255,255,0.05); border-bottom: 1px solid transparent; height: 100%; min-height: 60px;
        }
        .dash-card.expanded .dash-header { border-bottom: 1px solid var(--border); background: rgba(0,0,0,0.02); }
        .dash-title { font-size: 1rem; font-weight: 800; color: var(--text-main); display: flex; align-items: center; gap: 6px; }
        .toggle-icon { font-size: 0.8rem; color: var(--text-sub); transition: transform 0.3s; }
        .toggle-icon.rotated { transform: rotate(180deg); }
        .dash-content { display: none; padding: 15px; background: var(--card-bg); animation: fadeIn 0.2s; }
        
        .card { background: var(--card-bg); border-radius: 16px; margin-bottom: 15px; box-shadow: var(--glass-shadow); border: var(--glass-border); overflow: hidden; }
        .section-header { display: flex; justify-content: space-between; align-items: center; padding: 15px; cursor: pointer; border-bottom: 1px solid var(--border); }
        .section-title { font-size: 1.1rem; font-weight: 800; display:flex; align-items:center; gap:8px; }
        .collapsible-content { display: block; padding: 15px; }
        .collapsible-content.collapsed { display: none; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* [Control Grid] */
        .control-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .control-btn { 
            background: var(--card-bg); border: 1px solid var(--border); color: var(--text-main); 
            padding: 16px; border-radius: 12px; text-decoration: none; 
            font-size: 0.95rem; font-weight: 700; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.02); transition: all 0.2s;
        }
        .control-btn:active { transform: scale(0.98); background: rgba(0,0,0,0.05); }

        /* [Elements] */
        .input-field { width: 100%; padding: 12px; margin-bottom: 8px; border: 1px solid var(--border); border-radius: 8px; background: rgba(255,255,255,0.6); color: var(--text-main); font-size: 0.95rem; }
        .textarea-field { height: 80px; resize: none; }
        .action-btn { width: 100%; padding: 12px; border: none; border-radius: 10px; font-weight: 700; color: white; cursor: pointer; background: var(--primary); font-size: 0.95rem; }
        .bg-submit { background: var(--success); } .bg-calc { background: linear-gradient(135deg, #ef4444, #b91c1c); } .bg-cancel { background: var(--text-sub); }

        .terminal-block { background: rgba(0,0,0,0.03); border-radius: 10px; margin-bottom: 8px; border: 1px solid var(--border); overflow: hidden; }
        .terminal-header { padding: 12px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; font-weight: 700; font-size: 0.95rem; }
        .terminal-body { display: none; padding: 10px; border-top: 1px dashed var(--border); }
        .terminal-actions { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; }
        .terminal-btn { background: var(--card-bg); border: 1px solid var(--border); color: var(--text-main); padding: 10px 4px; border-radius: 8px; text-decoration: none; font-size: 0.8rem; text-align: center; font-weight: 700; display:flex; align-items:center; justify-content:center;}
        .btn-premium { grid-column: span 3; background: linear-gradient(135deg, #fffbeb, #fef3c7); border: 1px solid #fcd34d; color: #92400e; margin-top: 5px; }

        .wage-row { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; }
        .wage-row label { flex: 1; font-weight: 600; font-size: 0.9rem; }
        .wage-result-box { background: linear-gradient(135deg, #fff7ed, #ffedd5); border: 2px solid var(--accent); border-radius: 12px; padding: 15px; text-align: center; margin-top: 15px; }
        .wage-total { font-size: 1.6rem; color: #c2410c; font-weight: 900; }

        .ticker-container { background: var(--accent); color: #000; font-weight: 700; height: 36px; display: flex; align-items: center; overflow: hidden; position: relative; font-size: 0.85rem; }
        .ticker-item { padding-left: 100%; animation: ticker 25s linear infinite; white-space: nowrap; }
        @keyframes ticker { 100% { transform: translate3d(-100%, 0, 0); } }
        .ticker-controls { position: absolute; right: 0; height: 100%; display: flex; background: rgba(255,255,255,0.3); backdrop-filter: blur(2px); }
        .ticker-btn { width: 36px; height: 100%; border: none; background: transparent; font-size: 1rem; cursor: pointer; }

        .hidden { display: none !important; }
        .mini-btn { padding: 4px 8px; font-size: 0.75rem; border-radius: 6px; border: none; cursor: pointer; color: white; margin-left: 5px; }
        .btn-del { background: var(--danger); } .btn-edit { background: var(--primary-light); }
        
        /* List Style */
        .post-list { list-style: none; padding: 0; margin: 0; }
        .post-item { border-bottom: 1px solid var(--border); }
        .post-item:last-child { border-bottom: none; }
        .post-header-row { padding: 15px 5px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: transparent; transition: background 0.1s; }
        .post-header-row:active { background: rgba(0,0,0,0.03); }
        .post-title-text { font-weight: 700; font-size: 0.95rem; color: var(--text-main); display: flex; align-items: center; gap: 5px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; flex: 1; margin-right: 10px; }
        .post-meta-info { font-size: 0.75rem; color: var(--text-sub); white-space: nowrap; }
        
        /* [SHIP CONTENT FORCE STYLE] */
        .post-body-content { 
            display: none; /* JS will toggle this inline */
            padding: 15px; background: rgba(0,0,0,0.02); border-top: 1px dashed var(--border); 
            font-size: 0.95rem; line-height: 1.7; white-space: pre-wrap; color: var(--text-main); word-break: break-all; 
        }

        .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; height: 65px; background: rgba(255,255,255,0.95); border-top: 1px solid var(--border); display: flex; justify-content: space-around; align-items: center; z-index: 1000; padding-bottom: env(safe-area-inset-bottom); }
        .dark-mode .bottom-nav { background: rgba(30, 41, 59, 0.95); }
        .nav-item { flex: 1; text-align: center; color: var(--text-sub); font-size: 0.7rem; cursor: pointer; display: flex; flex-direction: column; align-items: center; }
        .nav-item.active { color: var(--primary); font-weight: 800; }
        .nav-icon { font-size: 1.4rem; margin-bottom: 2px; }
        
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 3000; justify-content: center; align-items: center; }
        .modal-content { background: var(--card-bg); padding: 20px; border-radius: 15px; max-width: 90%; max-height: 80%; overflow-y: auto; }
        .modal-img { max-width: 100%; border-radius: 5px; }
        
        .guide-text { line-height: 1.8; font-size: 0.9rem; text-align: left; color: var(--text-main); white-space: pre-wrap; }
        .guide-text h4 { color: var(--primary); margin: 25px 0 10px 0; border-left: 4px solid var(--accent); padding-left: 10px; font-size: 1rem; }
        
        footer { text-align: center; padding: 40px 20px; color: var(--text-sub); font-size: 0.8rem; margin-bottom: 80px; border-top: 1px solid var(--border); }
        .footer-link { cursor: pointer; text-decoration: underline; margin: 0 8px; }
        
        /* Calendar & Chips */
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; text-align: center; }
        .cal-day { padding: 8px 2px; border-radius: 8px; background: rgba(255,255,255,0.5); border: 1px solid var(--border); font-weight: 700; font-size: 0.85rem; }
        .cal-day.selected { background: var(--primary); color: white; border-color: var(--primary); }
        .cal-dot { width: 4px; height: 4px; background-color: var(--success); border-radius: 50%; margin: 3px auto 0 auto; display: none; }
        .cal-day.has-data .cal-dot { display: block; }
        .chip-container { display: flex; gap: 5px; margin-bottom: 10px; flex-wrap: wrap; }
        .chip-btn { padding: 6px 12px; border-radius: 15px; border: 1px solid var(--primary-light); background: rgba(255,255,255,0.6); color: var(--primary); font-size: 0.8rem; font-weight: 700; cursor: pointer; }
        
        /* Comments */
        .comment-section { margin-top: 15px; border-top: 1px dashed var(--border); padding-top: 10px; background: rgba(0,0,0,0.015); border-radius: 8px; padding: 10px; }
        .comment-item { display: flex; justify-content: space-between; align-items: flex-start; font-size: 0.85rem; padding: 6px 0; border-bottom: 1px solid rgba(0,0,0,0.05); }
        .comment-meta { font-weight: bold; color: var(--primary); margin-right: 5px; min-width: 60px; font-size: 0.8rem; }
        .comment-text { flex: 1; color: var(--text-main); word-break: break-all; white-space: pre-wrap; }
        .comment-del-btn { background: none; border: none; color: var(--text-sub); cursor: pointer; font-size: 0.7rem; padding: 0 5px; }
        .comment-form { display: flex; gap: 5px; align-items: center; flex-wrap: wrap; margin-top: 5px; }
        .comment-input-sm { width: 70px; padding: 8px; border: 1px solid var(--border); border-radius: 6px; font-size: 0.8rem; }
        .comment-input-lg { flex: 1; padding: 8px; border: 1px solid var(--border); border-radius: 6px; font-size: 0.8rem; min-width: 120px; }
        .comment-submit { padding: 8px 12px; background: var(--text-sub); color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.8rem; font-weight: bold; }
    </style>
</head>
<body>

    <header>
        <h1>BUSAN HAK PORT</h1>
        <button class="theme-toggle tap-effect" onclick="toggleDarkMode()">üåô</button>
    </header>

    <div id="safetyTicker" class="ticker-container">
        <div class="ticker-wrap"><div id="tickerText" class="ticker-item">üö® ÏïàÏ†Ñ Ï†úÏùº! Ïò§ÎäòÎèÑ Î¨¥ÏÇ¨Í≥†!</div></div>
        <div class="ticker-controls">
            <button class="ticker-btn tap-effect" onclick="writeUserTicker()">üó£Ô∏è</button>
            <button class="ticker-btn tap-effect" onclick="setAdminTicker()">üì¢</button>
            <button class="ticker-btn tap-effect" onclick="resetTicker()">‚öôÔ∏è</button>
        </div>
    </div>

    <div class="container">
        
        <div class="dash-grid">
            
            <div id="notice-card" class="dash-card">
                <div class="dash-header tap-effect" onclick="toggleDashItem('notice-card')">
                    <span class="dash-title">üì¢ Í≥µÏßÄÏÇ¨Ìï≠</span><span class="toggle-icon">‚ñº</span>
                </div>
                <div class="dash-content">
                    <div class="form-box" style="margin-bottom:10px; background:rgba(239,68,68,0.05); padding:10px; border-radius:8px;">
                        <input type="text" id="noticeTitle" class="input-field" placeholder="Ï†úÎ™©">
                        <textarea id="noticeContent" class="input-field textarea-field" placeholder="ÎÇ¥Ïö©" style="height:60px;"></textarea>
                        <button class="action-btn bg-submit" onclick="addNotice()">Îì±Î°ù (Í¥ÄÎ¶¨Ïûê)</button>
                    </div>
                    <ul id="noticeList" class="post-list"></ul>
                </div>
            </div>

            <div id="board-card" class="dash-card">
                <div class="dash-header tap-effect" onclick="toggleDashItem('board-card')">
                    <span class="dash-title">üí¨ ÏùµÎ™ÖÍ≤åÏãúÌåê</span><span class="toggle-icon">‚ñº</span>
                </div>
                <div class="dash-content">
                    <button class="action-btn" style="background:var(--text-sub); margin-bottom:10px; padding:10px;" onclick="toggleHidden('boardForm')">‚úçÔ∏è Í∏ÄÏì∞Í∏∞</button>
                    <div id="boardForm" class="hidden" style="margin-bottom:10px;">
                        <select id="inputCategory" class="input-field"><option>üí¨ Ïû°Îã¥</option><option>‚ÑπÔ∏è Ï†ïÎ≥¥</option></select>
                        <input type="text" id="inputTitle" class="input-field" placeholder="Ï†úÎ™©">
                        <input type="password" id="inputPw" class="input-field" placeholder="ÎπÑÎ≤à">
                        <textarea id="inputContent" class="input-field textarea-field" placeholder="ÎÇ¥Ïö©" style="height:80px;"></textarea>
                        <button class="action-btn bg-submit" onclick="addPost()">Îì±Î°ù</button>
                    </div>
                    <ul id="boardList" class="post-list"></ul>
                    <div id="pagination" style="display:flex; justify-content:center; gap:5px; margin-top:10px;"></div>
                </div>
            </div>

            <div id="ship-card" class="dash-card">
                <div class="dash-header tap-effect" onclick="toggleDashItem('ship-card')">
                    <span class="dash-title">üö¢ ÏÑ†Î∞ïÏ†ïÎ≥¥</span><span class="toggle-icon">‚ñº</span>
                </div>
                <div class="dash-content">
                    <div style="display:flex; gap:5px; margin-bottom:10px;">
                        <input type="text" id="shipSearch" class="input-field" placeholder="ÏÑ†Î∞ïÎ™Ö Í≤ÄÏÉâ..." onkeyup="filterShips()" style="margin-bottom:0; flex:1;">
                        <button class="action-btn" style="width:auto; padding:10px; background:var(--primary); margin:0;" onclick="filterShips()">üîç Í≤ÄÏÉâ</button>
                    </div>
                    <a href="https://www.marinetraffic.com/" target="_blank" class="action-btn" style="background:#0284c7; text-align:center; display:block; text-decoration:none; margin-bottom:10px; padding:12px;">üåç ÏÑ†Î∞ï ÏúÑÏπò ÌôïÏù∏</a>
                    <button class="action-btn" style="background:var(--accent); margin-bottom:10px; padding:12px;" onclick="toggleHidden('shipForm')">üìù ÏÑ†Î∞ï Ï†ïÎ≥¥ Í≤ÄÏÉâ Î∞è Ïã†Í∑úÏÑ†Î∞ïÏ†ïÎ≥¥Îì±Î°ù</button>
                    <div id="shipForm" class="hidden" style="margin-bottom:10px; background:rgba(0,0,0,0.02); padding:10px; border-radius:8px;">
                        <input type="text" id="shipName" class="input-field" placeholder="ÏÑ†Î∞ïÎ™Ö (ÌïÑÏàò)">
                        <input type="file" id="shipFileInput" class="input-field">
                        <textarea id="shipOnboard" class="input-field textarea-field" placeholder="Î≥∏ÏÑ† ÏûëÏóÖ ÎÇ¥Ïö©" style="height:60px;"></textarea>
                        <textarea id="shipOnshore" class="input-field textarea-field" placeholder="Ïú°ÏÉÅ ÏûëÏóÖ ÎÇ¥Ïö©" style="height:60px;"></textarea>
                        <button id="shipSubmitBtn" class="action-btn bg-submit" onclick="addShipInfo()">Îì±Î°ù</button>
                    </div>
                    <ul id="shipList" class="post-list"></ul>
                    <div id="shipPagination" style="display:flex; justify-content:center; gap:5px; margin-top:10px;"></div>
                </div>
            </div>

            <div id="file-card" class="dash-card">
                <div class="dash-header tap-effect" onclick="toggleDashItem('file-card')">
                    <span class="dash-title">üìÇ ÏûêÎ£åÏã§</span><span class="toggle-icon">‚ñº</span>
                </div>
                <div class="dash-content">
                    <input type="text" id="fileSearch" class="input-field" placeholder="Í≤ÄÏÉâ..." onkeyup="filterFiles()">
                    <div style="margin-bottom:10px;">
                        <input type="text" id="fileTitle" class="input-field" placeholder="Ï†úÎ™©">
                        <input type="file" id="fileInput" class="input-field">
                        <button class="action-btn bg-submit" onclick="uploadFile()">ÏóÖÎ°úÎìú</button>
                        <div id="fileLoading" class="hidden">ÏóÖÎ°úÎìú Ï§ë...</div>
                    </div>
                    <ul id="fileList" class="post-list"></ul>
                    <div id="filePagination" style="display:flex; justify-content:center; gap:5px; margin-top:10px;"></div>
                </div>
            </div>

            <div id="wage-card" class="dash-card" style="border:1px solid var(--danger);">
                <div class="dash-header tap-effect" onclick="toggleDashItem('wage-card')">
                    <span class="dash-title" style="color:var(--danger);">üí∞ ÏûÑÍ∏à Í≥ÑÏÇ∞Í∏∞</span><span class="toggle-icon">‚ñº</span>
                </div>
                <div class="dash-content">
                    <div class="wage-row"><label>ÏãúÍ∏â</label><input type="number" id="wageHourly" class="input-field" value="10030" style="text-align:right;">Ïõê</div>
                    <div class="wage-row"><label>‚òÄÔ∏è Ï£ºÍ∞Ñ</label><input type="number" id="wageDayHours" class="input-field" placeholder="ÏãúÍ∞Ñ" style="text-align:right;">H</div>
                    <div class="wage-row"><label>üåô ÏïºÍ∞Ñ/Ìú¥Ïùº</label><input type="number" id="wageNightHours" class="input-field" placeholder="ÏãúÍ∞Ñ" style="text-align:right;">H</div>
                    <div style="border-top:1px dashed var(--border); margin:10px 0; padding-top:5px;">
                        <div class="wage-row"><label>üîß Í∏∞Îä•Í≥µ</label><input type="number" id="wageSkillTime" class="input-field" placeholder="ÏãúÍ∞Ñ"><input type="number" id="wageSkillRate" class="input-field" placeholder="Îã®Í∞Ä"></div>
                        <div class="wage-row"><label>üèóÔ∏è Ï†àÎßûÏù¥</label><input type="number" id="wageSignalTime" class="input-field" placeholder="ÏãúÍ∞Ñ"><input type="number" id="wageSignalRate" class="input-field" placeholder="Îã®Í∞Ä"></div>
                        <div class="wage-row"><label>‚òî Ïö∞Ï≤ú</label><input type="number" id="wageRainTime" class="input-field" placeholder="ÏãúÍ∞Ñ"><input type="number" id="wageRainRate" class="input-field" placeholder="Îã®Í∞Ä"></div>
                    </div>
                    <select id="wageTaxType" class="input-field"><option value="0">Í≥µÏ†ú ÏóÜÏùå (0%)</option><option value="0.033">ÌîÑÎ¶¨ÎûúÏÑú (3.3%)</option><option value="0.094">4ÎåÄÎ≥¥Ìóò (9
