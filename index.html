<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¶€ì‚°í•­ ì˜¬ì¸ì› í”Œë«í¼ (Final)</title>
    <style>
        :root {
            --primary-color: #0056b3;
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            /* 9. ê° í•­ì—… ì„¹ì…˜ ìƒ‰ìƒ (ìš”ì²­ ë°˜ì˜) */
            --term1-color: #ef5350; /* 1í•­: ë¶‰ì€ìƒ‰ (ì£¼ì˜) */
            --term2-color: #29b6f6; /* 2í•­: íŒŒë€ìƒ‰ (ì‹ í•­) */
            --term3-color: #66bb6a; /* 3í•­: ì´ˆë¡ìƒ‰ (ì›í™œ) */
        }
        body {
            font-family: 'Apple SD Gothic Neo', sans-serif;
            background-color: var(--bg-color);
            margin: 0; padding: 0; padding-bottom: 80px; color: #333;
        }
        header {
            background-color: var(--primary-color); color: white; padding: 15px;
            text-align: center; font-weight: bold; position: sticky; top: 0; z-index: 100;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .container { padding: 15px; max-width: 600px; margin: 0 auto; }
        
        /* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .card {
            background: var(--card-bg); border-radius: 12px; padding: 20px;
            margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        h2, h3 { margin-top: 0; border-bottom: 1px solid #eee; padding-bottom: 10px; font-size: 1.1rem; }

        /* ì…ë ¥ì°½ ìŠ¤íƒ€ì¼ */
        input[type="text"], input[type="number"], textarea, select {
            width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px;
            box-sizing: border-box; margin-bottom: 8px; font-size: 0.95rem;
        }

        /* 6. ì½ê¸° ì „ìš© ëª¨ë“œ ìŠ¤íƒ€ì¼ (ë°°ê²½ìƒ‰ íšŒìƒ‰) */
        .read-only { background-color: #f5f5f5; border: 1px solid #eee; color: #555; pointer-events: none; }

        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        button { cursor: pointer; border: none; border-radius: 6px; padding: 8px 12px; font-weight: bold; transition: 0.2s; }
        .btn-main { background: var(--primary-color); color: white; width: 100%; padding: 12px; margin-top: 5px; }
        .btn-main:active { background: #004494; }
        .btn-del { background: #ffebee; color: #c62828; font-size: 0.8rem; margin-left: 5px; }
        .btn-edit { background: #ffca28; color: #333; width: 100%; padding: 12px; }
        .btn-save { background: #0056b3; color: white; width: 100%; padding: 12px; display: none; }

        /* 10. í•­ì—… ì„¹ì…˜ ìŠ¤íƒ€ì¼ (ì™¼ìª½ ì»¬ëŸ¬ë°”) */
        .term-card { border-left: 6px solid #ccc; position: relative; }
        .term-1 { border-left-color: var(--term1-color); }
        .term-2 { border-left-color: var(--term2-color); }
        .term-3 { border-left-color: var(--term3-color); }
        .term-badge { position: absolute; top: 20px; right: 20px; font-size: 0.8rem; padding: 4px 8px; border-radius: 4px; color: white; }

        /* ê²Œì‹œíŒ ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .list-item { border-bottom: 1px solid #eee; padding: 12px 0; }
        .comment-area { background: #fafafa; padding: 10px; margin-top: 10px; border-radius: 8px; font-size: 0.9rem; }
        .comment-row { display: flex; justify-content: space-between; padding: 4px 0; border-bottom: 1px dashed #eee; }

        /* í•˜ë‹¨ íƒ­ */
        .bottom-nav {
            position: fixed; bottom: 0; width: 100%; background: white;
            display: flex; justify-content: space-around; padding: 12px 0;
            border-top: 1px solid #eee; z-index: 200;
        }
        .nav-item { cursor: pointer; text-align: center; font-size: 0.8rem; color: #999; }
        .nav-item.active { color: var(--primary-color); font-weight: bold; }
        
        .screen { display: none; }
        .screen.active { display: block; }
    </style>
</head>
<body>

    <header>BUSAN PORT INFO</header>

    <div class="container">

        <!-- [í™”ë©´ 1] í™ˆ: ì„ê¸ˆê³„ì‚°ê¸° + í„°ë¯¸ë„ ì •ë³´ -->
        <div id="screen-home" class="screen active">
            
            <!-- ğŸ’° ì„ê¸ˆ ê³„ì‚°ê¸° -->
            <div class="card">
                <h2>ğŸ’° ì„ê¸ˆ ê³„ì‚°ê¸° (2026 ê¸°ì¤€)</h2>
                <input type="number" id="dayHours" placeholder="â˜€ï¸ ì£¼ê°„ ê·¼ë¬´ (ì‹œê°„)" oninput="calculate()">
                <input type="number" id="nightHours" placeholder="ğŸŒ™ ì•¼ê°„/íœ´ì¼ (1.5ë°°)" oninput="calculate()">
                
                <!-- ì†ŒìŠ¤[1] ë°˜ì˜: ì„¸ê¸ˆ ì„ íƒ -->
                <label style="font-size:0.9rem; font-weight:bold; display:block; margin-bottom:5px;">ê³µì œìœ¨ ì„ íƒ:</label>
                <select id="taxSelect" onchange="calculate()">
                    <option value="0.094">4ëŒ€ë³´í—˜ (9.4%) - ì¼ë°˜ì </option>
                    <option value="0.033">í”„ë¦¬ëœì„œ (3.3%)</option>
                    <option value="0">ê³µì œ ì—†ìŒ (0%)</option>
                </select>

                <div style="background:#e3f2fd; padding:15px; border-radius:8px; text-align:center; margin-top:15px;">
                    <div style="font-size:0.9rem; color:#555;">ì˜ˆìƒ ì‹¤ìˆ˜ë ¹ì•¡</div>
                    <div id="finalPay" style="font-weight:bold; color:#0056b3; font-size:1.5rem;">0ì›</div>
                </div>
            </div>

            <!-- 8. í•­ì—… ì„¹ì…˜ ë°°ì¹˜ (ì„ê¸ˆê³„ì‚°ê¸° ë°‘) -->
            <!-- 10. ì´ëª¨ì§€ ë° ìƒ‰ìƒ ì ìš© -->
            
            <div class="card term-card term-1">
                <h3>âš“ 1í•­ (ë¶í•­)</h3>
                <span class="term-badge" style="background:var(--term1-color);">ì£¼ì˜</span>
                <p><strong>BPTC / HBCT (í—ˆì¹˜ìŠ¨)</strong></p>
                <ul style="padding-left:20px; color:#555;">
                    <li>ë…¸í›„ ì„¤ë¹„ ì£¼ì˜ í•„ìš”</li>
                    <li>ê°ë§Œ/ì‹ ì„ ëŒ€ ì„ ì„ í™•ì¸ í•„ìˆ˜</li>
                </ul>
            </div>

            <div class="card term-card term-2">
                <h3>ğŸš¢ 2í•­ (ì‹ í•­ ë¶ì¸¡)</h3>
                <span class="term-badge" style="background:var(--term2-color);">ì…”í‹€</span>
                <p><strong>PNC / PNIT</strong></p>
                <ul style="padding-left:20px; color:#555;">
                    <li>PNC: ì…”í‹€ë²„ìŠ¤ í•„ìˆ˜ (ë„ë³´ ë¶ˆê°€)</li>
                    <li>PNIT: ì™¸êµ­ ì„ ì‚¬ ë‹¤ìˆ˜ (ì˜ì–´ ì†Œí†µ)</li>
                </ul>
            </div>

            <div class="card term-card term-3">
                <h3>ğŸ—ï¸ 3í•­ (ì‹ í•­ ë‚¨ì¸¡)</h3>
                <span class="term-badge" style="background:var(--term3-color);">ìµœì‹ </span>
                <p><strong>HJNC / BNCT</strong></p>
                <ul style="padding-left:20px; color:#555;">
                    <li>ìë™í™” ê²Œì´íŠ¸ ì£¼ì˜</li>
                    <li>Lashing(ê³ ë°•) ì‘ì—… ë¹ˆë„ ë†’ìŒ</li>
                </ul>
            </div>
        </div>

        <!-- [í™”ë©´ 2] ì»¤ë®¤ë‹ˆí‹°: ê³µì§€/ìµëª…/ì„ ë°•ì •ë³´ -->
        <div id="screen-board" class="screen">
            
            <!-- 1. ê³µì§€ì‚¬í•­ (ì‚­ì œ/ì´ˆê¸°í™” ì ìš©) -->
            <div class="card">
                <h3>ğŸ“¢ ê³µì§€ì‚¬í•­</h3>
                <div style="display:flex; gap:5px;">
                    <input type="text" id="noticeInput" placeholder="ê³µì§€ ë‚´ìš© ì…ë ¥..." style="margin-bottom:0;">
                    <button onclick="addNotice()" style="background:#333; color:white; width:80px;">ë“±ë¡</button>
                </div>
                <ul id="noticeList" style="padding-left: 20px; margin-top:15px;"></ul>
            </div>

            <!-- 6. ì„ ë°•ì •ë³´ (ìˆ˜ì • ëª¨ë“œ í† ê¸€ ì ìš©) -->
            <div class="card">
                <h3>ğŸš¢ ì„ ë°• ì •ë³´ & ë©”ëª¨ <a href="https://www.marinetraffic.com/" target="_blank" style="font-size:0.8rem; float:right; text-decoration:none;">ğŸŒìœ„ì¹˜í™•ì¸</a></h3>
                
                <label style="font-size:0.8rem; color:#888;">ì„ ë°•ëª…</label>
                <!-- ì´ˆê¸° ìƒíƒœ: read-only í´ë˜ìŠ¤ ì ìš© -->
                <input type="text" id="shipName" class="read-only" value="HYUNDAI BUSAN" readonly>
                
                <label style="font-size:0.8rem; color:#888;">ì‘ì—… ë©”ëª¨</label>
                <textarea id="shipMemo" class="read-only" rows="3" readonly>20í”¼íŠ¸ ì»¨í…Œì´ë„ˆ í•˜ì—­ ì˜ˆì •</textarea>

                <!-- ë²„íŠ¼ í† ê¸€ -->
                <button id="btnEdit" class="btn-edit" onclick="enableEdit()">âœï¸ ìˆ˜ì • í•˜ê¸°</button>
                <button id="btnSave" class="btn-save" onclick="saveShipInfo()">ğŸ’¾ ìˆ˜ì • ì™„ë£Œ</button>
            </div>

            <!-- 3. ìµëª… ê²Œì‹œíŒ (ëŒ“ê¸€ ê¸°ëŠ¥, ì´ˆê¸°í™” ì ìš©) -->
            <div class="card">
                <h3>ğŸ’¬ ìµëª… ê²Œì‹œíŒ</h3>
                <input type="text" id="anonTitle" placeholder="ì œëª©">
                <textarea id="anonContent" rows="3" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                <button class="btn-main" onclick="addPost()">ê¸€ ì“°ê¸°</button>
                
                <div id="postList" style="margin-top:20px;"></div>
            </div>
        </div>

    </div>

    <!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
    <div class="bottom-nav">
        <div class="nav-item active" onclick="showScreen('home', this)">
            <div style="font-size:1.2rem;">ğŸ </div>
            ì •ë³´/ê³„ì‚°
        </div>
        <div class="nav-item" onclick="showScreen('board', this)">
            <div style="font-size:1.2rem;">ğŸ’¬</div>
            ê²Œì‹œíŒ/ë©”ëª¨
        </div>
    </div>

    <script>
        // --- ğŸ’° ì„ê¸ˆ ê³„ì‚°ê¸° ë¡œì§ ---
        function calculate() {
            const RATE = 10030;
            let d = Number(document.getElementById('dayHours').value) || 0;
            let n = Number(document.getElementById('nightHours').value) || 0;
            
            let taxRate = parseFloat(document.getElementById('taxSelect').value);
            
            let total = (d * RATE) + (n * RATE * 1.5);
            let net = Math.floor(total * (1 - taxRate));
            
            document.getElementById('finalPay').innerText = net.toLocaleString() + "ì›";
        }

        // --- 1 & 2. ê³µì§€ì‚¬í•­ (ì‚­ì œ ì•ˆë¨ í•´ê²°, ì´ˆê¸°í™” í•´ê²°) ---
        let notices = JSON.parse(localStorage.getItem('notices')) || [];
        renderNotices();

        function addNotice() {
            const input = document.getElementById('noticeInput');
            if (!input.value.trim()) return alert("ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”");
            
            const newNotice = { id: Date.now(), text: input.value };
            notices.push(newNotice);
            localStorage.setItem('notices', JSON.stringify(notices));
            
            input.value = ""; // 2. ì…ë ¥ì¹¸ ì´ˆê¸°í™”
            renderNotices();
        }

        function deleteNotice(id) { // 1. ì‚­ì œ ê¸°ëŠ¥ ì •ìƒí™”
            if(confirm("ê³µì§€ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                notices = notices.filter(n => n.id !== id);
                localStorage.setItem('notices', JSON.stringify(notices));
                renderNotices();
            }
        }

        function renderNotices() {
            const list = document.getElementById('noticeList');
            list.innerHTML = "";
            notices.forEach(n => {
                list.innerHTML += `
                    <li style="margin-bottom:8px; display:flex; justify-content:space-between;">
                        <span>${n.text}</span>
                        <button class="btn-del" onclick="deleteNotice(${n.id})">ì‚­ì œ</button>
                    </li>`;
            });
        }

        // --- 6. ì„ ë°• ì •ë³´ (ìˆ˜ì • ëª¨ë“œ í† ê¸€) ---
        // ì €ì¥ëœ ê°’ ë¶ˆëŸ¬ì˜¤ê¸°
        const savedShip = JSON.parse(localStorage.getItem('shipInfo'));
        if(savedShip) {
            document.getElementById('shipName').value = savedShip.name;
            document.getElementById('shipMemo').value = savedShip.memo;
        }

        function enableEdit() {
            const nameField = document.getElementById('shipName');
            const memoField = document.getElementById('shipMemo');
            
            // ì½ê¸° ì „ìš© í•´ì œ ë° ìŠ¤íƒ€ì¼ ì œê±°
            nameField.readOnly = false;
            memoField.readOnly = false;
            nameField.classList.remove('read-only');
            memoField.classList.remove('read-only');
            
            // ë²„íŠ¼ êµì²´
            document.getElementById('btnEdit').style.display = 'none';
            document.getElementById('btnSave').style.display = 'block';
        }

        function saveShipInfo() {
            const nameField = document.getElementById('shipName');
            const memoField = document.getElementById('shipMemo');
            
            // ì €ì¥
            localStorage.setItem('shipInfo', JSON.stringify({
                name: nameField.value,
                memo: memoField.value
            }));

            // ì½ê¸° ì „ìš© ì ìš© ë° ìŠ¤íƒ€ì¼ ë³µêµ¬
            nameField.readOnly = true;
            memoField.readOnly = true;
            nameField.classList.add('read-only');
            memoField.classList.add('read-only');

            // ë²„íŠ¼ êµì²´
            document.getElementById('btnEdit').style.display = 'block';
            document.getElementById('btnSave').style.display = 'none';
            
            alert("ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
        }


        // --- 3, 4, 5. ìµëª… ê²Œì‹œíŒ (ëŒ“ê¸€, ì´ˆê¸°í™” í•´ê²°) ---
        let posts = JSON.parse(localStorage.getItem('posts')) || [];
        renderPosts();

        function addPost() {
            const title = document.getElementById('anonTitle');
            const content = document.getElementById('anonContent');
            
            if(!title.value.trim() || !content.value.trim()) return alert("ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”");

            const newPost = {
                id: Date.now(),
                title: title.value,
                content: content.value,
                comments: [] // 3. ëŒ“ê¸€ ë°°ì—´ ì¶”ê°€
            };
            posts.unshift(newPost); // ìµœì‹ ê¸€ ìœ„ë¡œ
            localStorage.setItem('posts', JSON.stringify(posts));

            // 4, 5, 7. ì…ë ¥ì¹¸ ì´ˆê¸°í™”
            title.value = "";
            content.value = "";
            renderPosts();
        }

        // 3. ëŒ“ê¸€ ë“±ë¡ í•¨ìˆ˜
        function addComment(postId) {
            const input = document.getElementById(`cmt-${postId}`);
            if(!input.value.trim()) return;

            const postIndex = posts.findIndex(p => p.id === postId);
            if(postIndex > -1) {
                posts[postIndex].comments.push(input.value);
                localStorage.setItem('posts', JSON.stringify(posts));
                renderPosts(); // í™”ë©´ ê°±ì‹  (ì…ë ¥ì¹¸ì€ ë‹¤ì‹œ ê·¸ë ¤ì§€ë©´ì„œ ì´ˆê¸°í™”ë¨)
            }
        }

        function deletePost(id) {
            if(confirm("ê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                posts = posts.filter(p => p.id !== id);
                localStorage.setItem('posts', JSON.stringify(posts));
                renderPosts();
            }
        }

        function renderPosts() {
            const list = document.getElementById('postList');
            list.innerHTML = "";
            
            if(posts.length === 0) {
                list.innerHTML = "<p style='text-align:center; color:#999;'>ì²« ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”!</p>";
                return;
            }

            posts.forEach(p => {
                // ëŒ“ê¸€ HTML ìƒì„±
                let commentsHtml = p.comments.map(c => 
                    `<div class="comment-row">
                        <span>â”” ${c}</span>
                     </div>`
                ).join('');

                list.innerHTML += `
                    <div class="list-item">
                        <div style="display:flex; justify-content:space-between; align-items:flex-start;">
                            <div>
                                <div style="font-weight:bold; font-size:1.05rem;">${p.title}</div>
                                <div style="color:#555; margin-top:5px; white-space:pre-wrap;">${p.content}</div>
                            </div>
                            <button class="btn-del" onclick="deletePost(${p.id})">ì‚­ì œ</button>
                        </div>
                        
                        <!-- ëŒ“ê¸€ ì˜ì—­ -->
                        <div class="comment-area">
                            ${commentsHtml}
                            <div style="display:flex; margin-top:8px;">
                                <input type="text" id="cmt-${p.id}" placeholder="ëŒ“ê¸€ ì‘ì„±..." style="margin-bottom:0; font-size:0.8rem;">
                                <button onclick="addComment(${p.id})" style="background:#ddd; color:#333; margin-left:5px; width:50px; padding:0;">ë“±ë¡</button>
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        // --- í™”ë©´ ì „í™˜ ---
        function showScreen(screenId, navEl) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('screen-' + screenId).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            navEl.classList.add('active');
        }
    </script>
</body>
</html>
